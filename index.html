<!DOCTYPE html>
<html lang="fr" translate="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LATYFA BOUTIQUE | Officiel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,900;1,900&family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --latyfa-gold: #c5a059; --latyfa-dark: #1a1a1a; --latyfa-accent: #ff6600; }
        body { background-color: #fcfcfc; font-family: 'Montserrat', sans-serif; margin: 0; scroll-behavior: smooth; overflow-x: hidden; }
        .logo-font { font-family: 'Playfair Display', serif; }
        .ali-gradient { background: linear-gradient(90deg, var(--latyfa-gold) 0%, #e2c286 100%); }
        
        /* Loader */
        #loader { fixed: inset-0; background: #1a1a1a; z-index: 9999; display: flex; flex-direction: column; align-items: center; justify-content: center; transition: 0.8s; }
        .loader-hidden { opacity: 0; pointer-events: none; }
        
        /* Modals */
        .modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; background: white; overflow-y: auto; padding: 20px; }
        .modal.active { display: block; }

        /* Roue de la Fortune */
        .wheel-mask { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.85); z-index: 3000; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .wheel-mask.active { display: flex; }
        #canvas { max-width: 100%; height: auto; transition: transform 4s cubic-bezier(0.1, 0, 0.2, 1); }

        /* Notifications Preuve Sociale */
        #social-proof { position: fixed; bottom: 20px; left: 20px; background: white; padding: 10px 15px; border-radius: 50px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); display: flex; align-items: center; gap: 10px; transform: translateY(150%); transition: 0.5s; z-index: 1500; border: 1px solid #eee; }
        #social-proof.active { transform: translateY(0); }

        /* Mode Valentin (C≈ìurs) */
        .heart { position: fixed; color: #ff4d4d; font-size: 15px; pointer-events: none; z-index: 999; animation: fall linear forwards; }
        @keyframes fall { to { transform: translateY(100vh) rotate(360deg); opacity: 0; } }
        
        .product-card { background: white; border-radius: 12px; transition: 0.3s; border: 1px solid #eee; overflow: hidden; }
        .product-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.05); }
    </style>
</head>
<body>

<div id="loader">
    <img src="https://i.postimg.cc/qMqtFGM2/1770342273452.png" class="h-20 w-20 rounded-full border-2 border-[#c5a059] animate-pulse">
    <h1 class="logo-font text-xl text-[#c5a059] mt-4 italic">LATYFA SHOP...</h1>
</div>

<div id="social-proof">
    <div class="w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center text-orange-500">
        <i class="fa-solid fa-bag-shopping text-xs"></i>
    </div>
    <div class="text-[9px] font-bold uppercase tracking-tight">
        <span id="sp-user" class="text-blue-600">Awa B.</span> vient d'acheter <br> 
        <span id="sp-item" class="text-gray-400">Sac Prestige</span>
    </div>
</div>

<div class="bg-black text-[#c5a059] text-center py-2 text-[10px] font-black tracking-widest uppercase">
    ‚ú® OFFRE VALENTIN : -20% AVEC LE CODE <span class="text-white">LOVE225</span> ‚ú®
</div>

<header class="bg-white/80 backdrop-blur-md sticky top-0 z-[1000] border-b">
    <div class="container mx-auto px-4 py-3 flex justify-between items-center">
        <div class="flex items-center gap-2">
            <img src="https://i.postimg.cc/qMqtFGM2/1770342273452.png" class="h-10 w-10 rounded-full border border-[#c5a059]">
            <span class="text-2xl font-black italic logo-font text-[#c5a059]">LATYFA</span>
        </div>
        <div class="flex gap-5">
            <button onclick="ouvrirPanier()" class="relative">
                <i class="fa-solid fa-cart-shopping text-xl text-gray-700"></i>
                <span id="cart-count" class="absolute -top-2 -right-2 bg-red-500 text-white text-[9px] font-bold h-4 w-4 rounded-full flex items-center justify-center">0</span>
            </button>
        </div>
    </div>
</header>

<div class="p-4 bg-white">
    <input type="text" id="search" oninput="filtrer()" placeholder="Que recherchez-vous ?" class="w-full bg-gray-100 border-none rounded-xl py-3 px-5 text-sm outline-none focus:ring-1 ring-[#c5a059]">
</div>

<div class="container mx-auto px-4 py-6">
    <div id="grid" class="grid grid-cols-2 md:grid-cols-4 gap-4"></div>
</div>

<div id="detailModal" class="modal">
    <div class="max-w-lg mx-auto">
        <button onclick="fermerModal('detailModal')" class="mb-4 text-sm font-bold uppercase text-gray-400">‚Üê Retour</button>
        <img id="det-img" src="" class="w-full h-80 object-cover rounded-2xl shadow-xl">
        <h2 id="det-name" class="text-2xl font-black mt-4 uppercase italic"></h2>
        <p id="det-price" class="text-[#ff6600] text-xl font-black"></p>
        <p id="det-desc" class="text-gray-500 text-sm mt-2 leading-relaxed"></p>
        <button onclick="ajouterAuPanier()" class="w-full ali-gradient text-white py-4 rounded-xl font-black uppercase mt-6 shadow-lg">Ajouter au Panier</button>
    </div>
</div>

<div id="cartModal" class="modal">
    <div class="max-w-md mx-auto pb-20">
        <h2 class="text-2xl font-black mb-6 italic text-center">Ma S√©lection</h2>
        <div id="cart-list" class="space-y-4 mb-8"></div>
        
        <div class="bg-gray-50 p-5 rounded-2xl space-y-4 border border-dashed border-gray-300">
            <input type="text" id="client-nom" placeholder="Votre Nom complet *" class="w-full p-3 rounded-lg border-none bg-white text-sm">
            <select id="livraison" onchange="calculerTotal()" class="w-full p-3 rounded-lg border-none bg-white text-sm font-bold">
                <option value="0">--- CHOISIR LIVRAISON ---</option>
                <option value="1500">Abidjan Nord (1.500 F)</option>
                <option value="2000">Abidjan Sud (2.000 F)</option>
                <option value="3000">Int√©rieur Pays (3.000 F)</option>
                <option value="0">Retrait Boutique (0 F)</option>
            </select>
            <div class="flex justify-between font-black text-xl border-t pt-4">
                <span>TOTAL :</span>
                <span id="cart-total" class="text-red-600">0 F</span>
            </div>
        </div>
        
        <button onclick="envoyerWhatsApp()" class="w-full bg-[#25D366] text-white py-4 rounded-xl font-black uppercase mt-6 shadow-lg flex items-center justify-center gap-2">
            <i class="fa-brands fa-whatsapp text-xl"></i> Confirmer sur WhatsApp
        </button>
        
        <button onclick="toggleHistorique()" class="w-full bg-blue-600 text-white py-3 rounded-xl font-black uppercase text-[10px] tracking-widest mt-4">
             <i class="fa-solid fa-clock-rotate-left"></i> Voir l'historique WhatsApp
        </button>

        <div id="historique-zone" class="hidden mt-4 p-4 bg-gray-100 rounded-lg text-[10px] font-mono whitespace-pre-wrap"></div>

        <button onclick="fermerModal('cartModal')" class="w-full mt-4 text-gray-400 font-bold text-[10px] uppercase underline text-center">Continuer le shopping</button>
    </div>
</div>

<div class="wheel-mask" id="wheelModal">
    <div class="bg-white p-6 rounded-[2rem] text-center max-w-sm w-full mx-4 relative border-4 border-[#c5a059]">
        <button onclick="fermerModal('wheelModal')" class="absolute top-4 right-4 text-gray-300 text-xl">√ó</button>
        <h3 class="logo-font text-2xl font-black text-gray-800 mb-2 italic">LUCKY WHEEL</h3>
        <p class="text-[9px] font-bold text-blue-500 uppercase tracking-widest mb-4">Tentez de gagner une r√©duction !</p>
        <canvas id="canvas" width="300" height="300"></canvas>
        <button id="spin-btn" onclick="lancerRoue()" class="w-full bg-black text-white py-4 rounded-full font-black mt-6 shadow-xl active:scale-95 transition">TOURNER LA ROUE</button>
    </div>
</div>

<button onclick="ouvrirModal('wheelModal')" class="fixed bottom-6 right-6 h-14 w-14 bg-black text-white rounded-full shadow-2xl z-[1500] flex items-center justify-center border-2 border-[#c5a059] animate-bounce">
    <i class="fa-solid fa-gift text-[#c5a059] text-2xl"></i>
</button>

<div id="adminModal" class="modal bg-gray-50">
    <div class="max-w-xl mx-auto pb-20">
        <div class="flex justify-between items-center py-6">
            <h2 class="text-xl font-black italic uppercase">Admin Panel</h2>
            <button onclick="fermerModal('adminModal')" class="text-2xl">&times;</button>
        </div>
        <div class="bg-white p-6 rounded-2xl border shadow-sm space-y-3">
            <input type="text" id="adm-name" placeholder="Nom du produit" class="w-full p-3 border rounded-lg">
            <input type="number" id="adm-price" placeholder="Prix" class="w-full p-3 border rounded-lg">
            <input type="text" id="adm-img" placeholder="URL Image" class="w-full p-3 border rounded-lg">
            <button onclick="ajouterAdmin()" class="w-full bg-black text-white py-3 rounded-lg font-bold">AJOUTER PRODUIT</button>
        </div>
        <div id="admin-list" class="mt-8 space-y-2"></div>
    </div>
</div>

<div onclick="checkAdmin()" class="fixed bottom-0 left-0 w-10 h-10 z-[3000] cursor-default"></div>

<script>
    // --- 1. DONN√âES ---
    let products = JSON.parse(localStorage.getItem('latyfa_db')) || [
        { id: 1, name: "Sac Luxe Diamond", price: 35000, img: "https://images.unsplash.com/photo-1584917865442-de89df76afd3?w=500", desc: "Le summum de l'√©l√©gance." },
        { id: 2, name: "Montre Gold Edition", price: 25000, img: "https://images.unsplash.com/photo-1524592094714-0f0654e20314?w=500", desc: "Pr√©cision et style unique." }
    ];
    let cart = [];
    let selectedProduct = null;

    // --- 2. INITIALISATION ---
    window.onload = () => {
        render();
        initRoue();
        setTimeout(() => document.getElementById('loader').classList.add('loader-hidden'), 1200);
        setInterval(showSocialProof, 8000);
        setInterval(createHeart, 1000);
    };

    // --- 3. FONCTIONS BOUTIQUE ---
    function render(data = products) {
        const grid = document.getElementById('grid');
        grid.innerHTML = data.map(p => `
            <div class="product-card" onclick="ouvrirDetail(${p.id})">
                <img src="${p.img}" class="w-full h-48 object-cover">
                <div class="p-3">
                    <h3 class="text-[10px] font-bold uppercase truncate">${p.name}</h3>
                    <p class="text-[#ff6600] font-black text-xs mt-1">${p.price.toLocaleString()} F</p>
                </div>
            </div>
        `).join('');
    }

    function ouvrirDetail(id) {
        selectedProduct = products.find(p => p.id === id);
        document.getElementById('det-img').src = selectedProduct.img;
        document.getElementById('det-name').innerText = selectedProduct.name;
        document.getElementById('det-price').innerText = selectedProduct.price.toLocaleString() + " F";
        document.getElementById('det-desc').innerText = selectedProduct.desc;
        ouvrirModal('detailModal');
    }

    function ajouterAuPanier() {
        cart.push(selectedProduct);
        document.getElementById('cart-count').innerText = cart.length;
        fermerModal('detailModal');
        alert("Ajout√© au panier !");
    }

    function ouvrirPanier() {
        const list = document.getElementById('cart-list');
        list.innerHTML = cart.map((item, index) => `
            <div class="flex items-center gap-4 bg-white p-3 rounded-xl border">
                <img src="${item.img}" class="w-12 h-12 rounded object-cover">
                <div class="flex-1">
                    <p class="text-[10px] font-black uppercase">${item.name}</p>
                    <p class="text-red-500 font-bold text-[10px]">${item.price.toLocaleString()} F</p>
                </div>
                <button onclick="retirerDuPanier(${index})" class="text-gray-300"><i class="fa-solid fa-trash"></i></button>
            </div>
        `).join('');
        calculerTotal();
        ouvrirModal('cartModal');
    }

    function retirerDuPanier(index) {
        cart.splice(index, 1);
        document.getElementById('cart-count').innerText = cart.length;
        ouvrirPanier();
    }

    function calculerTotal() {
        const totalArt = cart.reduce((sum, item) => sum + item.price, 0);
        const frais = parseInt(document.getElementById('livraison').value);
        document.getElementById('cart-total').innerText = (totalArt + frais).toLocaleString() + " F";
    }

    function envoyerWhatsApp() {
        const nom = document.getElementById('client-nom').value;
        if(!nom || cart.length === 0) return alert("Nom ou panier vide !");
        
        let texte = `‚ú® *NOUVELLE COMMANDE LATYFA*\n\nüë§ Client : ${nom}\n\nüõí *ARTICLES :*\n`;
        cart.forEach(item => texte += `- ${item.name} (${item.price.toLocaleString()} F)\n`);
        texte += `\nüí∞ *TOTAL :* ${document.getElementById('cart-total').innerText}\n\nMerci de confirmer la disponibilit√© !`;
        
        // Sauvegarde historique
        let hist = JSON.parse(localStorage.getItem('latyfa_history')) || [];
        hist.push({ date: new Date().toLocaleString(), msg: texte });
        localStorage.setItem('latyfa_history', JSON.stringify(hist));

        window.open(`https://wa.me/2250709002881?text=${encodeURIComponent(texte)}`);
    }

    function toggleHistorique() {
        const zone = document.getElementById('historique-zone');
        const hist = JSON.parse(localStorage.getItem('latyfa_history')) || [];
        zone.classList.toggle('hidden');
        zone.innerText = hist.length ? hist.map(h => `üìÖ ${h.date}\n${h.msg}\n-------------------`).join('\n') : "Aucun historique.";
    }

    // --- 4. ROUE DE LA FORTUNE ---
    const options = ["-5%", "CADEAU", "-10%", "MERCI", "-20%", "ESSAYE ENCORE"];
    const colors = ["#000", "#c5a059", "#000", "#c5a059", "#000", "#c5a059"];
    let startAngle = 0;
    const arc = Math.PI / (options.length / 2);

    function initRoue() {
        const canvas = document.getElementById("canvas");
        const ctx = canvas.getContext("2d");
        ctx.clearRect(0, 0, 300, 300);
        options.forEach((opt, i) => {
            const angle = startAngle + i * arc;
            ctx.fillStyle = colors[i];
            ctx.beginPath();
            ctx.moveTo(150, 150);
            ctx.arc(150, 150, 130, angle, angle + arc, false);
            ctx.fill();
            ctx.save();
            ctx.fillStyle = "white";
            ctx.translate(150 + Math.cos(angle + arc/2) * 80, 150 + Math.sin(angle + arc/2) * 80);
            ctx.rotate(angle + arc/2 + Math.PI/2);
            ctx.font = "bold 10px Montserrat";
            ctx.fillText(opt, -ctx.measureText(opt).width/2, 0);
            ctx.restore();
        });
    }

    function lancerRoue() {
        const btn = document.getElementById('spin-btn');
        btn.disabled = true;
        const randomDeg = Math.floor(3000 + Math.random() * 3000);
        document.getElementById('canvas').style.transform = `rotate(${randomDeg}deg)`;
        setTimeout(() => {
            alert("F√âLICITATIONS ! üéâ Prenez une capture d'√©cran et envoyez-la nous !");
            btn.disabled = false;
        }, 4500);
    }

    // --- 5. EFFETS & ADMIN ---
    function showSocialProof() {
        const names = ["Affou S.", "Kader K.", "Mouna D.", "Bamba T.", "Sarah L."];
        const items = ["Sac Diamond", "Montre Gold", "Parfum Oud", "Bracelet Royal"];
        document.getElementById('sp-user').innerText = names[Math.floor(Math.random()*names.length)];
        document.getElementById('sp-item').innerText = items[Math.floor(Math.random()*items.length)];
        const sp = document.getElementById('social-proof');
        sp.classList.add('active');
        setTimeout(() => sp.classList.remove('active'), 4000);
    }

    function createHeart() {
        const h = document.createElement("div");
        h.innerHTML = "‚ù§";
        h.className = "heart";
        h.style.left = Math.random() * 100 + "vw";
        h.style.animationDuration = (Math.random() * 3 + 2) + "s";
        document.body.appendChild(h);
        setTimeout(() => h.remove(), 5000);
    }

    function checkAdmin() {
        if(prompt("Code Secret :") === "2026") ouvrirModal('adminModal'), refreshAdmin();
    }

    function ajouterAdmin() {
        const n = document.getElementById('adm-name').value;
        const p = document.getElementById('adm-price').value;
        const i = document.getElementById('adm-img').value;
        if(!n || !p || !i) return;
        products.push({ id: Date.now(), name: n, price: parseInt(p), img: i, desc: "Ajout√© via mobile." });
        localStorage.setItem('latyfa_db', JSON.stringify(products));
        refreshAdmin(); render();
    }

    function refreshAdmin() {
        document.getElementById('admin-list').innerHTML = products.map(p => `
            <div class="flex justify-between items-center bg-white p-2 rounded border">
                <span class="text-[10px] font-bold">${p.name}</span>
                <button onclick="deleteProd(${p.id})" class="text-red-500">‚ùå</button>
            </div>
        `).join('');
    }

    function deleteProd(id) {
        products = products.filter(p => p.id !== id);
        localStorage.setItem('latyfa_db', JSON.stringify(products));
        refreshAdmin(); render();
    }

    function ouvrirModal(id) { document.getElementById(id).classList.add('active'); }
    function fermerModal(id) { document.getElementById(id).classList.remove('active'); }
    function filtrer() {
        const val = document.getElementById('search').value.toLowerCase();
        render(products.filter(p => p.name.toLowerCase().includes(val)));
    }
</script>

</body>
</html>
