<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Latyfa Shop - Luxe & Sourcing</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Archivo+Black&family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #fff; color: #000; }
        .font-black { font-family: 'Archivo Black', sans-serif; }
        
        .layer { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 100; align-items: center; justify-content: center; padding: 20px; }
        .layer.active { display: flex; }

        #side-menu { position: fixed; top: 0; left: -100%; width: 80%; height: 100%; background: white; z-index: 200; transition: 0.4s; }
        #side-menu.open { left: 0; }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        
        #loader { display: none; position: fixed; inset: 0; background: white; z-index: 10000; align-items: center; justify-content: center; flex-direction: column; }
        .spinner { width: 40px; height: 40px; border: 4px solid #f3f3f3; border-top: 4px solid #ff4d00; border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="pb-20">

    <div id="loader">
        <div class="spinner"></div>
        <p class="mt-4 font-black text-[10px] uppercase tracking-widest text-orange-600">Validation de votre commande...</p>
    </div>

    <header class="sticky top-0 bg-white z-50 px-6 py-5 flex justify-between items-center border-b border-gray-100">
        <button onclick="toggleMenu()" class="text-2xl">‚ò∞</button>
        <h1 class="font-black text-2xl tracking-tighter italic uppercase">LATYFA<span class="text-orange-600">.</span></h1>
        <button onclick="openCart()" class="relative">
            <span class="text-2xl">üõçÔ∏è</span>
            <span id="cart-count" class="absolute -top-1 -right-1 bg-orange-600 text-white text-[9px] font-bold px-1.5 rounded-full">0</span>
        </button>
    </header>

    <div id="side-menu" class="p-8 flex flex-col">
        <button onclick="toggleMenu()" class="text-left text-2xl mb-12">‚úï</button>
        <nav class="space-y-8 flex-1">
            <a href="#" onclick="toggleMenu()" class="block text-3xl font-black italic uppercase text-orange-600">Accueil</a>
            <button onclick="openInfo('about')" class="block text-2xl font-bold uppercase">√Ä Propos</button>
            <button onclick="openInfo('policy')" class="block text-2xl font-bold uppercase">Livraison</button>
            <button onclick="openInfo('condition')" class="block text-2xl font-bold uppercase">Retours</button>
        </nav>
    </div>

    <main class="p-4 grid grid-cols-2 gap-4" id="product-grid"></main>

    <div id="modal-product" class="layer">
        <div class="bg-white w-full max-w-md rounded-[32px] overflow-hidden relative shadow-2xl">
            <button onclick="closeModals()" class="absolute top-4 right-4 z-50 bg-white w-8 h-8 rounded-full flex items-center justify-center shadow-lg">‚úï</button>
            
            <div id="p-images" class="flex overflow-x-auto snap-x snap-mandatory no-scrollbar h-[350px]"></div>
            
            <div class="p-6">
                <h2 id="p-title" class="font-black text-2xl mb-1 italic uppercase tracking-tighter"></h2>
                <p id="p-price" class="text-orange-600 font-black text-xl mb-6"></p>

                <div class="space-y-5">
                    <div>
                        <p class="text-[10px] font-black text-gray-400 uppercase mb-2">Couleur</p>
                        <div id="p-colors" class="flex gap-2"></div>
                    </div>
                    <div>
                        <p class="text-[10px] font-black text-gray-400 uppercase mb-2">Taille</p>
                        <div id="p-sizes" class="flex gap-2"></div>
                    </div>
                </div>

                <button onclick="addToCart()" class="w-full bg-black text-white py-5 mt-8 rounded-2xl font-black text-sm uppercase tracking-widest hover:bg-orange-600 transition-all">Ajouter au panier</button>
            </div>
        </div>
    </div>

    <div id="modal-cart" class="layer">
        <div class="bg-white w-full max-w-md rounded-[32px] p-6 relative shadow-2xl max-h-[90vh] overflow-y-auto no-scrollbar">
            <button onclick="closeModals()" class="absolute top-4 right-4 text-xl">‚úï</button>
            <h2 class="font-black text-2xl mb-6 italic uppercase tracking-tighter">Mon Panier</h2>
            
            <div id="cart-items" class="space-y-4 mb-6"></div>

            <div class="bg-gray-50 p-4 rounded-2xl mb-6">
                <div class="flex gap-2">
                    <input type="text" id="promo-code" placeholder="CODE PROMO" class="flex-1 bg-white border-none p-3 rounded-xl text-xs font-bold outline-none">
                    <button onclick="applyPromo()" class="bg-black text-white px-4 rounded-xl text-[10px] font-black uppercase">V√©rifier</button>
                </div>
                <p id="promo-msg" class="text-[9px] mt-1 font-bold text-center"></p>
            </div>

            <div class="mb-6">
                <p class="text-[10px] font-black text-gray-400 uppercase mb-2">üìç Zone de livraison</p>
                <select id="delivery-zone" onchange="updateCartUI()" class="w-full p-4 bg-gray-50 rounded-2xl text-[11px] font-bold outline-none">
                    <option value="0">--- CHOISIR MA COMMUNE ---</option>
                    <optgroup label="ZONE A - 1000 F">
                        <option value="1000">Abobo, Adjam√©, Cocody (Angr√©, Riviera)</option>
                        <option value="1000">Plateau, Treichville, Marcory</option>
                    </optgroup>
                    <optgroup label="ZONE B - 2000 F">
                        <option value="2000">Yopougon, Port-Bou√´t, Koumassi</option>
                        <option value="2000">Bingerville, Anyama</option>
                    </optgroup>
                    <optgroup label="EXT√âRIEUR - 3000 F">
                        <option value="3000">Bassam, Songon, Int√©rieur (Compagnie)</option>
                    </optgroup>
                    <option value="0">Retrait en boutique (Gratuit)</option>
                </select>
            </div>

            <div class="space-y-3 mb-6">
                <input type="text" id="c-nom" placeholder="NOM COMPLET" class="w-full p-4 bg-gray-50 rounded-2xl text-sm font-bold outline-none">
                <input type="tel" id="c-tel" placeholder="NUM√âRO WHATSAPP" class="w-full p-4 bg-gray-50 rounded-2xl text-sm font-bold outline-none">
            </div>

            <div class="border-t pt-4 flex justify-between items-end mb-6">
                <div>
                    <p class="text-[10px] font-black text-gray-400 uppercase leading-none">Total √† payer</p>
                    <p id="old-total" class="text-xs text-gray-400 line-through"></p>
                    <p id="final-total" class="text-3xl font-black text-orange-600 italic">0 F</p>
                </div>
            </div>

            <button onclick="handleCheckout()" class="w-full bg-orange-600 text-white py-5 rounded-2xl font-black text-sm uppercase tracking-widest shadow-lg shadow-orange-200">Commander via WhatsApp</button>
        </div>
    </div>

    <div id="modal-info" class="layer">
        <div class="bg-white w-full max-w-md rounded-[32px] p-8 relative shadow-2xl">
            <button onclick="closeModals()" class="absolute top-4 right-4 text-xl">‚úï</button>
            <h2 id="info-title" class="font-black text-xl mb-4 text-orange-600 uppercase italic tracking-tighter"></h2>
            <div id="info-content" class="text-[13px] leading-relaxed text-gray-700"></div>
        </div>
    </div>

    <script>
        const products = [
            {
                id: 1,
                nom: "Parure de Luxe Or",
                prix: 7000,
                images: [
                    "https://i.ibb.co/XfXG0YV/image-2025-02-05-181519782.png",
                    "https://i.ibb.co/XfXG0YV/image-2025-02-05-181519782.png"
                ],
                colors: ["Or", "Argent"],
                sizes: ["Unique"]
            }
        ];

        let cart = [];
        let selectedProduct = null;
        let sColor = "";
        let sSize = "";
        let dPercent = 0;
        let dFixed = 0;

        function render() {
            document.getElementById('product-grid').innerHTML = products.map(p => `
                <div class="group" onclick="openProduct(${p.id})">
                    <div class="relative aspect-[3/4] rounded-[24px] overflow-hidden bg-gray-100 mb-3 shadow-sm">
                        <img src="${p.images[0]}" class="w-full h-full object-cover">
                    </div>
                    <h3 class="font-black text-[11px] uppercase tracking-tighter italic leading-none px-1">${p.nom}</h3>
                    <p class="text-orange-600 font-bold text-[13px] mt-1 px-1">${p.prix.toLocaleString()} F</p>
                </div>
            `).join('');
        }

        function toggleMenu() { document.getElementById('side-menu').classList.toggle('open'); }
        function closeModals() { document.querySelectorAll('.layer').forEach(l => l.classList.remove('active')); }

        function openProduct(id) {
            selectedProduct = products.find(p => p.id === id);
            sColor = selectedProduct.colors[0];
            sSize = selectedProduct.sizes[0];
            
            document.getElementById('p-title').innerText = selectedProduct.nom;
            document.getElementById('p-price').innerText = selectedProduct.prix.toLocaleString() + " F";
            document.getElementById('p-images').innerHTML = selectedProduct.images.map(img => `<img src="${img}" class="w-full h-full object-cover snap-start flex-shrink-0">`).join('');
            
            document.getElementById('p-colors').innerHTML = selectedProduct.colors.map(c => `
                <button onclick="sColor='${c}'; openProduct(${id})" class="px-4 py-2 border-2 rounded-xl text-[10px] font-black uppercase ${sColor===c?'border-black bg-black text-white':'border-gray-100'}">${c}</button>
            `).join('');

            document.getElementById('p-sizes').innerHTML = selectedProduct.sizes.map(s => `
                <button onclick="sSize='${s}'; openProduct(${id})" class="px-4 py-2 border-2 rounded-xl text-[10px] font-black uppercase ${sSize===s?'border-black bg-black text-white':'border-gray-100'}">${s}</button>
            `).join('');
            
            document.getElementById('modal-product').classList.add('active');
        }

        function addToCart() {
            cart.push({ ...selectedProduct, sColor, sSize });
            updateCartUI();
            closeModals();
        }

        function openCart() {
            document.getElementById('modal-cart').classList.add('active');
            updateCartUI();
        }

        function updateCartUI() {
            const subtotal = cart.reduce((s, i) => s + i.prix, 0);
            const deliveryFee = parseInt(document.getElementById('delivery-zone').value) || 0;
            let reduction = (subtotal * (dPercent / 100)) + dFixed;
            let finalPrice = Math.max(0, subtotal - reduction) + deliveryFee;

            document.getElementById('cart-count').innerText = cart.length;
            document.getElementById('cart-items').innerHTML = cart.map((i, idx) => `
                <div class="flex justify-between items-center bg-gray-50 p-4 rounded-2xl">
                    <div>
                        <p class="font-black text-[10px] uppercase">${i.nom}</p>
                        <p class="text-[9px] text-gray-500 uppercase font-bold">${i.sColor} ‚Äî ${i.sSize}</p>
                    </div>
                    <button onclick="removeFromCart(${idx})" class="text-red-500 font-bold">‚úï</button>
                </div>
            `).join('');

            document.getElementById('final-total').innerText = finalPrice.toLocaleString() + " F";
            document.getElementById('old-total').innerText = (reduction > 0) ? (subtotal + deliveryFee).toLocaleString() + " F" : "";
        }

        function removeFromCart(idx) { cart.splice(idx, 1); updateCartUI(); }

        function applyPromo() {
            const code = document.getElementById('promo-code').value.toUpperCase();
            if (code === "LATYFA25") {
                dPercent = 10;
                document.getElementById('promo-msg').innerText = "R√âDUCTION 10% APPLIQU√âE !";
                document.getElementById('promo-msg').className = "text-[9px] mt-1 font-bold text-center text-green-500";
            } else {
                alert("Code invalide");
            }
            updateCartUI();
        }

        function handleCheckout() {
            const nom = document.getElementById('c-nom').value;
            const tel = document.getElementById('c-tel').value;
            const zoneSelect = document.getElementById('delivery-zone');
            const zoneName = zoneSelect.options[zoneSelect.selectedIndex].text;

            if(!nom || !tel || zoneSelect.value === "0") return alert("Remplissez votre nom, num√©ro et zone de livraison !");
            
            document.getElementById('loader').style.display = 'flex';
            
            const msg = `üåü COMMANDE LATYFA üåü\nüë§ CLIENT: ${nom}\nüìû TEL: ${tel}\nüìç LIVRAISON: ${zoneName}\nüí∞ TOTAL: ${document.getElementById('final-total').innerText}\nüì¶ ARTICLES:\n${cart.map(i => `- ${i.nom} (${i.sColor})`).join('\n')}`;

            setTimeout(() => {
                document.getElementById('loader').style.display = 'none';
                window.open(`https://wa.me/2250709002881?text=${encodeURIComponent(msg)}`);
            }, 2000);
        }

        function openInfo(type) {
            const info = {
                about: ["√Ä Propos", "Latyfa Shop : Luxe et Sourcing de qualit√©. Dirig√© par Mme Traor√© Djeneba √† Abobo."],
                policy: ["Livraison", "Abidjan (24h), Int√©rieur (48h-72h)."],
                condition: ["Retours", "√âchange uniquement sur d√©faut de fabrication signal√© sous 72h."]
            };
            document.getElementById('info-title').innerText = info[type][0];
            document.getElementById('info-content').innerText = info[type][1];
            document.getElementById('modal-info').classList.add('active');
            toggleMenu();
        }

        render();
    </script>
</body>
</html>
