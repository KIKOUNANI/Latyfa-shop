<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LATYFA SHOP</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>
<body class="bg-white text-black p-4">

    <div class="flex justify-between items-center mb-6 border-b pb-4">
        <h1 class="font-bold text-2xl tracking-tighter">LATYFA</h1>
        <button onclick="voirPanier()" class="bg-black text-white px-4 py-2 text-xs rounded-full">
            Panier (<span id="count">0</span>)
        </button>
    </div>

    <div id="boutique" class="grid grid-cols-2 gap-4">
        <div class="border p-2 rounded">
            <img src="https://images.unsplash.com/photo-1584917865442-de89df76afd3?w=300" class="w-full rounded mb-2">
            <p class="text-[10px] font-bold">SAC CROCO GOLD</p>
            <p class="text-xs text-amber-600 mb-2">45 000 F</p>
            <button onclick="ajouter('Sac Croco Gold', 45000)" class="w-full bg-gray-100 py-2 text-[10px] font-bold uppercase">Ajouter</button>
        </div>
        <div class="border p-2 rounded">
            <img src="https://images.unsplash.com/photo-1535043934128-cf0b28d52f95?w=300" class="w-full rounded mb-2">
            <p class="text-[10px] font-bold">ESCARPINS NUDE</p>
            <p class="text-xs text-amber-600 mb-2">35 000 F</p>
            <button onclick="ajouter('Escarpins Nude', 35000)" class="w-full bg-gray-100 py-2 text-[10px] font-bold uppercase">Ajouter</button>
        </div>
    </div>

    <div id="modal-panier" class="fixed inset-0 bg-white z-50 p-6 hidden">
        <div class="flex justify-between mb-8">
            <h2 class="font-bold text-xl">MON PANIER</h2>
            <button onclick="fermer()" class="text-2xl font-bold">&times;</button>
        </div>
        <div id="liste-panier" class="space-y-4 mb-6"></div>
        <div class="border-t pt-4">
            <p class="text-right font-bold mb-4">TOTAL : <span id="total">0</span> F CFA</p>
            <input type="text" id="nom" placeholder="Votre Nom" class="w-full border p-3 mb-3 outline-none">
            <input type="text" id="ville" placeholder="Votre Ville/Quartier" class="w-full border p-3 mb-6 outline-none">
            <button onclick="commander()" class="w-full bg-green-600 text-white py-4 font-bold uppercase">Envoyer sur WhatsApp</button>
        </div>
    </div>

    <div id="modal-succes" class="fixed inset-0 bg-white z-[60] p-6 hidden flex flex-col items-center justify-center text-center">
        <h2 class="text-2xl font-bold mb-4">COMMANDE ENVOYÉE !</h2>
        <p class="text-sm text-gray-500 mb-8">N'oubliez pas d'appuyer sur "ENVOYER" dans WhatsApp.</p>
        <button onclick="telecharger()" class="w-full border border-black py-4 mb-4 font-bold">TÉLÉCHARGER LE REÇU PDF</button>
        <button onclick="location.reload()" class="underline">Retour à la boutique</button>
    </div>

    <div id="recu-pdf" class="p-10 text-black bg-white" style="position: absolute; left: -9999px;">
        <h1 style="text-align:center">LATYFA SHOP</h1>
        <hr>
        <p>Client : <span id="pdf-nom"></span></p>
        <div id="pdf-items"></div>
        <hr>
        <h2>TOTAL : <span id="pdf-total"></span> F CFA</h2>
    </div>

    <script>
        let panier = [];

        function ajouter(nom, prix) {
            panier.push({nom, prix});
            document.getElementById('count').innerText = panier.length;
            alert(nom + " ajouté !");
        }

        function voirPanier() {
            if(panier.length === 0) return alert("Le panier est vide");
            document.getElementById('modal-panier').classList.remove('hidden');
            let div = document.getElementById('liste-panier');
            let total = 0;
            div.innerHTML = "";
            panier.forEach(it => {
                total += it.prix;
                div.innerHTML += `<div class="flex justify-between text-sm"><span>${it.nom}</span><b>${it.prix} F</b></div>`;
            });
            document.getElementById('total').innerText = total;
        }

        function fermer() {
            document.getElementById('modal-panier').classList.add('hidden');
        }

        function commander() {
            const nom = document.getElementById('nom').value;
            const ville = document.getElementById('ville').value;
            if(!nom || !ville) return alert("Remplissez vos infos");

            const total = document.getElementById('total').innerText;
            let texte = `✨ NOUVELLE COMMANDE LATYFA ✨\nClient : ${nom}\nVille : ${ville}\n\n`;
            panier.forEach(it => texte += `- ${it.nom}\n`);
            texte += `\nTOTAL : ${total} F CFA`;

            // WhatsApp
            window.open(`https://wa.me/2250709002881?text=${encodeURIComponent(texte)}`);

            // Préparation PDF
            document.getElementById('pdf-nom').innerText = nom;
            document.getElementById('pdf-total').innerText = total;
            document.getElementById('pdf-items').innerHTML = panier.map(it => `<p>${it.nom} : ${it.prix} F</p>`).join('');

            // Affichage succès
            document.getElementById('modal-panier').classList.add('hidden');
            document.getElementById('modal-succes').classList.remove('hidden');
        }

        function telecharger() {
            const element = document.getElementById('recu-pdf');
            html2pdf().from(element).save('Recu_Latyfa.pdf');
        }
    </script>
</body>
</html>
