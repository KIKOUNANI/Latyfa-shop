üåüCE SITE EST EN PLEINE CR√âATIONüåü
<!DOCTYPE html>
<html lang="fr" translate="no">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-0HC6CY42YB"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-0HC6CY42YB');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>LATYFA BOUTIQUE | Officiel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,900;1,900&family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <!-- Chart.js pour les graphiques admin -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Facebook SDK (gratuit) -->
    <script async defer crossorigin="anonymous" src="https://connect.facebook.net/fr_FR/sdk.js#xfbml=1&version=v18.0&appId=123456789012345" nonce="ABC123"></script>
    <!-- Google Identity Services (gratuit) -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <!-- Manifest PWA -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#c5a059">
    <style>
        /* Styles suppl√©mentaires pour la section d√©veloppeur */
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .floating {
            animation: float 3s ease-in-out infinite;
        }

        /* Effet de brillance sur les cartes */
        .glow-card {
            position: relative;
            overflow: hidden;
        }

        .glow-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(197,160,89,0.1) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .glow-card:hover::before {
            opacity: 1;
        }

        /* Animation des boutons */
        .pulse-button {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(197,160,89,0.7); }
            70% { box-shadow: 0 0 0 10px rgba(197,160,89,0); }
            100% { box-shadow: 0 0 0 0 rgba(197,160,89,0); }
        }

        /* ==================== S√âLECTEUR DE LANGUE ==================== */
        .language-selector {
            position: relative;
            margin-right: 5px;
        }

        .language-btn {
            display: flex;
            align-items: center;
            gap: 3px;
            padding: 6px 8px;
            background: #f3f4f6;
            border-radius: 30px;
            cursor: pointer;
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
            transition: all 0.3s;
            border: 1px solid transparent;
        }

        .language-btn:hover {
            background: var(--latyfa-gold);
            color: white;
            border-color: var(--latyfa-gold);
        }

        .language-btn i {
            font-size: 12px;
        }

        .language-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1);
            min-width: 130px;
            padding: 8px 0;
            margin-top: 5px;
            display: none;
            z-index: 1000;
            border: 1px solid #f0f0f0;
        }

        .language-dropdown.show {
            display: block;
        }

        .language-option {
            padding: 8px 12px;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 10px;
            font-weight: 600;
        }

        .language-option:hover {
            background: #f3f4f6;
            color: var(--latyfa-gold);
        }

        .language-option.active {
            background: var(--latyfa-gold);
            color: white;
        }

        .language-option img {
            width: 18px;
            height: 12px;
            object-fit: cover;
            border-radius: 2px;
        }

        .dark-theme .language-dropdown {
            background: #1e1e1e;
            border-color: #333;
        }

        .dark-theme .language-option:hover {
            background: #2d2d2d;
        }

        /* ==================== CAT√âGORIES HORIZONTALES STATIQUES ==================== */
        .categories-static {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 8px;
            padding: 15px 10px;
            background: white;
            border-bottom: 1px solid #f0f0f0;
            border-top: 1px solid #f0f0f0;
            margin-bottom: 20px;
            position: sticky;
            top: 70px;
            z-index: 45;
        }

        .category-static-item {
            flex: 0 0 auto;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 16px;
            border-radius: 40px;
            background: #f5f5f5;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.3px;
            color: #555;
            transition: all 0.2s ease;
            cursor: pointer;
            border: 1px solid transparent;
            white-space: nowrap;
        }

        .category-static-item i {
            font-size: 12px;
            color: var(--latyfa-gold);
        }

        .category-static-item:hover {
            background: white;
            border-color: var(--latyfa-gold);
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(197,160,89,0.15);
        }

        .category-static-item.active {
            background: var(--latyfa-gold);
            color: white;
        }

        .category-static-item.active i {
            color: white;
        }

        /* Menu hamburger pour mobile */
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #333;
        }

        .mobile-menu {
            display: none;
            position: fixed;
            top: 70px;
            left: 0;
            right: 0;
            background: white;
            padding: 20px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            z-index: 100;
            border-top: 1px solid #eee;
        }

        .mobile-menu.active {
            display: block;
        }

        .mobile-menu-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 0;
            border-bottom: 1px solid #f0f0f0;
            font-size: 14px;
            font-weight: 600;
        }

        .dark-theme .mobile-menu {
            background: #1e1e1e;
            border-color: #333;
        }

        /* Pour les petits √©crans */
        @media (max-width: 768px) {
            .desktop-items {
                display: none !important;
            }
            .mobile-menu-btn {
                display: block;
            }
            .language-selector {
                margin-right: 0;
            }
            .category-static-item {
                padding: 6px 12px;
                font-size: 9px;
            }
            .category-static-item i {
                font-size: 10px;
            }
        }

        /* Pour les tr√®s petits √©crans */
        @media (max-width: 480px) {
            .categories-static {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 6px;
                padding: 10px 8px;
            }
            .category-static-item {
                width: 100%;
                justify-content: center;
                white-space: normal;
                text-align: center;
                padding: 8px 5px;
                font-size: 8px;
            }
        }

        .dark-theme .categories-static {
            background: #1e1e1e;
            border-bottom-color: #333;
            border-top-color: #333;
        }

        .dark-theme .category-static-item {
            background: #2d2d2d;
            color: #e0e0e0;
        }

        .dark-theme .category-static-item:hover {
            background: #3d3d3d;
            border-color: var(--latyfa-gold);
        }
        
        :root { 
            --latyfa-gold: #c5a059;   
            --latyfa-dark: #1a1a1a;   
            --latyfa-accent: #ff6600; 
        }
        
        * {
            transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
        }
        
        body { 
            background-color: #fcfcfc; 
            font-family: 'Montserrat', sans-serif; 
            margin: 0; 
            scroll-behavior: smooth; 
            overflow-x: hidden;
        }
        
        .logo-font { font-family: 'Playfair Display', serif; color: var(--latyfa-gold) !important; }
        .text-gold { color: var(--latyfa-gold) !important; }
        .bg-gold { background-color: var(--latyfa-gold) !important; }
        .border-gold { border-color: var(--latyfa-gold) !important; }
        
        .category-link {
            font-family: 'Montserrat', sans-serif;
            font-size: 11px;
            font-weight: 700;
            letter-spacing: 0.1em;
            color: #555;
            transition: all 0.3s ease;
            border-bottom: 1px solid #f0f0f0;
            padding-bottom: 8px;
            cursor: pointer;
        }
        
        .category-link:hover {
            color: var(--latyfa-gold);
            padding-left: 5px;
            border-bottom-color: var(--latyfa-gold);
        }
        
        .product-card { 
            background: white; 
            border-radius: 12px; 
            border: 1px solid transparent; 
            height: 100%; 
            display: flex; 
            flex-direction: column; 
            cursor: pointer; 
            transition: all 0.3s ease;
            overflow: hidden;
            transform-style: preserve-3d;
        }
        
        .product-card:hover { 
            border-color: var(--latyfa-gold); 
            box-shadow: -20px 20px 30px rgba(0,0,0,0.1); 
            transform: translateY(-2px) rotateY(2deg) rotateX(1deg);
        }
        
        .product-card img {
            transition: transform 0.5s ease;
        }
        
        .product-card:hover img {
            transform: scale(1.05);
        }
        
        .modal { 
            display: none; 
            position: fixed; 
            z-index: 1000; 
            left: 0; 
            top: 0; 
            width: 100%; 
            height: 100%; 
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
            overflow-y: auto; 
        }
        
        .modal.active { 
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: white;
            border-radius: 24px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            animation: modalFadeIn 0.3s ease;
        }
        
        @keyframes modalFadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }
        
        /* MODE MAINTENANCE */
        .maintenance-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a1a1a, #2d2d2d);
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            color: white;
            text-align: center;
        }
        
        .maintenance-spinner {
            width: 60px;
            height: 60px;
            border: 5px solid rgba(197, 160, 89, 0.3);
            border-top-color: var(--latyfa-gold);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 30px;
        }
        
        .maintenance-icon {
            font-size: 60px;
            color: var(--latyfa-gold);
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }
        
        /* FORMULAIRES AUTH */
        .auth-tab {
            flex: 1;
            text-align: center;
            padding: 15px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            font-weight: 900;
            font-size: 12px;
            text-transform: uppercase;
            transition: all 0.3s ease;
        }
        
        .auth-tab.active {
            border-bottom-color: var(--latyfa-gold);
            color: var(--latyfa-gold);
        }
        
        .auth-form {
            transition: all 0.3s ease;
        }
        
        .auth-input {
            width: 100%;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 12px;
            font-size: 12px;
            margin-bottom: 15px;
            outline: none;
        }
        
        .auth-input:focus {
            border-color: var(--latyfa-gold);
            box-shadow: 0 0 0 2px rgba(197, 160, 89, 0.2);
        }
        
        .user-menu {
            position: relative;
            cursor: pointer;
        }
        
        .user-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1);
            min-width: 220px;
            padding: 10px 0;
            margin-top: 10px;
            display: none;
            z-index: 100;
        }
        
        .user-menu:hover .user-dropdown {
            display: block;
        }
        
        .user-dropdown-item {
            padding: 10px 15px;
            font-size: 11px;
            font-weight: bold;
            text-transform: uppercase;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .user-dropdown-item:hover {
            background: #f3f4f6;
            color: var(--latyfa-gold);
        }
        
        .user-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: #f3f4f6;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--latyfa-gold);
            position: relative;
        }
        
        /* ICONE MESSAGERIE */
        .message-icon {
            position: relative;
            cursor: pointer;
            margin-right: 5px;
        }
        
        .message-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ef4444;
            color: white;
            font-size: 8px;
            font-weight: bold;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .messages-container {
            max-height: 400px;
            overflow-y: auto;
            padding: 10px;
        }
        
        .message-item {
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 10px;
            border-left: 4px solid var(--latyfa-gold);
            background: #f9fafb;
        }
        
        .message-item.unread {
            background: #fef3c7;
            border-left-color: #ef4444;
        }
        
        .message-date {
            font-size: 8px;
            color: #9ca3af;
            margin-top: 5px;
        }
        
        /* ADMIN MENU */
        .admin-menu {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 30px;
            padding: 10px;
            background: #f3f4f6;
            border-radius: 50px;
        }
        
        .admin-menu-item {
            flex: 1;
            min-width: 80px;
            text-align: center;
            padding: 12px 5px;
            border-radius: 40px;
            font-size: 10px;
            font-weight: 900;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #6b7280;
        }
        
        .admin-menu-item i {
            display: block;
            font-size: 16px;
            margin-bottom: 5px;
        }
        
        .admin-menu-item:hover {
            background: #e5e7eb;
            color: #374151;
        }
        
        .admin-menu-item.active {
            background: var(--latyfa-gold);
            color: white;
        }
        
        .admin-section {
            display: none;
            animation: fadeIn 0.3s ease;
        }
        
        .admin-section.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .stat-card {
            background: white;
            border-radius: 20px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1);
        }
        
        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            font-size: 20px;
        }
        
        .backup-option {
            border: 2px dashed #e5e7eb;
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .backup-option:hover {
            border-color: var(--latyfa-gold);
            background: #fef3c7;
        }
        
        .maintenance-toggle {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 15px;
            background: #f3f4f6;
            border-radius: 12px;
            margin-bottom: 20px;
        }
        
        .maintenance-toggle button {
            flex: 1;
            padding: 10px;
            border-radius: 8px;
            font-weight: 900;
            font-size: 10px;
            text-transform: uppercase;
            transition: all 0.3s ease;
        }
        
        .maintenance-toggle button.active {
            background: var(--latyfa-gold);
            color: white;
        }
        
        .maintenance-toggle button.inactive {
            background: #9ca3af;
            color: white;
            opacity: 0.5;
        }
        
        /* CHAT WIDGET */
        .chat-widget {
            position: fixed;
            bottom: 100px;
            right: 90px;
            z-index: 1000;
        }
        
        .chat-button {
            width: 60px;
            height: 60px;
            background: var(--latyfa-gold);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(197,160,89,0.4);
            transition: all 0.3s ease;
            position: relative;
        }
        
        .chat-button:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(197,160,89,0.6);
        }
        
        .chat-button i {
            color: white;
            font-size: 24px;
        }
        
        .chat-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ef4444;
            color: white;
            font-size: 10px;
            font-weight: bold;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .chat-window {
            position: absolute;
            bottom: 80px;
            right: 0;
            width: 320px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            overflow: hidden;
            display: none;
            animation: slideUp 0.3s ease;
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .chat-window.active {
            display: block;
        }
        
        .chat-header {
            background: var(--latyfa-gold);
            color: white;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .chat-header h3 {
            font-weight: 900;
            font-size: 14px;
            text-transform: uppercase;
        }
        
        .chat-header button {
            color: white;
            font-size: 20px;
            line-height: 1;
        }
        
        .chat-messages {
            height: 300px;
            overflow-y: auto;
            padding: 15px;
            background: #f9fafb;
        }
        
        .chat-message {
            margin-bottom: 15px;
            display: flex;
            flex-direction: column;
        }
        
        .chat-message.support {
            align-items: flex-start;
        }
        
        .chat-message.user {
            align-items: flex-end;
        }
        
        .message-bubble {
            max-width: 80%;
            padding: 10px 15px;
            border-radius: 18px;
            font-size: 11px;
            line-height: 1.4;
        }
        
        .chat-message.support .message-bubble {
            background: white;
            border: 1px solid #e5e7eb;
            color: #1f2937;
        }
        
        .chat-message.user .message-bubble {
            background: var(--latyfa-gold);
            color: white;
        }
        
        .message-time {
            font-size: 8px;
            color: #9ca3af;
            margin-top: 3px;
        }
        
        .chat-footer {
            padding: 15px;
            background: white;
            border-top: 1px solid #e5e7eb;
            display: flex;
            gap: 10px;
        }
        
        .chat-footer input {
            flex: 1;
            border: 1px solid #e5e7eb;
            border-radius: 25px;
            padding: 10px 15px;
            font-size: 11px;
            outline: none;
        }
        
        .chat-footer input:focus {
            border-color: var(--latyfa-gold);
        }
        
        .chat-footer button {
            width: 40px;
            height: 40px;
            background: var(--latyfa-gold);
            border: none;
            border-radius: 50%;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .chat-footer button:hover {
            transform: scale(1.1);
        }
        
        /* QR CODE MODAL */
        .qr-container {
            text-align: center;
            padding: 20px;
        }
        
        .qr-image {
            width: 200px;
            height: 200px;
            margin: 20px auto;
            border: 2px solid var(--latyfa-gold);
            border-radius: 20px;
            padding: 10px;
        }
        
        .qr-amount {
            font-size: 24px;
            font-weight: 900;
            color: var(--latyfa-gold);
            margin: 10px 0;
        }
        
        .social-login-buttons {
            display: flex;
            gap: 10px;
            margin: 20px 0;
        }
        
        .social-login-btn {
            flex: 1;
            padding: 12px;
            border-radius: 30px;
            font-size: 11px;
            font-weight: 900;
            text-transform: uppercase;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
        }
        
        .social-login-btn.facebook {
            background: #1877f2;
            color: white;
        }
        
        .social-login-btn.google {
            background: #ffffff;
            color: #757575;
            border: 1px solid #dadce0;
        }
        
        .social-login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        
        .social-login-btn i {
            font-size: 14px;
        }
        
        /* PARRAINAGE */
        .parrainage-card {
            background: linear-gradient(135deg, #c5a059, #e2c286);
            border-radius: 20px;
            padding: 20px;
            color: white;
            margin-bottom: 20px;
        }
        
        .palier-item {
            background: white;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 10px;
        }
        
        .progress-bar {
            height: 6px;
            background: #e5e7eb;
            border-radius: 3px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--latyfa-gold);
            transition: width 0.3s ease;
        }
        
        /* SUIVI LIVRAISON */
        .tracking-step {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .step-indicator {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            font-size: 12px;
            margin-right: 15px;
        }
        
        .step-indicator.completed {
            background: #10b981;
            color: white;
        }
        
        .step-indicator.current {
            background: var(--latyfa-gold);
            color: white;
            animation: pulse 2s infinite;
        }
        
        .step-indicator.pending {
            background: #e5e7eb;
            color: #9ca3af;
        }
        
        .simulated-map {
            height: 200px;
            background: #f0f0f0;
            border-radius: 20px;
            position: relative;
            overflow: hidden;
            margin-bottom: 20px;
        }
        
        .map-grid {
            position: absolute;
            width: 200%;
            height: 200%;
            background: repeating-linear-gradient(0deg, #ddd, #ddd 1px, transparent 1px, transparent 20px),
                        repeating-linear-gradient(90deg, #ddd, #ddd 1px, transparent 1px, transparent 20px);
            animation: moveMap 30s linear infinite;
        }
        
        @keyframes moveMap {
            from { transform: translate(0, 0); }
            to { transform: translate(20px, 20px); }
        }
        
        .map-marker {
            position: absolute;
            width: 40px;
            height: 40px;
            background: var(--latyfa-gold);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            animation: bounce 2s infinite;
            z-index: 10;
        }
        
        .map-destination {
            position: absolute;
            width: 30px;
            height: 30px;
            background: #ef4444;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }
        
        .wheel-mask { 
            display: none; 
            position: fixed; 
            inset: 0; 
            background: rgba(0,0,0,0.9); 
            z-index: 2000; 
            align-items: center; 
            justify-content: center; 
            backdrop-filter: blur(8px); 
        }
        
        .wheel-mask.active { 
            display: flex; 
        }
        
        .wheel-box { 
            background: white; 
            padding: 30px; 
            border-radius: 30px; 
            text-align: center; 
            position: relative; 
            width: 95%; 
            max-width: 400px; 
            border: 5px solid var(--latyfa-gold); 
            animation: wheelPop 0.5s ease;
        }
        
        @keyframes wheelPop {
            0% { transform: scale(0.5); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        #canvas { 
            width: 280px; 
            height: 280px; 
            transition: transform 4s cubic-bezier(0.15, 0, 0.15, 1); 
            margin: 20px auto; 
            border-radius: 50%;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        @keyframes loading {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .loader-hidden {
            opacity: 0;
            pointer-events: none;
            visibility: hidden;
        }
        
        @keyframes marquee {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }
        
        .animate-marquee {
            display: inline-block;
            padding-left: 100%;
            animation: marquee 25s linear infinite;
            white-space: nowrap;
        }
        
        .animate-marquee:hover {
            animation-play-state: paused;
        }
        
        @keyframes slide {
            0% { transform: translateX(0); }
            100% { transform: translateX(-100%); }
        }
        
        .animate-slide {
            animation: slide 30s linear infinite;
        }
        
        .animate-slide:hover {
            animation-play-state: paused;
        }
        
        .no-scrollbar::-webkit-scrollbar { 
            display: none; 
        }
        
        .thumb-active {
            border: 2px solid var(--latyfa-gold) !important;
            transform: scale(1.05);
            box-shadow: 0 4px 10px rgba(197,160,89,0.3);
        }
        
        .badge-nouveau {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--latyfa-gold);
            color: white;
            font-size: 8px;
            font-weight: 900;
            padding: 4px 8px;
            border-radius: 20px;
            z-index: 10;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .badge-luxe {
            position: absolute;
            top: 10px;
            left: 10px;
            background: black;
            color: white;
            font-size: 8px;
            padding: 4px 8px;
            border-radius: 20px;
            z-index: 10;
        }
        
        .badge-soldout {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-15deg);
            background: #dc2626;
            color: white;
            font-size: 12px;
            font-weight: 900;
            padding: 8px 16px;
            border-radius: 30px;
            z-index: 20;
            border: 2px solid white;
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.3);
            white-space: nowrap;
        }
        
        body.dark-theme {
            background-color: #121212 !important;
            color: #e0e0e0;
        }
        
        .dark-theme header, 
        .dark-theme aside, 
        .dark-theme .product-card,
        .dark-theme .modal-content,
        .dark-theme footer {
            background-color: #1e1e1e !important;
            border-color: #333 !important;
        }
        
        .dark-theme .text-gray-800,
        .dark-theme .text-gray-600 {
            color: #e0e0e0 !important;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--latyfa-gold), #e2c286);
            color: white;
            font-weight: 900;
            padding: 16px 24px;
            border-radius: 30px;
            text-transform: uppercase;
            font-size: 12px;
            letter-spacing: 1px;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 20px -5px rgba(197,160,89,0.4);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 25px -5px rgba(197,160,89,0.6);
        }
        
        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .toast {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.9);
            color: var(--latyfa-gold);
            padding: 12px 24px;
            border-radius: 50px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 2px;
            z-index: 2000;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
            white-space: nowrap;
        }
        
        .toast.show {
            opacity: 1;
        }
        
        .miniature-item {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 8px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.2s ease;
        }
        
        .miniature-item:hover {
            transform: scale(1.1);
        }
        
        .social-proof {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: white;
            box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1);
            border-radius: 12px;
            padding: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
            border-left: 4px solid var(--latyfa-gold);
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.5s ease;
            z-index: 100;
            max-width: 280px;
        }
        
        .social-proof.show {
            transform: translateY(0);
            opacity: 1;
        }
        
        .admin-btn {
            position: fixed;
            bottom: 10px;
            left: 10px;
            width: 40px;
            height: 40px;
            background: transparent;
            border: none;
            cursor: pointer;
            opacity: 0.1;
            transition: opacity 0.3s ease;
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            color: #999;
        }
        
        .admin-btn:hover {
            opacity: 0.5;
        }
        
        .cart-count-pop {
            animation: counterPop 0.3s ease;
        }
        
        @keyframes counterPop {
            0% { transform: scale(1); }
            50% { transform: scale(1.3); }
            100% { transform: scale(1); }
        }
        
        .stock-alert {
            position: absolute;
            top: 40px;
            right: 10px;
            background: #dc2626;
            color: white;
            font-size: 8px;
            font-weight: 900;
            padding: 4px 8px;
            border-radius: 20px;
            z-index: 10;
            animation: bounce 1s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .back-to-top {
            position: fixed;
            bottom: 100px;
            right: 20px;
            width: 50px;
            height: 50px;
            background: var(--latyfa-gold);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 50;
            box-shadow: 0 4px 15px rgba(197, 160, 89, 0.3);
            border: 2px solid white;
        }
        
        .back-to-top.show {
            opacity: 1;
            visibility: visible;
        }
        
        .back-to-top:hover {
            transform: translateY(-5px);
            background: #b38d4a;
            box-shadow: 0 8px 25px rgba(197, 160, 89, 0.5);
        }
        
        .back-to-top i {
            font-size: 20px;
            animation: bounceUp 2s infinite;
        }
        
        @keyframes bounceUp {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        .whatsapp-widget {
            position: fixed;
            bottom: 170px;
            left: 20px;
            z-index: 50;
        }
        
        .whatsapp-widget .tooltip {
            position: absolute;
            bottom: 100%;
            left: 0;
            margin-bottom: 10px;
            background: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 10px;
            font-weight: bold;
            white-space: nowrap;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .whatsapp-widget:hover .tooltip {
            opacity: 1;
            visibility: visible;
        }
        
        .whatsapp-widget a {
            display: flex;
            width: 60px;
            height: 60px;
            background: #25D366;
            border-radius: 50%;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 30px;
            box-shadow: 0 4px 15px rgba(37, 211, 102, 0.4);
            transition: all 0.3s ease;
        }
        
        .whatsapp-widget a:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(37, 211, 102, 0.6);
        }
        
        .comparateur-btn {
            position: fixed;
            bottom: 240px;
            right: 20px;
            z-index: 45;
        }
        
        .comparateur-btn button {
            width: 50px;
            height: 50px;
            background: #3b82f6;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
            transition: all 0.3s ease;
            position: relative;
        }
        
        .comparateur-btn button:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.6);
        }
        
        .comparateur-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ef4444;
            color: white;
            font-size: 10px;
            font-weight: bold;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .flash-sale {
            background: linear-gradient(135deg, #ef4444, #ec4899);
            color: white;
            padding: 8px;
            text-align: center;
            font-size: 10px;
            font-weight: 900;
            text-transform: uppercase;
            animation: pulseFlash 2s infinite;
        }
        
        @keyframes pulseFlash {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }
        
        .payment-option {
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .payment-option.selected {
            border-color: var(--latyfa-gold);
            background: #fef3c7;
            transform: scale(1.02);
        }
        
        .payment-option img {
            height: 30px;
            object-fit: contain;
            margin-bottom: 5px;
        }
        
        .review-card {
            background: #f9fafb;
            border-radius: 12px;
            padding: 16px;
            transition: all 0.3s ease;
        }
        
        .review-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .favorite-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 30px;
            height: 30px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 15;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        
        .favorite-btn.active {
            background: #ef4444;
            color: white;
        }
        
        .favorite-btn:hover {
            transform: scale(1.1);
        }
        
        .ar-button {
            background: #8b5cf6;
            color: white;
            padding: 12px 20px;
            border-radius: 30px;
            font-size: 10px;
            font-weight: 900;
            text-transform: uppercase;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
        }
        
        .ar-button:hover {
            background: #7c3aed;
            transform: scale(1.05);
        }
        
        .advent-calendar {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 8px;
            padding: 16px;
            background: linear-gradient(135deg, #c5a059, #e2c286);
            border-radius: 20px;
        }
        
        .advent-day {
            aspect-ratio: 1;
            background: white;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 10px;
            font-weight: 900;
            text-transform: uppercase;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .advent-day:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .advent-day.opened {
            background: #ef4444;
            color: white;
        }
        
        .loyalty-card {
            background: linear-gradient(135deg, #c5a059, #e2c286);
            border-radius: 20px;
            padding: 20px;
            color: white;
            position: relative;
            overflow: hidden;
        }
        
        .loyalty-points {
            font-size: 40px;
            font-weight: 900;
            line-height: 1;
        }
        /* ==================== ANIMATION LOGO EFFET VAGUE ==================== */
@keyframes gentleWave {
    0% {
        transform: translateY(0);
        text-shadow: 0 2px 5px rgba(197, 160, 89, 0.2);
    }
    25% {
        transform: translateY(-4px);
        text-shadow: 0 6px 12px rgba(197, 160, 89, 0.4);
    }
    50% {
        transform: translateY(0);
        text-shadow: 0 2px 5px rgba(197, 160, 89, 0.2);
    }
    75% {
        transform: translateY(4px);
        text-shadow: 0 -4px 8px rgba(197, 160, 89, 0.3);
    }
    100% {
        transform: translateY(0);
        text-shadow: 0 2px 5px rgba(197, 160, 89, 0.2);
    }
}

.logo-font {
    display: inline-block;
    animation: gentleWave 4s ease-in-out infinite;
    transform-origin: center;
}

/* Animation douce pour l'image */
header img {
    animation: gentleWave 4.5s ease-in-out infinite;
}
    </style>
    
    <audio id="wheel-sound" src="https://assets.mixkit.co/active_storage/sfx/483/483-preview.mp3" preload="auto"></audio>
    <audio id="cart-sound" src="https://assets.mixkit.co/active_storage/sfx/2013/2013-preview.mp3" preload="auto"></audio>
    <audio id="victory-sound" src="https://assets.mixkit.co/active_storage/sfx/1435/1435-preview.mp3" preload="auto"></audio>
</head>
<body>
<script>
// Forcer la v√©rification du mode maintenance au chargement
document.addEventListener('DOMContentLoaded', function() {
    setTimeout(checkMaintenance, 100);
});
</script>

<!-- OVERLAY MAINTENANCE -->
<div id="maintenanceOverlay" class="maintenance-overlay" style="display: none;">
    <div class="maintenance-spinner"></div>
    <div class="maintenance-icon">
        <i class="fa-solid fa-screwdriver-wrench"></i>
    </div>
    <h2 class="text-2xl font-black uppercase mb-4">Site en maintenance</h2>
    <p class="text-sm mb-8 opacity-80">Nous effectuons des am√©liorations pour mieux vous servir</p>
    <div class="text-[#c5a059] animate-pulse">‚è≥ Merci de votre patience ‚è≥</div>
</div>

<!-- LOADER -->
<div id="loader" class="fixed inset-0 bg-[#1a1a1a] z-[3000] flex flex-col items-center justify-center transition-opacity duration-700">
    <div class="relative">
        <img src="https://i.postimg.cc/qMqtFGM2/1770342273452.png" class="h-24 w-24 rounded-full border-2 border-[#c5a059] animate-pulse shadow-[0_0_20px_rgba(197,160,89,0.3)]">
        <div class="absolute inset-0 rounded-full border-4 border-transparent border-t-[#c5a059] animate-spin"></div>
    </div>
    <div class="mt-6 flex flex-col items-center">
        <span class="logo-font text-2xl text-[#c5a059] italic tracking-tighter">LATYFA SHOP</span>
        <div class="w-32 h-[1px] bg-gray-800 mt-3 relative overflow-hidden">
            <div class="absolute inset-0 bg-[#c5a059] animate-[loading_1.5s_ease-in-out_infinite]"></div>
        </div>
    </div>
</div>

<!-- TOAST NOTIFICATION -->
<div id="toast" class="toast">‚ú® Produit ajout√© au panier</div>

<!-- BANNIERE PROMO -->
<div class="bg-[#1a1a1a] text-[#c5a059] text-center py-2.5 text-[10px] font-bold border-b border-[#c5a059]/30 tracking-[0.15em] uppercase">
    <span data-i18n="promo_text">‚ú® Promo Exclusive -20% d√®s 20.000 F d'achat du 14 au 28 f√©v 2026:</span> <span id="countdown" class="text-white ml-1">--:--:--</span>
</div>

<!-- FLASH SALE -->
<div class="flash-sale" id="flashSale">
    <span data-i18n="flash_sale">‚ö° FLASH SALE : -30% SUR LES BIJOUX - FIN DANS</span> <span id="flashCountdown">02:00:00</span>
</div>

<!-- BANDE DEFILANTE -->
<div class="bg-white border-b border-gray-100 py-1 overflow-hidden whitespace-nowrap">
    <div class="inline-block animate-marquee text-[9px] font-bold uppercase tracking-[0.2em] text-gray-400" data-i18n="marquee">
        ‚ú® BON MOIS DE RAMADAN √Ä TOUS LES MUSULMANS ! ‚Äî üíé NOUVELLE COLLECTION DE BIJOUX DISPONIBLE ‚Äî üöö EXP√âDITION SOUS 48H DANS TOUTE LA C√îTE D'IVOIRE ‚Äî
    </div>
</div>

<!-- HEADER -->
<header class="bg-white shadow-sm sticky top-0 z-50">
    <div class="container mx-auto px-4 py-3 flex items-center justify-between gap-2">
        <div class="flex items-center gap-2 cursor-pointer" onclick="scrollToTop()">
            <img src="https://i.postimg.cc/qMqtFGM2/1770342273452.png" class="h-10 w-10 rounded-full border border-gray-200">
            <span class="text-xl md:text-2xl font-black italic logo-font tracking-tighter">LATYFA SHOP</span>
        </div>
        
        <div class="flex-1 max-w-md hidden md:block">
            <div class="relative">
                <input type="text" id="search-input" placeholder="Rechercher un article..." 
                       class="w-full bg-gray-100 border-none rounded-full py-2 px-10 text-xs focus:ring-2 focus:ring-[#c5a059] outline-none">
                <i class="fa-solid fa-magnifying-glass absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 text-xs"></i>
            </div>
        </div>
        
        <div class="flex gap-1 md:gap-3 items-center">
            <div id="messageIcon" class="message-icon" onclick="ouvrirMessages()" style="display: none;">
                <i class="fa-regular fa-envelope text-gray-600 text-xl hover:text-[#c5a059] transition"></i>
                <span id="messageBadge" class="message-badge">0</span>
            </div>
        
            <div class="user-menu" id="userMenu" style="display: none;">
                <div class="user-avatar" id="userAvatar">
                    <i class="fa-regular fa-user"></i>
                </div>
                <div class="user-dropdown">
                    <div class="user-dropdown-item" onclick="voirProfil()">
                        <i class="fa-regular fa-user"></i> Mon profil
                    </div>
                    <div class="user-dropdown-item" onclick="voirMessages()">
                        <i class="fa-regular fa-envelope"></i> Mes messages
                        <span id="messageCountDropdown" class="ml-auto text-[8px] bg-red-500 text-white rounded-full px-1.5">0</span>
                    </div>
                    <div class="user-dropdown-item" onclick="voirCommandes()">
                        <i class="fa-regular fa-clock"></i> Mes commandes
                    </div>
                    <div class="user-dropdown-item" onclick="voirFavoris()">
                        <i class="fa-regular fa-heart"></i> Mes favoris
                    </div>
                    <div class="user-dropdown-item" onclick="voirParrainage()">
                        <i class="fa-solid fa-handshake"></i> Parrainage
                    </div>
                    <div class="user-dropdown-item" onclick="deconnexion()">
                        <i class="fa-solid fa-right-from-bracket"></i> D√©connexion
                    </div>
                </div>
            </div>
            
            <!-- S√âLECTEUR DE LANGUE -->
            <div class="language-selector">
                <div class="language-btn" id="currentLanguageBtn" onclick="toggleLanguageDropdown()">
                    <i class="fa-solid fa-globe"></i>
                    <span id="currentLanguageText">FR</span>
                    <i class="fa-solid fa-chevron-down text-[8px]"></i>
                </div>
                <div class="language-dropdown" id="languageDropdown">
                    <div class="language-option active" onclick="changeLanguage('fr')" data-lang="fr">
                        <img src="https://flagcdn.com/w20/fr.png" alt="Fran√ßais">
                        <span>Fran√ßais</span>
                    </div>
                    <div class="language-option" onclick="changeLanguage('en')" data-lang="en">
                        <img src="https://flagcdn.com/w20/gb.png" alt="English">
                        <span>English</span>
                    </div>
                    <div class="language-option" onclick="changeLanguage('es')" data-lang="es">
                        <img src="https://flagcdn.com/w20/es.png" alt="Espa√±ol">
                        <span>Espa√±ol</span>
                    </div>
                </div>
            </div>
            
            <!-- √âl√©ments desktop -->
            <div class="desktop-items flex gap-1 md:gap-3 items-center">
                <button id="loginBtn" onclick="ouvrirAuthModal()" class="text-[10px] font-black uppercase border border-[#c5a059] px-3 py-2 rounded-full hover:bg-[#c5a059] hover:text-white transition whitespace-nowrap">
                    Se connecter
                </button>
                
                <div class="relative" onclick="toggleWishlistModal()">
                    <i class="fa-regular fa-heart text-gray-600 cursor-pointer hover:text-[#ff6600] text-xl"></i>
                    <span id="wishlist-count" class="absolute -top-2 -right-2 bg-[#ff6600] text-white text-[8px] rounded-full w-4 h-4 flex items-center justify-center">0</span>
                </div>
                
                <button onclick="toggleDarkMode()" class="h-8 w-8 rounded-full bg-gray-100 flex items-center justify-center text-gray-600 hover:bg-black hover:text-white transition-all" id="dark-mode-btn">
                    <i class="fa-solid fa-moon"></i>
                </button>
                
                <div onclick="ouvrirPanier()" class="text-center cursor-pointer relative hover:text-[#ff6600]">
                    <i class="fa-solid fa-cart-shopping text-gray-600"></i>
                    <span id="cart-count" class="absolute -top-2 -right-2 bg-[#ff6600] text-white text-[10px] rounded-full px-1.5 font-bold flex items-center justify-center min-w-[18px] h-[18px]">0</span>
                    <p class="text-[9px] font-bold uppercase hidden md:block" data-i18n="cart">Panier</p>
                </div>
            </div>
            
            <!-- Menu hamburger pour mobile -->
            <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
                <i class="fa-solid fa-bars"></i>
            </button>
        </div>
    </div>
    
    <!-- Menu mobile -->
    <div class="mobile-menu" id="mobileMenu">
        <div class="mobile-menu-item" onclick="toggleWishlistModal(); closeMobileMenu()">
            <i class="fa-regular fa-heart"></i>
            <span>Mes favoris</span>
            <span id="wishlist-count-mobile" class="ml-auto bg-[#ff6600] text-white text-[8px] rounded-full w-4 h-4 flex items-center justify-center">0</span>
        </div>
        <div class="mobile-menu-item" onclick="toggleDarkMode(); closeMobileMenu()">
            <i class="fa-solid fa-moon"></i>
            <span>Mode sombre</span>
        </div>
        <div class="mobile-menu-item" onclick="ouvrirAuthModal(); closeMobileMenu()">
            <i class="fa-regular fa-user"></i>
            <span data-i18n="login">Se connecter</span>
        </div>
    </div>
</header>

<!-- SECTION CAT√âGORIES HORIZONTALES STATIQUES -->
<div class="categories-static" id="categories-static">
    <!-- Les cat√©gories seront inject√©es ici par JavaScript -->
</div>

<!-- ==================== CHAT WIDGET AVEC IA ==================== -->
<div class="chat-widget">
    <div class="chat-button" onclick="toggleChat()">
        <i class="fa-regular fa-comment-dots"></i>
        <span class="chat-badge" id="chatBadge">1</span>
    </div>
    
    <div class="chat-window" id="chatWindow">
        <div class="chat-header">
            <h3>üí¨ Chat Latyfa</h3>
            <div class="flex gap-1">
                <button onclick="toggleIAMode()" class="text-[8px] bg-white text-black px-2 py-1 rounded">
                    <span id="iaMode">ü§ñ IA OFF</span>
                </button>
                <button onclick="toggleChat()">√ó</button>
            </div>
        </div>
        
        <div class="chat-messages" id="chatMessages">
            <div class="chat-message support">
                <div class="message-bubble">
                    Bonjour ! üëã Comment puis-je vous aider aujourd'hui ?
                </div>
                <div class="message-time">√† l'instant</div>
            </div>
        </div>
        
        <div class="chat-footer">
            <input type="text" id="chatInput" placeholder="Votre message..." onkeypress="if(event.key === 'Enter') sendChatMessage()">
            <button onclick="sendChatMessage()">
                <i class="fa-regular fa-paper-plane"></i>
            </button>
        </div>
    </div>
</div>

<!-- ==================== MODALE QR CODE ==================== -->
<div id="qrModal" class="modal">
    <div class="modal-content">
        <div class="flex justify-between items-center mb-4">
            <h2 class="text-xl font-black uppercase italic text-[#c5a059]">üì± Paiement Mobile</h2>
            <button onclick="fermerQR()" class="text-2xl text-gray-400 hover:text-black transition-colors">&times;</button>
        </div>
        
        <div class="qr-container">
            <div class="qr-image" id="qrImageContainer">
                <img id="qrImage" src="" alt="QR Code" class="w-full h-full object-contain">
            </div>
            
            <div class="qr-amount" id="qrMontant">0 F</div>
            
            <p class="text-[10px] text-gray-500 mb-4">Scannez ce code avec votre application mobile</p>
            
            <div class="flex gap-2 justify-center">
                <img src="https://goamobile.com/logosent/wave@221@-P-2021-06-30_00-18-27wave_logo_2.png" class="h-6" alt="Wave">
                <img src="https://www.pigroup360.com/wp-content/uploads/2020/09/orange-money-logo.png" class="h-6" alt="Orange Money">
                <img src="https://www.pigroup360.com/wp-content/uploads/2020/09/mtn-mobile-money-logo.jpg" class="h-6" alt="MTN">
            </div>
            
            <button onclick="fermerQR()" class="btn-primary w-full mt-4 text-[10px] py-3">
                J'AI EFFECTU√â LE PAIEMENT
            </button>
        </div>
    </div>
</div>

<!-- ==================== MODALE SUIVI LIVRAISON ==================== -->
<div id="suiviModal" class="modal">
    <div class="modal-content max-w-2xl">
        <div class="flex justify-between items-center mb-4">
            <h2 class="text-xl font-black uppercase italic text-[#c5a059]">üöö Suivi de commande</h2>
            <button onclick="fermerSuivi()" class="text-2xl text-gray-400 hover:text-black transition-colors">&times;</button>
        </div>
        
        <!-- Barre de progression -->
        <div class="flex justify-between mb-6 text-[8px] font-black">
            <div class="text-center">
                <div class="step-indicator completed" id="step1">1</div>
                <span>Pr√©paration</span>
            </div>
            <div class="flex-1 h-1 bg-gray-200 mt-4"></div>
            <div class="text-center">
                <div class="step-indicator current" id="step2">2</div>
                <span>Prise en charge</span>
            </div>
            <div class="flex-1 h-1 bg-gray-200 mt-4"></div>
            <div class="text-center">
                <div class="step-indicator pending" id="step3">3</div>
                <span>En route</span>
            </div>
            <div class="flex-1 h-1 bg-gray-200 mt-4"></div>
            <div class="text-center">
                <div class="step-indicator pending" id="step4">4</div>
                <span>Arriv√©e</span>
            </div>
            <div class="flex-1 h-1 bg-gray-200 mt-4"></div>
            <div class="text-center">
                <div class="step-indicator pending" id="step5">5</div>
                <span>Livr√©</span>
            </div>
        </div>
        
        <!-- Carte simul√©e -->
        <div class="simulated-map">
            <div class="map-grid"></div>
            <div class="map-marker" id="livreurMarker" style="top: 40%; left: 30%;">
                <i class="fa-solid fa-truck"></i>
            </div>
            <div class="map-destination" style="top: 60%; left: 70%;">
                <i class="fa-solid fa-flag"></i>
            </div>
        </div>
        
        <!-- Infos livreur -->
        <div class="bg-gray-50 p-4 rounded-xl mb-4">
            <div class="flex items-center gap-3">
                <div class="w-12 h-12 bg-[#c5a059] rounded-full flex items-center justify-center text-white">
                    <i class="fa-solid fa-user"></i>
                </div>
                <div>
                    <p class="text-[10px] font-bold" id="livreurNom">Votre livreur: Kouassi Jean</p>
                    <p class="text-[8px] text-gray-500" id="tempsEstime">üöö D√©lai estim√©: 20-30 min</p>
                    <p class="text-[8px] text-gray-400 mt-1" id="positionActuelle">Position: D√©part d√©p√¥t</p>
                </div>
            </div>
        </div>
        
        <!-- Bouton actualiser -->
        <button onclick="actualiserSuivi()" class="w-full bg-gray-100 py-3 rounded-lg text-[10px] font-black uppercase hover:bg-gray-200 transition">
            <i class="fa-solid fa-rotate mr-2"></i> ACTUALISER LE SUIVI
        </button>
    </div>
</div>

<!-- MODALE AUTHENTIFICATION (AVEC BOUTONS SOCIAUX) -->
<div id="authModal" class="modal">
    <div class="modal-content max-w-md">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-xl font-black uppercase italic text-[#c5a059]">Compte client</h2>
            <button onclick="fermerAuthModal()" class="text-2xl text-gray-400 hover:text-black transition-colors">&times;</button>
        </div>
        
        <!-- BOUTONS CONNEXION R√âSEAUX SOCIAUX -->
        <div class="social-login-buttons">
            <button onclick="loginWithFacebook()" class="social-login-btn facebook">
                <i class="fa-brands fa-facebook-f"></i> Facebook
            </button>
            <button onclick="loginWithGoogle()" class="social-login-btn google">
                <i class="fa-brands fa-google"></i> Google
            </button>
        </div>
        
        <div class="relative my-6">
            <div class="absolute inset-0 flex items-center">
                <div class="w-full border-t border-gray-300"></div>
            </div>
            <div class="relative flex justify-center text-sm">
                <span class="px-2 bg-white text-gray-500 text-[9px]">OU</span>
            </div>
        </div>
        
        <div class="flex border-b mb-6">
            <div class="auth-tab active" onclick="switchAuthTab('login')" id="loginTab">Connexion</div>
            <div class="auth-tab" onclick="switchAuthTab('register')" id="registerTab">Inscription</div>
        </div>
        
        <div id="loginForm" class="auth-form">
            <input type="email" id="loginEmail" placeholder="Email" class="auth-input">
            <input type="password" id="loginPassword" placeholder="Mot de passe" class="auth-input">
            <button onclick="connexion()" class="btn-primary w-full">SE CONNECTER</button>
            <p class="text-[8px] text-center mt-4 text-gray-400">Mot de passe oubli√© ? Contactez-nous sur WhatsApp</p>
        </div>
        
        <div id="registerForm" class="auth-form" style="display: none;">
            <input type="text" id="registerNom" placeholder="Nom complet" class="auth-input">
            <input type="email" id="registerEmail" placeholder="Email" class="auth-input">
            <input type="tel" id="registerTel" placeholder="T√©l√©phone WhatsApp" class="auth-input">
            <input type="password" id="registerPassword" placeholder="Mot de passe" class="auth-input">
            <input type="password" id="registerConfirm" placeholder="Confirmer mot de passe" class="auth-input">
            <div class="flex items-start gap-2 mb-4">
                <input type="checkbox" id="registerAccept" class="mt-1">
                <label for="registerAccept" class="text-[8px] text-gray-500">J'accepte les conditions g√©n√©rales de vente</label>
            </div>
            <button onclick="inscription()" class="btn-primary w-full">S'INSCRIRE</button>
        </div>
    </div>
</div>

<!-- MODALE PARRAINAGE -->
<div id="parrainageModal" class="modal">
    <div class="modal-content">
        <div class="flex justify-between items-center mb-4">
            <h2 class="text-xl font-black uppercase italic text-[#c5a059]">ü§ù Programme de parrainage</h2>
            <button onclick="fermerParrainage()" class="text-2xl text-gray-400 hover:text-black transition-colors">&times;</button>
        </div>
        
        <div class="parrainage-card">
            <p class="text-[10px] mb-4">Parrainez vos amis et gagnez des r√©compenses !</p>
            
            <!-- Stats -->
            <div class="grid grid-cols-3 gap-2 mb-4">
                <div class="bg-white/20 p-2 rounded-lg text-center">
                    <span class="text-lg font-black" id="nbFilleuls">0</span>
                    <span class="text-[8px] block">Filleuls</span>
                </div>
                <div class="bg-white/20 p-2 rounded-lg text-center">
                    <span class="text-lg font-black" id="gainTotal">0 F</span>
                    <span class="text-[8px] block">Gagn√©</span>
                </div>
                <div class="bg-white/20 p-2 rounded-lg text-center">
                    <span class="text-lg font-black" id="prochainPalier">1</span>
                    <span class="text-[8px] block">Prochain</span>
                </div>
            </div>
            
            <!-- Lien de parrainage -->
            <div class="bg-white p-3 rounded-xl mb-3">
                <p class="text-[8px] text-gray-400 mb-1">Votre lien personnel</p>
                <div class="flex gap-2">
                    <input type="text" id="lienParrainage" readonly class="flex-1 bg-gray-50 text-gray-800 text-[9px] p-2 rounded-lg">
                    <button onclick="copierLien()" class="bg-black text-white px-3 py-2 rounded-lg text-[8px] font-black">
                        COPIER
                    </button>
                </div>
            </div>
            
            <!-- Boutons de partage -->
            <div class="flex gap-2 mb-4">
                <button onclick="partagerWhatsApp()" class="flex-1 bg-green-500 text-white py-2 rounded-lg text-[8px] font-black">
                    <i class="fa-brands fa-whatsapp mr-1"></i> WhatsApp
                </button>
                <button onclick="partagerFacebook()" class="flex-1 bg-blue-600 text-white py-2 rounded-lg text-[8px] font-black">
                    <i class="fa-brands fa-facebook-f mr-1"></i> Facebook
                </button>
                <button onclick="genererQRParrainage()" class="flex-1 bg-gray-800 text-white py-2 rounded-lg text-[8px] font-black">
                    <i class="fa-solid fa-qrcode mr-1"></i> QR Code
                </button>
            </div>
        </div>
        
        <!-- Paliers -->
        <h4 class="text-[10px] font-black uppercase mb-3">üèÜ Paliers de r√©compenses</h4>
        <div class="space-y-3 mb-4">
            <div class="palier-item">
                <div class="flex justify-between text-[8px] mb-1">
                    <span>1 filleul</span>
                    <span class="font-black text-[#c5a059]">1.000 F</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress1" style="width: 0%"></div>
                </div>
            </div>
            <div class="palier-item">
                <div class="flex justify-between text-[8px] mb-1">
                    <span>5 filleuls</span>
                    <span class="font-black text-[#c5a059]">10.000 F</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress5" style="width: 0%"></div>
                </div>
            </div>
            <div class="palier-item">
                <div class="flex justify-between text-[8px] mb-1">
                    <span>10 filleuls</span>
                    <span class="font-black text-[#c5a059]">25.000 F</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress10" style="width: 0%"></div>
                </div>
            </div>
            <div class="palier-item">
                <div class="flex justify-between text-[8px] mb-1">
                    <span>20 filleuls</span>
                    <span class="font-black text-[#c5a059]">VIP √† vie</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress20" style="width: 0%"></div>
                </div>
            </div>
        </div>
        
        <!-- Liste des filleuls -->
        <h4 class="text-[10px] font-black uppercase mb-2">üë• Mes filleuls</h4>
        <div id="listeFilleuls" class="space-y-2 max-h-40 overflow-y-auto"></div>
    </div>
</div>

<!-- MODALE MESSAGERIE CLIENT -->
<div id="messagesModal" class="modal">
    <div class="modal-content max-w-2xl">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-xl font-black uppercase italic text-[#c5a059]">
                <i class="fa-regular fa-envelope mr-2"></i> Mes messages
            </h2>
            <button onclick="fermerMessages()" class="text-2xl text-gray-400 hover:text-black transition-colors">&times;</button>
        </div>
        
        <div id="messagesList" class="messages-container">
            <!-- Les messages appara√Ætront ici -->
        </div>
        
        <div class="border-t pt-4 mt-4">
            <p class="text-[8px] text-gray-400 text-center">
                Les messages importants de Latyfa Shop apparaissent ici
            </p>
        </div>
    </div>
</div>

<!-- MODALE PROFIL CLIENT -->
<div id="profilModal" class="modal">
    <div class="modal-content">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-xl font-black uppercase italic text-[#c5a059]">Mon profil</h2>
            <button onclick="fermerProfil()" class="text-2xl text-gray-400 hover:text-black transition-colors">&times;</button>
        </div>
        
        <div class="space-y-4" id="profilInfo"></div>
        
        <div class="border-t pt-4 mt-4">
            <h3 class="text-[10px] font-black uppercase mb-3">Modifier mes informations</h3>
            <input type="text" id="editNom" placeholder="Nom" class="auth-input">
            <input type="email" id="editEmail" placeholder="Email" class="auth-input">
            <input type="tel" id="editTel" placeholder="T√©l√©phone" class="auth-input">
            <button onclick="modifierProfil()" class="btn-primary w-full text-[10px] py-3">ENREGISTRER</button>
        </div>
        
        <button onclick="deconnexion()" class="w-full mt-4 text-red-500 text-[10px] font-bold uppercase border border-red-200 py-3 rounded-lg hover:bg-red-50 transition">
            <i class="fa-solid fa-right-from-bracket mr-2"></i> SE D√âCONNECTER
        </button>
    </div>
</div>

<!-- MODALE MES COMMANDES -->
<div id="commandesModal" class="modal">
    <div class="modal-content">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-xl font-black uppercase italic text-[#c5a059]">Mes commandes</h2>
            <button onclick="fermerCommandes()" class="text-2xl text-gray-400 hover:text-black transition-colors">&times;</button>
        </div>
        <div id="commandesList" class="space-y-3 max-h-[60vh] overflow-y-auto"></div>
    </div>
</div>

<!-- SECTION HERO -->
<section class="relative w-full h-[350px] md:h-[500px] bg-black overflow-hidden">
    <img src="https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=1200" class="w-full h-full object-cover opacity-70">
    <div class="absolute inset-0 flex flex-col items-center justify-center text-center px-6">
        <h1 class="text-white text-4xl md:text-6xl font-black italic uppercase tracking-tighter leading-none" data-i18n="hero_title">La Boutique du 225</h1>
        <p class="text-orange-400 font-bold mt-3 uppercase text-xs md:text-sm tracking-[0.2em]" data-i18n="hero_subtitle">Bijoux, v√™tements, parfum...</p>
        <a href="#collection" class="mt-8 bg-[#ff6600] text-white px-10 py-4 rounded-full font-black text-xs uppercase hover:scale-105 transition shadow-lg" data-i18n="hero_btn">D√©couvrir la Collection</a>
    </div>
</section>

<!-- SECTION PRINCIPALE PRODUITS -->
<div id="collection" class="container mx-auto px-4 py-8">
    <div class="flex flex-col md:flex-row gap-8">
        <!-- Points fid√©lit√© (√† gauche) -->
        <aside class="w-full md:w-64 order-2 md:order-1">
            <div class="loyalty-card sticky top-24">
                <div class="relative z-10">
                    <p class="text-[8px] font-black uppercase opacity-80" data-i18n="your_points">Vos points</p>
                    <div class="loyalty-points" id="loyalty-points">0</div>
                    <div class="w-full bg-white/30 h-2 rounded-full mt-2 overflow-hidden">
                        <div class="bg-white h-full" id="loyalty-progress" style="width: 0%"></div>
                    </div>
                    <p class="text-[8px] font-black uppercase mt-2 opacity-80" data-i18n="next_level">Prochain palier: 100 pts = -10%</p>
                </div>
            </div>
        </aside>
        
        <main class="flex-1 order-1 md:order-2">
            <div class="mb-8">
                <h3 class="text-[10px] font-black uppercase mb-4 flex items-center gap-2">
                    <i class="fa-solid fa-fire text-[#ff6600]"></i>
                    <span data-i18n="popular_products">PRODUITS POPULAIRES</span>
                </h3>
                <div class="relative overflow-hidden">
                    <div class="flex gap-4 animate-slide" id="popular-products">
                        <!-- Les produits populaires seront inject√©s ici -->
                    </div>
                </div>
            </div>
            
            <div class="grid grid-cols-2 lg:grid-cols-3 gap-6" id="product-grid"></div>
        </main>
    </div>
</div>

<!-- WIDGET WHATSAPP -->
<div class="whatsapp-widget">
    <div class="tooltip">Besoin d'aide ?</div>
    <a href="https://wa.me/2250709002881?text=Bonjour%2C%20j%27ai%20une%20question%20sur%20Latyfa%20Shop..." target="_blank">
        <i class="fa-brands fa-whatsapp"></i>
    </a>
</div>

<!-- BOUTON COMPARATEUR -->
<div class="comparateur-btn">
    <button onclick="ouvrirComparateur()">
        <i class="fa-solid fa-scale-balanced"></i>
        <span class="comparateur-badge" id="comparateur-count">0</span>
    </button>
</div>

<!-- BOUTON ROUE DE LA FORTUNE -->
<button onclick="ouvrirRoue()" class="fixed bottom-24 right-6 h-14 w-14 bg-black text-white rounded-full shadow-2xl z-40 animate-bounce flex items-center justify-center border-2 border-[#c5a059] hover:scale-110 transition-transform">
    <i class="fa-solid fa-gift text-[#c5a059] text-2xl"></i>
</button>

<!-- BOUTON RETOUR EN HAUT -->
<div id="backToTop" class="back-to-top" onclick="scrollToTop()">
    <i class="fa-solid fa-arrow-up"></i>
</div>

<!-- MODALE ROUE DE LA FORTUNE -->
<div class="wheel-mask" id="wheelModal">
    <div class="wheel-box">
        <button onclick="fermerRoue()" class="absolute top-4 right-4 text-gray-900 font-black text-xl hover:text-[#c5a059] transition-colors">√ó</button>
        <h3 class="logo-font text-xl font-black italic uppercase text-gray-800">LATYFA LUCKY WHEEL</h3>
        <p id="wheel-msg" class="text-[11px] font-black uppercase mt-2 text-blue-600"></p>
        <p id="wheel-countdown" class="text-[10px] font-black uppercase mt-1 text-red-500"></p>
        <div class="relative">
            <canvas id="canvas" width="300" height="300"></canvas>
            <div class="absolute top-0 left-1/2 -translate-x-1/2 -mt-4 text-3xl text-[#c5a059] drop-shadow-lg">‚ñº</div>
        </div>
        <button id="spin" class="btn-primary w-full mt-4">TENTER MA CHANCE</button>
    </div>
</div>

<!-- MODALE DETAIL PRODUIT -->
<div id="productDetailModal" class="modal">
    <div class="modal-content max-w-4xl">
        <div class="flex justify-between items-center mb-4">
            <h2 class="text-xl font-black uppercase italic text-[#c5a059]">D√©tail du produit</h2>
            <button onclick="fermerDetail()" class="text-2xl text-gray-400 hover:text-black transition-colors">&times;</button>
        </div>
        
        <div class="flex flex-col md:flex-row gap-8">
            <div class="md:w-1/2">
                <div id="media-container" class="relative">
                    <img id="main-detail-img" src="" class="w-full h-80 object-cover rounded-xl shadow-md border">
                </div>
                <div id="thumbnails" class="flex gap-2 mt-4 overflow-x-auto no-scrollbar"></div>
                
                <button onclick="genererQRDepuisDetail()" class="bg-green-600 text-white w-full py-3 rounded-lg text-[10px] font-black uppercase mt-4 hover:bg-green-700 transition flex items-center justify-center gap-2">
                    <i class="fa-solid fa-qrcode"></i> PAIEMENT PAR QR CODE
                </button>
            </div>
            
            <div class="md:w-1/2">
                <div class="flex justify-between items-start">
                    <h3 id="detail-name" class="text-2xl font-black uppercase italic text-gray-800"></h3>
                    <div class="favorite-btn" onclick="toggleWishlist(currentProduct.id, this)">
                        <i class="fa-regular fa-heart"></i>
                    </div>
                </div>
                <p id="detail-price" class="text-[#ff6600] font-black text-2xl mt-2"></p>
                
                <div id="view-counter" class="flex items-center gap-2 mt-3 bg-gray-50 w-fit px-3 py-1 rounded-full border border-gray-100">
                    <span class="relative flex h-2 w-2">
                        <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                        <span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span>
                    </span>
                    <p class="text-[9px] font-black uppercase text-gray-500">
                        <span id="nb-vues-text" class="text-gray-900">24 personnes</span> consultent
                    </p>
                </div>
                
                <div class="my-4 border-t pt-4">
                    <p id="detail-desc" class="text-xs text-gray-600 leading-relaxed"></p>
                </div>
                
                <div class="space-y-4 my-6">
                    <div id="size-area" class="hidden">
                        <label class="block text-[10px] font-black uppercase text-gray-400 mb-2">Taille / Pointure</label>
                        <select id="select-size" class="w-full p-3 border rounded-xl bg-gray-50 text-sm font-bold outline-none focus:ring-2 focus:ring-[#c5a059]"></select>
                    </div>
                    
                    <div id="color-area" class="hidden">
                        <label class="block text-[10px] font-black uppercase text-gray-400 mb-2">Couleur</label>
                        <select id="select-color" class="w-full p-3 border rounded-xl bg-gray-50 text-sm font-bold outline-none focus:ring-2 focus:ring-[#c5a059]"></select>
                    </div>
                    
                    <div id="size-helper-ui" class="hidden p-4 bg-orange-50 rounded-xl border-2 border-dashed border-orange-200">
                        <p class="text-[10px] font-black uppercase mb-3 text-orange-800">Trouver ma taille id√©ale</p>
                        <div class="flex gap-2">
                            <input type="number" id="user-weight" placeholder="Ton poids (kg)" 
                                   class="w-1/2 p-3 text-sm border rounded-lg focus:ring-2 focus:ring-[#c5a059] outline-none">
                            <button onclick="calculerTailleRec()" 
                                    class="w-1/2 bg-black text-white text-[10px] font-black rounded-lg hover:bg-[#c5a059] transition-all">
                                CALCULER
                            </button>
                        </div>
                        <p id="size-result" class="mt-3 text-[11px] font-bold text-green-600 uppercase tracking-wider"></p>
                    </div>
                    
                    <div id="shoe-guide-ui" class="hidden p-4 bg-blue-50 rounded-xl border-2 border-dashed border-blue-200">
                        <p class="text-[10px] font-black uppercase mb-2 text-blue-800">Guide des pointures</p>
                        <p class="text-[9px] text-blue-600 mb-2 italic">Mesurez votre pied du talon aux orteils.</p>
                        <table class="w-full text-[10px] text-left border-collapse">
                            <tr class="border-b border-blue-100">
                                <th class="py-1">Taille</th>
                                <th class="py-1">Longueur (cm)</th>
                            </tr>
                            <tr><td>36-37</td><td>23.5 cm</td></tr>
                            <tr><td>38-39</td><td>24.5 cm</td></tr>
                            <tr><td>40-41</td><td>25.5 cm</td></tr>
                            <tr><td>42-43</td><td>26.5 cm</td></tr>
                            <tr><td>44-45</td><td>27.5 cm</td></tr>
                        </table>
                    </div>
                    
                    <button onclick="toggleAideTaille()" class="text-[9px] font-bold text-[#c5a059] uppercase underline mb-2 hover:text-[#ff6600] transition-colors">
                        <i class="fa-solid fa-wand-magic-sparkles mr-1"></i> Aide-moi √† choisir ma taille
                    </button>
                </div>
                
                <button onclick="ajouterDepuisDetail()" class="btn-primary w-full mb-4">
                    <i class="fa-solid fa-cart-plus mr-2"></i> Ajouter au panier
                </button>
                
                <div class="mt-6">
                    <div class="flex items-center justify-between mb-3">
                        <h4 class="text-[10px] font-black uppercase">AVIS CLIENTS (24)</h4>
                        <button onclick="ouvrirAvis()" class="text-[8px] text-[#c5a059] underline">Voir tout</button>
                    </div>
                    <div class="space-y-3" id="product-reviews">
                        <!-- Les avis seront inject√©s ici -->
                    </div>
                    <button onclick="deposerAvis()" class="w-full mt-3 border-2 border-dashed border-[#c5a059] py-2 rounded-lg text-[9px] font-black uppercase text-[#c5a059] hover:bg-[#c5a059] hover:text-white transition">
                        ‚úçÔ∏è D√âPOSER UN AVIS
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- MODALE PANIER -->
<div id="cartModal" class="modal">
    <div class="modal-content">
        <div class="flex justify-between items-center mb-6 border-b pb-4">
            <h2 class="text-lg font-black uppercase italic tracking-widest text-[#c5a059]">Mon Panier</h2>
            <button onclick="viderPanier()" class="text-[9px] font-bold text-red-500 uppercase border border-red-100 px-3 py-1 rounded-full hover:bg-red-50 transition-colors">
                <i class="fa-solid fa-trash-can mr-1"></i> Vider
            </button>
        </div>

        <div id="promo-congrats" class="hidden mb-4 p-3 bg-pink-500 text-white rounded-xl text-[10px] font-black uppercase text-center animate-bounce shadow-lg">
            ‚ú® -20% DE R√âDUCTION ST VALENTIN APPLIQU√âS !
        </div>

        <div id="cart-items" class="space-y-4 mb-6 max-h-[30vh] overflow-y-auto no-scrollbar"></div>

        <div id="checkout-form" style="display:none;" class="space-y-4 border-t pt-4">
            <div class="flex gap-2 bg-gray-50 p-2 rounded-xl">
                <input type="text" id="input-promo" placeholder="CODE PROMO" class="flex-1 border-none bg-transparent p-2 text-sm uppercase font-bold focus:ring-0 outline-none">
                <button onclick="appliquerPromo()" class="bg-black text-white px-6 rounded-lg text-[10px] font-bold hover:bg-[#c5a059] transition-colors">OK</button>
            </div>
            <div id="promo-msg" class="text-[9px] font-bold uppercase hidden px-2"></div>

            <input type="text" id="nom-client" placeholder="NOM COMPLET *" class="w-full border p-3 rounded-lg text-sm uppercase bg-gray-50 focus:border-[#c5a059] outline-none">
            
            <div class="grid grid-cols-2 gap-2">
                <input type="tel" id="tel-client" placeholder="WHATSAPP *" class="w-full border p-3 rounded-lg text-sm bg-gray-50 focus:border-[#c5a059] outline-none">
                <input type="text" id="quartier-client" placeholder="QUARTIER *" class="w-full border p-3 rounded-lg text-sm bg-gray-50 focus:border-[#c5a059] outline-none">
            </div>

            <select id="zone-livraison" onchange="majResume()" class="w-full border p-3 rounded-lg text-sm font-bold bg-blue-50 border-blue-200 outline-none">
                <option value="">-- CHOISIR ZONE LIVRAISON --</option>
                <option value="abidjan_nord">Abidjan Nord (1.500 F)</option>
                <option value="abidjan_sud">Abidjan Sud (2.000 F)</option>
                <option value="interieur">Int√©rieur pays (3.000 F)</option>
                <option value="bouake">Retrait Boutique (Gratuit)</option>
            </select>

            <div class="space-y-3">
                <p class="text-[9px] font-black uppercase">Moyen de paiement *</p>
                <div class="grid grid-cols-2 gap-2">
                    <div class="payment-option" onclick="selectPayment('wave')" id="payment-wave">
                        <img src="https://goamobile.com/logosent/wave@221@-P-2021-06-30_00-18-27wave_logo_2.png" class="h-8 mx-auto mb-1" alt="Wave">
                        <span class="text-[8px] font-bold">Wave</span>
                    </div>
                    
                    <div class="payment-option" onclick="selectPayment('orange')" id="payment-orange">
                        <img src="https://www.pigroup360.com/wp-content/uploads/2020/09/orange-money-logo.png" class="h-8 mx-auto mb-1" alt="Orange Money">
                        <span class="text-[8px] font-bold">Orange Money</span>
                    </div>
                    
                    <div class="payment-option" onclick="selectPayment('mtn')" id="payment-mtn">
                        <img src="https://www.pigroup360.com/wp-content/uploads/2020/09/mtn-mobile-money-logo.jpg" class="h-8 mx-auto mb-1" alt="MTN Money">
                        <span class="text-[8px] font-bold">MTN Money</span>
                    </div>
                    
                    <div class="payment-option" onclick="selectPayment('cash')" id="payment-cash">
                        <i class="fa-solid fa-money-bill-wave text-2xl text-green-600 mb-1"></i>
                        <span class="text-[8px] font-bold">Cash livraison</span>
                    </div>
                </div>
                <input type="hidden" id="selected-payment" value="">
                
                <button onclick="genererQRDepuisPanier()" class="w-full bg-green-600 text-white py-3 rounded-lg text-[10px] font-black uppercase hover:bg-green-700 transition flex items-center justify-center gap-2">
                    <i class="fa-solid fa-qrcode"></i> PAYER PAR QR CODE
                </button>
            </div>

            <div class="bg-gray-50 p-4 rounded-xl space-y-2 border border-gray-100">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-2">
                        <i class="fa-solid fa-gift text-pink-500"></i>
                        <span class="text-[9px] font-black uppercase">Emballage Cadeau (+1.000 F)</span>
                    </div>
                    <input type="checkbox" id="check-cadeau" onchange="majResume()" class="h-4 w-4 accent-pink-500">
                </div>
                <hr class="border-gray-200">
                <div id="resume-final" class="text-[10px] font-bold uppercase space-y-1 text-gray-600"></div>
            </div>

            <div class="text-xl font-black flex justify-between items-center p-3 bg-white border-2 border-black rounded-xl">
                <span>TOTAL :</span>
                <span id="total-display" class="text-red-600">0 F</span>
            </div>

            <div class="flex items-start gap-2 py-2">
                <input type="checkbox" id="check-verif" onchange="toggleBouton()" class="mt-1 h-4 w-4 accent-black">
                <label for="check-verif" class="text-[8px] font-bold uppercase text-gray-500 leading-tight">
                    Je confirme ma commande et j'accepte les conditions de vente
                </label>
            </div>

            <button id="btn-final" onclick="validerCommande()" class="w-full bg-gray-300 text-white py-4 rounded-full font-black uppercase shadow-xl pointer-events-none transition-all duration-300" disabled>
                <i class="fa-brands fa-whatsapp mr-2"></i> Commander via WhatsApp
            </button>
        </div>

        <button onclick="fermerPanier()" class="w-full mt-6 text-[10px] font-bold uppercase text-gray-400 hover:text-black transition-colors underline">
            Continuer mes achats
        </button>
    </div>
</div>

<!-- MODALE FAVORIS -->
<div id="wishlistModal" class="modal">
    <div class="modal-content">
        <div class="flex justify-between items-center mb-4">
            <h2 class="text-lg font-black uppercase italic text-[#c5a059]">‚ù§Ô∏è Mes Favoris</h2>
            <button onclick="fermerWishlist()" class="text-2xl text-gray-400 hover:text-black transition-colors">&times;</button>
        </div>
        <div id="wishlist-items" class="space-y-3 max-h-[60vh] overflow-y-auto"></div>
        <button onclick="fermerWishlist()" class="w-full mt-4 text-[10px] font-bold uppercase text-gray-400 hover:text-black transition-colors underline">
            Fermer
        </button>
    </div>
</div>

<!-- MODALE COMPARATEUR -->
<div id="comparateurModal" class="modal">
    <div class="modal-content max-w-3xl">
        <div class="flex justify-between items-center mb-4">
            <h2 class="text-lg font-black uppercase italic text-[#c5a059]">‚öñÔ∏è Comparateur</h2>
            <button onclick="fermerComparateur()" class="text-2xl text-gray-400 hover:text-black transition-colors">&times;</button>
        </div>
        <div id="comparateur-items" class="grid grid-cols-2 gap-4"></div>
        <button onclick="fermerComparateur()" class="w-full mt-4 text-[10px] font-bold uppercase text-gray-400 hover:text-black transition-colors underline">
            Fermer
        </button>
    </div>
</div>

<!-- MODALE AVIS -->
<div id="avisModal" class="modal">
    <div class="modal-content">
        <div class="flex justify-between items-center mb-4">
            <h2 class="text-lg font-black uppercase italic text-[#c5a059]">‚≠ê Avis clients</h2>
            <button onclick="fermerAvis()" class="text-2xl text-gray-400 hover:text-black transition-colors">&times;</button>
        </div>
        <div id="all-reviews" class="space-y-4 max-h-[60vh] overflow-y-auto"></div>
        <button onclick="deposerAvis()" class="btn-primary w-full mt-4 text-[10px] py-3">
            ‚úçÔ∏è D√âPOSER UN AVIS
        </button>
    </div>
</div>

<!-- MODALE DEPOT AVIS -->
<div id="depotAvisModal" class="modal">
    <div class="modal-content">
        <div class="flex justify-between items-center mb-4">
            <h2 class="text-lg font-black uppercase italic text-[#c5a059]">üìù Donner mon avis</h2>
            <button onclick="fermerDepotAvis()" class="text-2xl text-gray-400 hover:text-black transition-colors">&times;</button>
        </div>
        
        <div class="space-y-4">
            <div>
                <label class="text-[9px] font-black uppercase block mb-1">Note</label>
                <div class="flex gap-2 text-2xl text-gray-300" id="rating-stars">
                    <i class="fa-regular fa-star cursor-pointer hover:text-[#c5a059]" onclick="setRating(1)"></i>
                    <i class="fa-regular fa-star cursor-pointer hover:text-[#c5a059]" onclick="setRating(2)"></i>
                    <i class="fa-regular fa-star cursor-pointer hover:text-[#c5a059]" onclick="setRating(3)"></i>
                    <i class="fa-regular fa-star cursor-pointer hover:text-[#c5a059]" onclick="setRating(4)"></i>
                    <i class="fa-regular fa-star cursor-pointer hover:text-[#c5a059]" onclick="setRating(5)"></i>
                </div>
            </div>
            
            <input type="text" id="avis-nom" placeholder="Votre nom" class="w-full border p-3 rounded-lg text-sm">
            <textarea id="avis-comment" placeholder="Votre commentaire" rows="4" class="w-full border p-3 rounded-lg text-sm"></textarea>
            <input type="file" id="avis-photo" accept="image/*" class="w-full border p-2 rounded-lg text-sm">
            
            <button onclick="soumettreAvis()" class="btn-primary w-full">PUBLIER MON AVIS</button>
        </div>
    </div>
</div>

<!-- MODALE CADEAU MYST√àRE -->
<div id="cadeauModal" class="modal">
    <div class="modal-content text-center">
        <div class="text-6xl mb-4 animate-bounce">üéÅ</div>
        <h2 class="text-xl font-black uppercase italic text-[#c5a059] mb-4">F√âLICITATIONS !</h2>
        <p id="cadeau-message" class="text-sm mb-6"></p>
        <button onclick="ajouterCadeauAuPanier()" class="btn-primary w-full mb-2">AJOUTER AU PANIER</button>
        <button onclick="fermerCadeau()" class="text-[10px] font-bold uppercase text-gray-400 underline">Plus tard</button>
    </div>
</div>

<!-- MODALE CALENDRIER AVENT -->
<div id="adventModal" class="modal">
    <div class="modal-content">
        <div class="flex justify-between items-center mb-4">
            <h2 class="text-lg font-black uppercase italic text-[#c5a059]">üìÖ Calendrier de l'Avent</h2>
            <button onclick="fermerAdvent()" class="text-2xl text-gray-400 hover:text-black transition-colors">&times;</button>
        </div>
        <div class="advent-calendar" id="advent-calendar"></div>
        <p class="text-[8px] text-gray-400 text-center mt-4">Ouvrez une case chaque jour pour d√©couvrir votre surprise !</p>
    </div>
</div>

<!-- MODALE CGV -->
<div id="cgvModal" class="modal">
    <div class="modal-content max-w-2xl">
        <div class="flex justify-between items-center border-b pb-4 mb-6">
            <h2 class="text-xl font-black uppercase text-gray-800 italic">Conditions G√©n√©rales de Vente</h2>
            <button onclick="fermerCGV()" class="text-2xl font-bold text-gray-400 hover:text-black transition-colors">&times;</button>
        </div>
        
        <div class="text-[11px] space-y-6 text-gray-700 leading-relaxed overflow-y-auto max-h-[60vh] pr-2 uppercase font-semibold">
            <section>
                <h3 class="text-[#ff6600] font-black mb-2">1. OBJET ET ACCEPTATION</h3>
                <p>Les pr√©sentes conditions r√©gissent les ventes de la boutique LATYFA BOUTIQUE. Toute validation de commande sur WhatsApp apr√®s consultation du site implique l'adh√©sion totale √† ces conditions.</p>
            </section>

            <section>
                <h3 class="text-[#ff6600] font-black mb-2">2. PRIX ET PAIEMENT</h3>
                <p>Les prix sont indiqu√©s en FCFA. Le paiement est exigible en totalit√© au moment de la commande via Mobile Money (Wave, Orange Money, MTN) ou en cash √† la livraison. Aucune exp√©dition ne sera effectu√©e sans confirmation de r√©ception du paiement int√©gral pour les paiements mobiles.</p>
            </section>

            <section>
                <h3 class="text-[#ff6600] font-black mb-2">3. LIVRAISONS ET D√âLAIS</h3>
                <p>Abidjan : Livraison sous 24h √† 48h. Int√©rieur : Exp√©dition via les services de transport (UTB, AVS, etc.) sous 48h. Les frais de livraison sont √† la charge du client et varient selon la zone g√©ographique choisie lors de la commande.</p>
            </section>

            <section>
                <h3 class="text-[#ff6600] font-black mb-2">4. RETRAITS EN BOUTIQUE</h3>
                <p>Les clients r√©sidant √† Bouak√© ont la possibilit√© de recevoir leurs articles physiquement via un repr√©sentant sans frais suppl√©mentaires. Le paiement en esp√®ces est accept√© uniquement lors du retrait physique par le client lui m√™me.</p>
            </section>

            <section>
                <h3 class="text-[#ff6600] font-black mb-2">5. RETOURS ET √âCHANGES</h3>
                <p>Compte tenu de la nature de nos articles (Bijoux et Maroquinerie), aucun retour ou remboursement ne sera accept√© apr√®s r√©ception du colis. Le client est tenu de v√©rifier l'√©tat du produit devant le livreur. En cas de d√©faut majeur constat√© imm√©diatement, un √©change par un article de valeur √©quivalente sera propos√©.</p>
            </section>
        </div>

        <button onclick="fermerCGV()" class="btn-primary w-full mt-8">J'ai compris et j'accepte</button>
    </div>
</div>

<!-- ==================== MODALE ADMIN ==================== -->
<div id="adminModal" class="modal">
    <div class="modal-content max-w-4xl" style="max-width: 900px;">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-black uppercase italic text-[#c5a059]">
                <i class="fa-solid fa-crown mr-2"></i> Administration Latyfa
            </h2>
            <button onclick="fermerAdmin()" class="text-2xl text-gray-400 hover:text-black transition-colors">&times;</button>
        </div>

        <!-- MENU ADMIN -->
        <div class="admin-menu">
            <div class="admin-menu-item active" onclick="switchAdminSection('dashboard')" id="menuDashboard">
                <i class="fa-solid fa-chart-pie"></i>
                <span>Dashboard</span>
            </div>
            <div class="admin-menu-item" onclick="switchAdminSection('inscriptions')" id="menuInscriptions">
                <i class="fa-solid fa-user-plus"></i>
                <span>Inscriptions</span>
            </div>
            <div class="admin-menu-item" onclick="switchAdminSection('produits')" id="menuProduits">
                <i class="fa-solid fa-box"></i>
                <span>Produits</span>
            </div>
            <div class="admin-menu-item" onclick="switchAdminSection('commandes')" id="menuCommandes">
                <i class="fa-solid fa-truck"></i>
                <span>Commandes</span>
            </div>
            <div class="admin-menu-item" onclick="switchAdminSection('clients')" id="menuClients">
                <i class="fa-solid fa-users"></i>
                <span>Clients</span>
            </div>
            <div class="admin-menu-item" onclick="switchAdminSection('messagerie')" id="menuMessagerie">
                <i class="fa-regular fa-envelope"></i>
                <span>Messagerie</span>
            </div>
            <div class="admin-menu-item" onclick="switchAdminSection('sauvegarde')" id="menuSauvegarde">
                <i class="fa-solid fa-database"></i>
                <span>Sauvegarde</span>
            </div>
            <div class="admin-menu-item" onclick="switchAdminSection('maintenance')" id="menuMaintenance">
                <i class="fa-solid fa-screwdriver-wrench"></i>
                <span>Maintenance</span>
            </div>
        </div>

        <!-- SECTION DASHBOARD -->
        <div id="dashboardSection" class="admin-section active">
            <h3 class="text-[12px] font-black uppercase mb-4 flex items-center gap-2">
                <i class="fa-solid fa-chart-line text-[#c5a059]"></i> Tableau de bord
            </h3>
            
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                <div class="stat-card">
                    <div class="stat-icon bg-blue-100 text-blue-600">
                        <i class="fa-solid fa-chart-simple"></i>
                    </div>
                    <p class="text-[8px] font-black uppercase text-gray-400 mb-1">CA Total</p>
                    <div id="stat-ca" class="text-xl font-black text-blue-600">0 F</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon bg-green-100 text-green-600">
                        <i class="fa-solid fa-cart-shopping"></i>
                    </div>
                    <p class="text-[8px] font-black uppercase text-gray-400 mb-1">Commandes</p>
                    <div id="stat-nb" class="text-xl font-black text-green-600">0</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon bg-purple-100 text-purple-600">
                        <i class="fa-solid fa-percent"></i>
                    </div>
                    <p class="text-[8px] font-black uppercase text-gray-400 mb-1">Conversion</p>
                    <div id="stat-conversion" class="text-xl font-black text-purple-600">3.2%</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon bg-orange-100 text-orange-600">
                        <i class="fa-solid fa-basket-shopping"></i>
                    </div>
                    <p class="text-[8px] font-black uppercase text-gray-400 mb-1">Panier moyen</p>
                    <div id="stat-panier-moyen" class="text-xl font-black text-orange-600">0 F</div>
                </div>
            </div>

            <!-- GRAPHIQUE -->
            <div class="bg-white p-4 rounded-2xl shadow-sm border border-gray-200 mb-6">
                <h4 class="text-[10px] font-black uppercase mb-4">√âvolution des ventes (7 derniers jours)</h4>
                <canvas id="salesChart" style="height: 200px;"></canvas>
            </div>

            <!-- PRODUITS POPULAIRES -->
            <div class="bg-white p-4 rounded-2xl shadow-sm border border-gray-200">
                <h4 class="text-[10px] font-black uppercase mb-4">üî• Produits les plus vendus</h4>
                <div id="popular-products-list" class="space-y-2"></div>
            </div>
        </div>

        <!-- SECTION INSCRIPTIONS -->
        <div id="inscriptionsSection" class="admin-section">
            <h3 class="text-[12px] font-black uppercase mb-4 flex items-center gap-2">
                <i class="fa-solid fa-user-plus text-[#c5a059]"></i> Nouveaux inscrits
            </h3>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                <div class="stat-card">
                    <div class="stat-icon bg-green-100 text-green-600">
                        <i class="fa-solid fa-users"></i>
                    </div>
                    <p class="text-[8px] font-black uppercase text-gray-400 mb-1">Total inscrits</p>
                    <div id="stat-total-inscrits" class="text-xl font-black text-green-600">0</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon bg-blue-100 text-blue-600">
                        <i class="fa-solid fa-calendar-week"></i>
                    </div>
                    <p class="text-[8px] font-black uppercase text-gray-400 mb-1">Cette semaine</p>
                    <div id="stat-inscrits-semaine" class="text-xl font-black text-blue-600">0</div>
                </div>
            </div>
            
            <div class="bg-white p-4 rounded-2xl shadow-sm border border-gray-200 mb-6">
                <h4 class="text-[10px] font-black uppercase mb-4">üìà √âvolution des inscriptions</h4>
                <canvas id="inscriptionsChart" style="height: 200px;"></canvas>
            </div>
            
            <div class="bg-white p-4 rounded-2xl shadow-sm border border-gray-200">
                <div class="flex justify-between items-center mb-4">
                    <h4 class="text-[10px] font-black uppercase">üìã Liste des inscrits</h4>
                    <div class="flex gap-2">
                        <button onclick="exporterInscrits()" class="bg-blue-600 text-white px-3 py-1 rounded-lg text-[8px] font-black uppercase">
                            <i class="fa-solid fa-download mr-1"></i> Exporter
                        </button>
                        <button onclick="refreshInscrits()" class="bg-gray-100 px-3 py-1 rounded-lg text-[8px] font-black uppercase">
                            <i class="fa-solid fa-rotate"></i>
                        </button>
                    </div>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="w-full text-[9px]">
                        <thead class="bg-gray-50 uppercase font-black">
                            <tr>
                                <th class="p-2 text-left">Date</th>
                                <th class="p-2 text-left">Nom</th>
                                <th class="p-2 text-left">Email</th>
                                <th class="p-2 text-left">T√©l√©phone</th>
                                <th class="p-2 text-left">Source</th>
                                <th class="p-2 text-left">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="inscrits-liste">
                            <!-- Les inscrits appara√Ætront ici -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- SECTION PRODUITS -->
        <div id="produitsSection" class="admin-section">
            <h3 class="text-[12px] font-black uppercase mb-4 flex items-center gap-2">
                <i class="fa-solid fa-box text-[#c5a059]"></i> Gestion des produits
            </h3>
            
            <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-200 mb-6">
                <h4 class="text-[10px] font-black uppercase text-[#c5a059] mb-4">‚ûï Ajouter un nouvel article</h4>
                <div class="grid grid-cols-1 gap-4">
                    <input type="text" id="adm-name" placeholder="Nom du produit *" class="w-full border p-3 rounded-lg text-sm">
                    
                    <div class="grid grid-cols-2 gap-4">
                        <input type="number" id="adm-price" placeholder="Prix (FCFA) *" class="w-full border p-3 rounded-lg text-sm">
                        <select id="adm-cat" class="w-full border p-3 rounded-lg text-sm">
                            <option value="bijoux">Bijoux</option>
                            <option value="vetements">V√™tements</option>
                            <option value="chaussures">Chaussures</option>
                            <option value="sac">Sacs</option>
                            <option value="parfum">Parfums</option>
                            <option value="hanche">Perles de hanche</option>
                            <option value="autres">Autres</option>
                        </select>
                    </div>
                    
                    <textarea id="adm-img" placeholder="Liens images (s√©par√©s par des virgules) *" class="w-full border p-3 rounded-lg text-sm h-20"></textarea>
                    <textarea id="adm-desc" placeholder="Description courte" class="w-full border p-3 rounded-lg text-sm h-20"></textarea>
                    
                    <div class="flex items-center gap-4">
                        <div class="flex-1">
                            <input type="number" id="adm-stock-count" placeholder="Stock restant" class="w-full border p-3 rounded-lg text-sm">
                        </div>
                        <div class="flex items-center gap-2">
                            <input type="checkbox" id="adm-stock-bas" class="w-4 h-4">
                            <label for="adm-stock-bas" class="text-[10px] font-bold uppercase text-red-600">Alerte stock bas</label>
                        </div>
                    </div>
                    
                    <button onclick="ajouterProduitAdmin()" class="btn-primary w-full">Mettre en ligne</button>
                </div>
            </div>

            <h4 class="text-[10px] font-black uppercase mb-3">üì¶ Articles en ligne</h4>
            <div id="admin-list" class="space-y-2 mb-4 max-h-[300px] overflow-y-auto pr-2"></div>
        </div>

        <!-- SECTION COMMANDES -->
        <div id="commandesSection" class="admin-section">
            <h3 class="text-[12px] font-black uppercase mb-4 flex items-center gap-2">
                <i class="fa-solid fa-truck text-[#c5a059]"></i> Gestion des commandes
            </h3>
            
            <div class="flex gap-2 mb-4">
                <button onclick="sauvegarderHistorique()" class="flex-1 bg-blue-600 text-white px-4 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest shadow-md hover:bg-blue-700 transition-all">
                    <i class="fa-solid fa-file-export mr-2"></i> Exporter (Excel)
                </button>
                <button onclick="toggleHistorique()" class="bg-gray-900 text-white px-4 py-3 rounded-xl text-[10px] font-black uppercase">
                    <i class="fa-solid fa-clock-rotate-left mr-2"></i> Historique
                </button>
            </div>

            <div id="historique-zone" class="hidden space-y-3 max-h-[400px] overflow-y-auto pr-2"></div>
        </div>

        <!-- SECTION CLIENTS -->
        <div id="clientsSection" class="admin-section">
            <h3 class="text-[12px] font-black uppercase mb-4 flex items-center gap-2">
                <i class="fa-solid fa-users text-[#c5a059]"></i> Gestion des clients
            </h3>
            
            <div class="flex gap-2 mb-4">
                <button onclick="exporterClients()" class="bg-blue-600 text-white px-4 py-2 rounded-lg text-[10px] font-black uppercase">
                    <i class="fa-solid fa-download mr-2"></i> Exporter clients
                </button>
                <button onclick="refreshClientsList()" class="bg-gray-100 px-4 py-2 rounded-lg text-[10px] font-black uppercase">
                    <i class="fa-solid fa-rotate"></i> Rafra√Æchir
                </button>
            </div>
            
            <div id="clients-list" class="space-y-2 max-h-[400px] overflow-y-auto pr-2"></div>
        </div>

        <!-- SECTION MESSAGERIE -->
        <div id="messagerieSection" class="admin-section">
            <h3 class="text-[12px] font-black uppercase mb-4 flex items-center gap-2">
                <i class="fa-regular fa-envelope text-[#c5a059]"></i> Messagerie
            </h3>
            
            <!-- BOUTON DE RAFRA√éCHISSEMENT -->
            <div class="flex justify-end mb-2">
                <button onclick="refreshClientSelector()" class="bg-gray-100 hover:bg-gray-200 text-[9px] font-black uppercase px-3 py-1 rounded-full flex items-center gap-1">
                    <i class="fa-solid fa-rotate"></i> Rafra√Æchir la liste
                </button>
            </div>
            
            <div class="mb-4">
                <label class="text-[9px] font-bold uppercase block mb-2">Destinataires</label>
                <div class="flex gap-2 mb-3 flex-wrap">
                    <button onclick="selectAllClients()" class="bg-gray-100 text-[9px] px-3 py-1 rounded-full hover:bg-[#c5a059] hover:text-white transition">Tous les clients</button>
                    <button onclick="selectClientsAvecCommandes()" class="bg-gray-100 text-[9px] px-3 py-1 rounded-full hover:bg-[#c5a059] hover:text-white transition">Clients actifs</button>
                    <button onclick="clearClientSelection()" class="bg-gray-100 text-[9px] px-3 py-1 rounded-full hover:bg-[#c5a059] hover:text-white transition">Effacer</button>
                </div>
                <div id="clientsSelector" class="border rounded-lg p-3 max-h-60 overflow-y-auto bg-white">
                    <!-- Les clients appara√Ætront ici -->
                </div>
            </div>
            
            <div class="mb-4">
                <label class="text-[9px] font-bold uppercase block mb-2">Objet</label>
                <input type="text" id="messageObjet" placeholder="Objet du message" class="w-full border p-3 rounded-lg text-sm">
            </div>
            
            <div class="mb-4">
                <label class="text-[9px] font-bold uppercase block mb-2">Message</label>
                <textarea id="messageContenu" rows="6" placeholder="Votre message..." class="w-full border p-3 rounded-lg text-sm"></textarea>
            </div>
            
            <div class="flex gap-2 mb-6">
                <button onclick="envoyerMessageAdminSelection()" class="btn-primary flex-1">
                    <i class="fa-regular fa-paper-plane mr-2"></i> ENVOYER (Message interne)
                </button>
                <button onclick="envoyerEmailMassif()" class="bg-blue-600 text-white flex-1 py-3 rounded-lg text-[10px] font-black uppercase hover:bg-blue-700 transition flex items-center justify-center gap-2">
                    <i class="fa-regular fa-envelope mr-2"></i> ENVOYER PAR EMAIL
                </button>
            </div>
        </div>

        <!-- SECTION SAUVEGARDE -->
        <div id="sauvegardeSection" class="admin-section">
            <h3 class="text-[12px] font-black uppercase mb-4 flex items-center gap-2">
                <i class="fa-solid fa-database text-[#c5a059]"></i> Sauvegarde
            </h3>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                <div class="backup-option" onclick="sauvegarderToutesDonnees()">
                    <i class="fa-solid fa-cloud-arrow-down text-4xl text-[#c5a059] mb-3"></i>
                    <h4 class="text-[10px] font-black uppercase mb-2">Sauvegarder</h4>
                    <p class="text-[8px] text-gray-400">Toutes les donn√©es</p>
                </div>
                
                <div class="backup-option" onclick="restaurerDonnees()">
                    <i class="fa-solid fa-cloud-arrow-up text-4xl text-[#c5a059] mb-3"></i>
                    <h4 class="text-[10px] font-black uppercase mb-2">Restaurer</h4>
                    <p class="text-[8px] text-gray-400">Fichier JSON</p>
                    <input type="file" id="restoreFile" accept=".json" style="display: none;">
                </div>
            </div>
        </div>

        <!-- SECTION MAINTENANCE -->
        <div id="maintenanceSection" class="admin-section">
            <h3 class="text-[12px] font-black uppercase mb-4 flex items-center gap-2">
                <i class="fa-solid fa-screwdriver-wrench text-[#c5a059]"></i> Maintenance
            </h3>
            
            <div class="maintenance-toggle mb-6">
                <span class="text-[10px] font-black uppercase flex-1">√âtat du site</span>
                <button id="maintenanceOn" onclick="setMaintenance(true)" class="px-6 py-3 rounded-lg font-black text-[10px] uppercase bg-gray-200">ACTIVER</button>
                <button id="maintenanceOff" onclick="setMaintenance(false)" class="px-6 py-3 rounded-lg font-black text-[10px] uppercase bg-[#c5a059] text-white">D√âSACTIVER</button>
            </div>
            
            <div class="bg-yellow-50 p-4 rounded-xl border border-yellow-200">
                <h4 class="text-[10px] font-black uppercase mb-2 flex items-center gap-2">
                    <i class="fa-solid fa-triangle-exclamation text-yellow-600"></i>
                    Zone de danger
                </h4>
                <button onclick="effacerToutesDonnees()" class="bg-red-600 text-white px-4 py-2 rounded-lg text-[10px] font-black uppercase hover:bg-red-700 transition">
                    <i class="fa-solid fa-trash-can mr-2"></i> EFFACER TOUTES LES DONN√âES
                </button>
            </div>
        </div>

        <div class="text-center mt-6 pt-4 border-t">
            <button onclick="changerMotDePasse()" class="text-[9px] text-gray-400 hover:text-[#c5a059] uppercase font-bold tracking-widest transition-colors">
                <i class="fa-solid fa-key mr-1"></i> Modifier le code d'acc√®s
            </button>
        </div>
    </div>
</div>

<!-- MODALE GUIDE DES TAILLES -->
<div id="guideModal" class="modal">
    <div class="modal-content max-w-md">
        <div class="flex justify-between items-center mb-4">
            <h3 class="font-black uppercase text-sm italic text-[#c5a059]">üìè Guide des Tailles</h3>
            <button onclick="fermerGuide()" class="text-xl text-gray-400 hover:text-black transition-colors">&times;</button>
        </div>
        
        <div class="space-y-6">
            <div>
                <p class="text-[10px] font-bold text-[#c5a059] uppercase mb-2">Bagues & Bijoux</p>
                <table class="w-full text-[10px] border-collapse">
                    <tr class="bg-gray-100 uppercase">
                        <th class="p-2 border">Taille</th>
                        <th class="p-2 border">Circonf√©rence</th>
                    </tr>
                    <tr><td class="p-2 border text-center">6</td><td class="p-2 border text-center">52 mm</td></tr>
                    <tr><td class="p-2 border text-center">7</td><td class="p-2 border text-center">54 mm</td></tr>
                    <tr><td class="p-2 border text-center">8</td><td class="p-2 border text-center">57 mm</td></tr>
                    <tr><td class="p-2 border text-center">9</td><td class="p-2 border text-center">60 mm</td></tr>
                </table>
            </div>

            <div>
                <p class="text-[10px] font-bold text-[#c5a059] uppercase mb-2">V√™tements</p>
                <div class="grid grid-cols-3 gap-2 text-center text-[9px] font-bold uppercase">
                    <div class="bg-gray-50 p-2 rounded">S<br><span class="text-gray-400">36-38</span></div>
                    <div class="bg-gray-50 p-2 rounded">M<br><span class="text-gray-400">40-42</span></div>
                    <div class="bg-gray-50 p-2 rounded">L<br><span class="text-gray-400">44-46</span></div>
                    <div class="bg-gray-50 p-2 rounded">XL<br><span class="text-gray-400">48-50</span></div>
                    <div class="bg-gray-50 p-2 rounded">XXL<br><span class="text-gray-400">52-54</span></div>
                </div>
            </div>
            
            <p class="text-[8px] text-gray-400 italic">Astuce : Si vous h√©sitez entre deux tailles, prenez la plus grande pour plus de confort.</p>
        </div>
    </div>
</div>

<!-- PREUVE SOCIALE -->
<div id="social-proof" class="social-proof">
    <div class="w-10 h-10 bg-gray-100 rounded-full flex-shrink-0 flex items-center justify-center text-[#c5a059]">
        <i class="fa-solid fa-bag-shopping"></i>
    </div>
    <div>
        <p id="proof-text" class="text-[11px] text-gray-800 font-medium leading-tight"></p>
        <p class="text-[9px] text-gray-400 mt-1 uppercase tracking-widest font-bold">Il y a quelques instants</p>
    </div>
</div>

<!-- NOTIFICATION ROUE -->
<div id="wheel-notif" class="fixed bottom-28 left-5 bg-white shadow-2xl rounded-lg p-3 flex items-center gap-3 border-l-4 border-black transform translate-x-[-120%] transition-all duration-700 z-[100] max-w-[250px]">
    <div class="w-10 h-10 bg-gradient-to-r from-[#c5a059] to-[#e2c286] rounded-full flex-shrink-0 flex items-center justify-center text-white border border-gray-100">
        <i class="fa-solid fa-star animate-pulse"></i>
    </div>
    <div>
        <p id="notif-text" class="text-[10px] text-gray-800 font-bold leading-tight uppercase tracking-tighter"></p>
        <p class="text-[8px] text-gray-400 mt-1 uppercase font-black">Il y a quelques secondes</p>
    </div>
</div>

<!-- BOUTON ADMIN CACHE -->
<div onclick="ouvrirAdmin()" class="admin-btn">ADM</div>

<!-- ==================== SECTION D√âVELOPPEUR ==================== -->
<section class="py-16 bg-gradient-to-r from-[#1a1a1a] to-[#2d2d2d] text-white">
    <div class="container mx-auto px-4">
        <div class="max-w-5xl mx-auto">
            <!-- Badge "D√©veloppeur" -->
            <div class="text-center mb-8">
                <span class="bg-[#c5a059] text-black px-6 py-2 rounded-full text-xs font-black uppercase tracking-wider inline-flex items-center gap-2 animate-pulse" data-i18n="dev_title">
                    <i class="fa-solid fa-code"></i>
                    VOUS VOULEZ CR√âER VOTRE SITE INTERNET ?
                </span>
            </div>

            <!-- Carte principale -->
            <div class="bg-white/5 backdrop-blur-sm rounded-3xl p-8 border border-[#c5a059]/30 shadow-2xl relative overflow-hidden">
                <!-- √âl√©ments d√©coratifs -->
                <div class="absolute top-0 right-0 w-64 h-64 bg-[#c5a059]/10 rounded-full blur-3xl"></div>
                <div class="absolute bottom-0 left-0 w-64 h-64 bg-[#c5a059]/10 rounded-full blur-3xl"></div>
                
                <div class="relative z-10 flex flex-col md:flex-row items-center gap-8">
                    <!-- Photo du d√©veloppeur -->
                    <div class="relative group">
                        <div class="w-48 h-48 rounded-full overflow-hidden border-4 border-[#c5a059] shadow-xl transform transition-transform group-hover:scale-105 group-hover:rotate-3">
                            <img src="https://i.postimg.cc/zBK26VKr/1770095562940.png" 
                                 alt="Traore Aboudramane Kader" 
                                 class="w-full h-full object-cover">
                        </div>
                        <div class="absolute -bottom-2 -right-2 bg-[#c5a059] text-black px-4 py-2 rounded-full font-black text-xs shadow-lg flex items-center gap-1">
                            <i class="fa-solid fa-crown"></i>
                            DEV
                        </div>
                        <div class="absolute -top-2 -left-2 bg-green-500 text-white px-3 py-1 rounded-full text-[8px] font-black animate-pulse">
                            DISPO
                        </div>
                    </div>
                    
                    <!-- Infos et message -->
                    <div class="flex-1 text-center md:text-left">
                        <!-- Nom -->
                        <h3 class="text-3xl font-black uppercase tracking-wider mb-2" data-i18n="dev_name">
                            <span class="text-[#c5a059]">TRAORE ABOUBAMANE</span> KADER
                        </h3>
                        
                        <!-- Titre -->
                        <p class="text-xl font-bold text-white/80 mb-4 flex items-center justify-center md:justify-start gap-2" data-i18n="dev_role">
                            <i class="fa-solid fa-laptop-code text-[#c5a059]"></i>
                            D√©veloppeur Web & Mobile
                        </p>
                        
                        <!-- Description -->
                        <p class="text-gray-300 text-sm mb-6 max-w-lg" data-i18n="dev_desc">
                            Vous avez aim√© ce site ? Je peux cr√©er le v√¥tre ! 
                            Site e-commerce, boutique en ligne, landing page, application mobile...
                            Design moderne, responsive, et adapt√© √† vos besoins.
                        </p>
                        
                        <!-- Statistiques -->
                        <div class="grid grid-cols-3 gap-3 mb-6">
                            <div class="bg-white/10 rounded-xl p-3 hover:bg-[#c5a059]/20 transition-colors">
                                <div class="text-[#c5a059] font-black text-xl">5+</div>
                                <div class="text-[8px] uppercase font-bold" data-i18n="dev_stats_sites">Sites cr√©√©s</div>
                            </div>
                            <div class="bg-white/10 rounded-xl p-3 hover:bg-[#c5a059]/20 transition-colors">
                                <div class="text-[#c5a059] font-black text-xl">24/7</div>
                                <div class="text-[8px] uppercase font-bold" data-i18n="dev_stats_support">Support</div>
                            </div>
                            <div class="bg-white/10 rounded-xl p-3 hover:bg-[#c5a059]/20 transition-colors">
                                <div class="text-[#c5a059] font-black text-xl">100%</div>
                                <div class="text-[8px] uppercase font-bold" data-i18n="dev_stats_satisfait">Satisfait</div>
                            </div>
                        </div>
                        
                        <!-- Contacts -->
                        <div class="space-y-3 mb-6">
                            <!-- WhatsApp -->
                            <a href="https://wa.me/2250506113292?text=Bonjour%20Kader%2C%20je%20souhaite%20cr√©er%20un%20site%20internet%20comme%20Latyfa%20Shop" 
                               target="_blank" 
                               class="flex items-center gap-3 p-3 bg-green-500/10 hover:bg-green-500/20 rounded-xl transition-all group">
                                <div class="w-10 h-10 bg-green-500 rounded-full flex items-center justify-center text-white text-xl group-hover:scale-110 transition">
                                    <i class="fa-brands fa-whatsapp"></i>
                                </div>
                                <div class="flex-1 text-left">
                                    <div class="text-[10px] uppercase text-gray-400" data-i18n="dev_contact_whatsapp">WhatsApp</div>
                                    <div class="font-bold text-sm">05 06 11 32 92</div>
                                </div>
                                <i class="fa-solid fa-arrow-right text-green-500 group-hover:translate-x-1 transition"></i>
                            </a>
                            
                            <!-- Facebook -->
                            <a href="https://www.facebook.com/kader.traore.1848" 
                               target="_blank"
                               class="flex items-center gap-3 p-3 bg-blue-500/10 hover:bg-blue-500/20 rounded-xl transition-all group">
                                <div class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white text-xl group-hover:scale-110 transition">
                                    <i class="fa-brands fa-facebook-f"></i>
                                </div>
                                <div class="flex-1 text-left">
                                    <div class="text-[10px] uppercase text-gray-400" data-i18n="dev_contact_facebook">Facebook</div>
                                    <div class="font-bold text-sm">@kader.traore.1848</div>
                                </div>
                                <i class="fa-solid fa-arrow-right text-blue-600 group-hover:translate-x-1 transition"></i>
                            </a>
                            
                            <!-- Email -->
                            <a href="mailto:kadertraore224@gmail.com?subject=Cr√©ation%20de%20site%20internet&body=Bonjour%20Kader%2C%20je%20souhaite%20discuter%20de%20la%20cr√©ation%20d%27un%20site%20internet" 
                               class="flex items-center gap-3 p-3 bg-red-500/10 hover:bg-red-500/20 rounded-xl transition-all group">
                                <div class="w-10 h-10 bg-red-500 rounded-full flex items-center justify-center text-white text-xl group-hover:scale-110 transition">
                                    <i class="fa-regular fa-envelope"></i>
                                </div>
                                <div class="flex-1 text-left">
                                    <div class="text-[10px] uppercase text-gray-400" data-i18n="dev_contact_email">Email</div>
                                    <div class="font-bold text-sm">kadertraore224@gmail.com</div>
                                </div>
                                <i class="fa-solid fa-arrow-right text-red-500 group-hover:translate-x-1 transition"></i>
                            </a>
                        </div>
                        
                        <!-- Boutons d'action rapide -->
                        <div class="flex flex-wrap gap-3 justify-center md:justify-start">
                            <button onclick="contactDeveloppeur('whatsapp')" 
                                    class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-full font-black text-xs uppercase flex items-center gap-2 transition-all hover:scale-105 shadow-lg">
                                <i class="fa-brands fa-whatsapp text-lg"></i>
                                <span data-i18n="dev_contact_whatsapp">WhatsApp</span>
                            </button>
                            <button onclick="contactDeveloppeur('facebook')" 
                                    class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-full font-black text-xs uppercase flex items-center gap-2 transition-all hover:scale-105">
                                <i class="fa-brands fa-facebook-f"></i>
                                <span data-i18n="dev_contact_facebook">Facebook</span>
                            </button>
                            <button onclick="contactDeveloppeur('email')" 
                                    class="bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-full font-black text-xs uppercase flex items-center gap-2 transition-all hover:scale-105">
                                <i class="fa-regular fa-envelope"></i>
                                <span data-i18n="dev_contact_email">Email</span>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Tags de comp√©tences -->
                <div class="mt-8 pt-6 border-t border-white/10">
                    <div class="flex flex-wrap gap-2 justify-center">
                        <span class="text-[8px] bg-[#c5a059]/20 text-[#c5a059] px-3 py-1 rounded-full border border-[#c5a059]/30 hover:bg-[#c5a059] hover:text-black transition-all cursor-default">#HTML/CSS</span>
                        <span class="text-[8px] bg-[#c5a059]/20 text-[#c5a059] px-3 py-1 rounded-full border border-[#c5a059]/30 hover:bg-[#c5a059] hover:text-black transition-all cursor-default">#JavaScript</span>
                        <span class="text-[8px] bg-[#c5a059]/20 text-[#c5a059] px-3 py-1 rounded-full border border-[#c5a059]/30 hover:bg-[#c5a059] hover:text-black transition-all cursor-default">#React</span>
                        <span class="text-[8px] bg-[#c5a059]/20 text-[#c5a059] px-3 py-1 rounded-full border border-[#c5a059]/30 hover:bg-[#c5a059] hover:text-black transition-all cursor-default">#Node.js</span>
                        <span class="text-[8px] bg-[#c5a059]/20 text-[#c5a059] px-3 py-1 rounded-full border border-[#c5a059]/30 hover:bg-[#c5a059] hover:text-black transition-all cursor-default">#PHP</span>
                        <span class="text-[8px] bg-[#c5a059]/20 text-[#c5a059] px-3 py-1 rounded-full border border-[#c5a059]/30 hover:bg-[#c5a059] hover:text-black transition-all cursor-default">#MySQL</span>
                        <span class="text-[8px] bg-[#c5a059]/20 text-[#c5a059] px-3 py-1 rounded-full border border-[#c5a059]/30 hover:bg-[#c5a059] hover:text-black transition-all cursor-default">#E-commerce</span>
                        <span class="text-[8px] bg-[#c5a059]/20 text-[#c5a059] px-3 py-1 rounded-full border border-[#c5a059]/30 hover:bg-[#c5a059] hover:text-black transition-all cursor-default">#Responsive</span>
                        <span class="text-[8px] bg-[#c5a059]/20 text-[#c5a059] px-3 py-1 rounded-full border border-[#c5a059]/30 hover:bg-[#c5a059] hover:text-black transition-all cursor-default">#SEO</span>
                        <span class="text-[8px] bg-[#c5a059]/20 text-[#c5a059] px-3 py-1 rounded-full border border-[#c5a059]/30 hover:bg-[#c5a059] hover:text-black transition-all cursor-default">#PWA</span>
                    </div>
                </div>
                
                <!-- Badges de garantie -->
                <div class="mt-6 flex flex-wrap items-center justify-center gap-6 text-[10px] text-gray-400">
                    <div class="flex items-center gap-2">
                        <i class="fa-solid fa-circle-check text-[#c5a059]"></i>
                        <span data-i18n="dev_guarantee_payment">Paiement s√©curis√©</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <i class="fa-solid fa-circle-check text-[#c5a059]"></i>
                        <span data-i18n="dev_guarantee_delivery">Livraison du code</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <i class="fa-solid fa-circle-check text-[#c5a059]"></i>
                        <span data-i18n="dev_guarantee_satisfaction">Garantie satisfait</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <i class="fa-solid fa-circle-check text-[#c5a059]"></i>
                        <span data-i18n="dev_guarantee_support">Support 24/7</span>
                    </div>
                </div>
            </div>
            
            <!-- Petite banni√®re flottante -->
            <div class="mt-6 text-center">
                <p class="text-[10px] text-gray-500">
                    <i class="fa-solid fa-star text-[#c5a059]"></i>
                    <span data-i18n="dev_footer">D√©j√† plus de 5 sites cr√©√©s pour des clients satisfaits</span>
                    <i class="fa-solid fa-star text-[#c5a059]"></i>
                </p>
            </div>
        </div>
    </div>
</section>

<!-- FOOTER -->
<footer class="bg-white border-t pt-12 pb-6">
    <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-10">
            <div class="text-center md:text-left">
                <div class="flex items-center justify-center md:justify-start gap-2 mb-4 cursor-pointer" onclick="scrollToTop()">
                    <img src="https://i.postimg.cc/qMqtFGM2/1770342273452.png" class="h-8 w-8 rounded-full">
                    <span class="text-xl font-black italic text-[#c5a059]">LATYFA</span>
                </div>
                <p class="text-gray-500 text-[10px] uppercase font-bold" data-i18n="footer_satisfaction">Votre satisfaction, notre priorit√©.</p>
            </div>
            <div class="text-center md:text-left">
                <h4 class="text-[11px] font-black uppercase text-gray-800 mb-4 tracking-widest" data-i18n="footer_help">Aide</h4>
                <ul class="text-gray-500 text-[10px] space-y-2 uppercase font-bold">
                    <li class="cursor-pointer hover:text-[#ff6600] transition-colors" onclick="ouvrirCGV()" data-i18n="footer_terms">Conditions de Vente</li>
                    <li class="cursor-pointer hover:text-[#ff6600] transition-colors" onclick="suivreColis()" data-i18n="footer_track">Suivi Colis</li>
                    <li class="cursor-pointer hover:text-[#ff6600] transition-colors" onclick="ouvrirAdvent()" data-i18n="footer_advent">üìÖ Calendrier Avent</li>
                </ul>
            </div>
            <div class="text-center md:text-left">
                <h4 class="text-[11px] font-black uppercase text-gray-800 mb-4 tracking-widest" data-i18n="footer_shop">Boutique</h4>
                <p class="text-gray-500 text-[10px] uppercase font-bold" data-i18n="footer_location">üìç Abidjan, C√¥te d'Ivoire</p>
            </div>
            <div class="text-center md:text-left">
                <h4 class="text-[11px] font-black uppercase text-gray-800 mb-4 tracking-widest" data-i18n="footer_follow">Suivez-nous</h4>
                <div class="flex justify-center md:justify-start gap-3">
                    <a href="https://wa.me/2250709002881" target="_blank" class="h-8 w-8 rounded-full bg-gray-100 flex items-center justify-center text-gray-600 hover:bg-[#25D366] hover:text-white transition"><i class="fa-brands fa-whatsapp"></i></a>
                    <a href="#" target="_blank" class="h-8 w-8 rounded-full bg-gray-100 flex items-center justify-center text-gray-600 hover:bg-[#1877F2] hover:text-white transition"><i class="fa-brands fa-facebook-f"></i></a>
                    <a href="#" target="_blank" class="h-8 w-8 rounded-full bg-gray-100 flex items-center justify-center text-gray-600 hover:bg-black hover:text-white transition"><i class="fa-brands fa-tiktok"></i></a>
                </div>
            </div>
        </div>
        
        <div class="flex flex-col items-center justify-center py-4 border-t border-gray-100 mt-6">
            <div class="flex items-center gap-2 text-[#c5a059] mb-1">
                <i class="fa-solid fa-eye text-[10px]"></i>
                <span id="visitor-count" class="text-[12px] font-black tracking-widest">0000</span>
            </div>
            <p class="text-[8px] text-gray-400 uppercase font-bold tracking-[0.2em]" data-i18n="visitors">Visiteurs ont explor√© l'univers Latyfa shop</p>
        </div>
        
        <div class="border-t pt-6 text-center text-gray-400 text-[9px] font-bold uppercase tracking-widest">
            <span data-i18n="copyright">¬© 2026 LATYFA BUSINESS |</span> <button onclick="ouvrirCGV()" class="underline text-[#ff6600] hover:text-[#c5a059] transition-colors" data-i18n="legal">Juridique</button>
        </div>
    </div>
</footer>

<script>
    // ==================== FONCTIONS DE TRADUCTION ====================

    // Fonction pour ouvrir/fermer le dropdown de langue
    function toggleLanguageDropdown() {
        const dropdown = document.getElementById('languageDropdown');
        dropdown.classList.toggle('show');
    }

    // Fermer le dropdown si on clique ailleurs
    document.addEventListener('click', function(event) {
        const dropdown = document.getElementById('languageDropdown');
        const btn = document.getElementById('currentLanguageBtn');
        
        if (!btn.contains(event.target) && !dropdown.contains(event.target)) {
            dropdown.classList.remove('show');
        }
    });

    // Fonction pour ouvrir/fermer le menu mobile
    function toggleMobileMenu() {
        const menu = document.getElementById('mobileMenu');
        menu.classList.toggle('active');
    }

    function closeMobileMenu() {
        const menu = document.getElementById('mobileMenu');
        menu.classList.remove('active');
    }

    // Fonction pour changer la langue
    function changeLanguage(lang) {
        currentLanguage = lang;
        localStorage.setItem('latyfa_language', lang);
        
        // Mettre √† jour le bouton
        document.getElementById('currentLanguageText').innerText = lang.toUpperCase();
        
        // Mettre √† jour la classe active dans le dropdown
        document.querySelectorAll('.language-option').forEach(opt => {
            opt.classList.remove('active');
            if (opt.dataset.lang === lang) {
                opt.classList.add('active');
            }
        });
        
        // Fermer le dropdown
        document.getElementById('languageDropdown').classList.remove('show');
        
        // Traduire tous les √©l√©ments
        translatePage();
        
        // Re-rendre les produits pour mettre √† jour les textes
        render();
        
        showToast(`üåç Langue chang√©e en ${lang === 'fr' ? 'Fran√ßais' : lang === 'en' ? 'Anglais' : 'Espagnol'}`);
    }

    // Fonction pour traduire la page
    function translatePage() {
        const t = translations[currentLanguage];
        
        // Traduire les √©l√©ments avec des attributs data-i18n
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            if (t[key]) {
                el.innerText = t[key];
            }
        });
        
        // Traduire les placeholders
        document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
            const key = el.getAttribute('data-i18n-placeholder');
            if (t[key]) {
                el.placeholder = t[key];
            }
        });
        
        // Traduire les cat√©gories dans le s√©lecteur
        document.querySelectorAll('.category-static-item span').forEach(el => {
            const catId = el.closest('.category-static-item')?.getAttribute('onclick')?.match(/'([^']+)'/)?.[1];
            if (catId && catId !== 'tous' && t.categories && t.categories[catId]) {
                el.innerText = t.categories[catId];
            } else if (catId === 'tous') {
                el.innerText = t.all;
            }
        });
    }

    // Fonction pour initialiser la langue
    function initLanguage() {
        const savedLang = localStorage.getItem('latyfa_language');
        if (savedLang && ['fr', 'en', 'es'].includes(savedLang)) {
            currentLanguage = savedLang;
        } else {
            currentLanguage = 'fr';
        }
        
        document.getElementById('currentLanguageText').innerText = currentLanguage.toUpperCase();
        
        document.querySelectorAll('.language-option').forEach(opt => {
            opt.classList.remove('active');
            if (opt.dataset.lang === currentLanguage) {
                opt.classList.add('active');
            }
        });
        
        translatePage();
    }

    // ==================== FONCTIONS POUR CAT√âGORIES HORIZONTALES STATIQUES ====================

    // Fonction pour afficher les cat√©gories horizontalement
    function renderHorizontalCategories() {
        const container = document.getElementById('categories-static');
        if (!container) return;
        
        // R√©cup√©rer la cat√©gorie active depuis le filtre actuel
        const activeFilter = document.getElementById('product-grid')?.getAttribute('data-current-filter') || 'tous';
        
        container.innerHTML = `
            <div class="category-static-item ${activeFilter === 'tous' ? 'active' : ''}" onclick="filterByCategoryStatic('tous', this)">
                <i class="fa-solid fa-crown"></i>
                <span data-i18n="all">Tout voir</span>
            </div>
            ${categories.map(c => `
                <div class="category-static-item ${activeFilter === c.id ? 'active' : ''}" onclick="filterByCategoryStatic('${c.id}', this)">
                    <i class="fa-solid ${c.icone}"></i>
                    <span>${c.nom}</span>
                </div>
            `).join('')}
        `;
        
        // Traduire les noms des cat√©gories si la langue a chang√©
        if (translations[currentLanguage] && translations[currentLanguage].categories) {
            document.querySelectorAll('.category-static-item span').forEach((el, index) => {
                if (index > 0) { // Ignorer "Tout voir"
                    const catId = categories[index - 1]?.id;
                    if (catId && translations[currentLanguage].categories[catId]) {
                        el.innerText = translations[currentLanguage].categories[catId];
                    }
                } else {
                    // Traduire "Tout voir"
                    el.innerText = translations[currentLanguage].all || 'Tout voir';
                }
            });
        }
    }

    // Fonction pour filtrer par cat√©gorie (version statique)
    function filterByCategoryStatic(categoryId, element) {
        // Retirer la classe active de tous les items
        document.querySelectorAll('.category-static-item').forEach(item => {
            item.classList.remove('active');
        });
        
        // Ajouter la classe active √† l'√©l√©ment cliqu√©
        if (element) {
            element.classList.add('active');
        }
        
        // Sauvegarder le filtre actif
        document.getElementById('product-grid')?.setAttribute('data-current-filter', categoryId);
        
        // Filtrer les produits
        render(categoryId);
        
        // Optionnel : faire d√©filer vers le haut des produits
        document.getElementById('collection').scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
    
    // ==================== FONCTION CONTACT D√âVELOPPEUR ====================
    function contactDeveloppeur(method) {
        if (method === 'whatsapp') {
            const projet = prompt("üìù Quel type de site voulez-vous cr√©er ?\n(E-commerce, Vitrine, Blog, Application...)");
            if (!projet) return;
            
            const budget = prompt("üí∞ Quel est votre budget approximatif ?");
            if (!budget) return;
            
            const message = `üëã Bonjour Kader ! Je souhaite cr√©er un site internet.
            
    üìã Projet : ${projet}
    üí∞ Budget : ${budget}
    üìÖ Prise de contact : ${new Date().toLocaleDateString()}

    Merci de me contacter pour discuter de mon projet !`;
            
            window.open(`https://wa.me/2250506113292?text=${encodeURIComponent(message)}`);
            showToast("‚úÖ Message pr√©par√© ! Vous allez √™tre redirig√© vers WhatsApp");
        }
        
        else if (method === 'facebook') {
            window.open('https://www.facebook.com/kader.traore.1848');
            showToast("üëã Vous allez √™tre redirig√© vers Facebook");
        }
        
        else if (method === 'email') {
            const sujet = prompt("üìß Sujet de votre message :", "Cr√©ation de site internet");
            if (!sujet) return;
            
            const message = prompt("üìù Votre message :", "Bonjour Kader, je souhaite discuter de la cr√©ation d'un site internet.");
            if (!message) return;
            
            // Ouvrir le client mail par d√©faut
            window.location.href = `mailto:kadertraore224@gmail.com?subject=${encodeURIComponent(sujet)}&body=${encodeURIComponent(message)}`;
            showToast("üìß Ouverture de votre application mail...");
        }
    }

    // Fonction pour copier l'email
    function copierEmail() {
        navigator.clipboard.writeText('kadertraore224@gmail.com');
        showToast("üìß Email copi√© !");
    }

    // Fonction pour copier le num√©ro
    function copierNumero() {
        navigator.clipboard.writeText('0506113292');
        showToast("üìã Num√©ro copi√© !");
    }
    
    // ==================== INITIALISATION EMAILJS ====================
    (function() {
        try {
            emailjs.init("FT9CT6go4Kj1aFegB");
        } catch(e) {
            console.log("EmailJS non initialis√©");
        }
    })();

    // ==================== VARIABLES GLOBALES ====================
    let products = [];
    let cart = [];
    let currentProduct = null;
    let remiseCodePromo = 0;
    let idEnCoursDeModification = null;
    let pointsFidelite = 0;
    let wishlist = [];
    let comparateur = [];
    let avis = [];
    let currentRating = 0;
    let cadeauMystere = null;
    
    let clients = [];
    let messages = [];
    let utilisateurConnecte = null;
    
    // ==================== SYST√àME DE TRADUCTION ====================
    let currentLanguage = 'fr'; // Langue par d√©faut

    const translations = {
        fr: {
            // Hero section
            'hero_title': 'La Boutique du 225',
            'hero_subtitle': 'Bijoux, v√™tements, parfum...',
            'hero_btn': 'D√©couvrir la Collection',
            
            // Header
            'search_placeholder': 'Rechercher un article...',
            'login': 'Se connecter',
            'cart': 'Panier',
            
            // Banni√®res
            'promo_text': '‚ú® Promo Exclusive -20% d√®s 20.000 F d\'achat du 14 au 28 f√©v 2026:',
            'flash_sale': '‚ö° FLASH SALE : -30% SUR LES BIJOUX - FIN DANS',
            'marquee': '‚ú® BON MOIS DE RAMADAN √Ä TOUS LES MUSULMANS ! ‚Äî üíé NOUVELLE COLLECTION DE BIJOUX DISPONIBLE ‚Äî üöö EXP√âDITION SOUS 48H DANS TOUTE LA C√îTE D\'IVOIRE ‚Äî',
            
            // Sections
            'popular_products': 'PRODUITS POPULAIRES',
            'our_universes': 'Nos Univers',
            'all': 'Tout voir',
            'categories': {
                'bijoux': 'Bijoux',
                'vetements': 'V√™tements',
                'chaussures': 'Chaussures',
                'sac': 'Sacs √† main',
                'parfum': 'Parfums',
                'hanche': 'Perles de hanche',
                'autres': 'Autres'
            },
            
            // Produits
            'view_product': 'Voir l\'article',
            'sold_out': 'INDISPONIBLE',
            'new': 'NOUVEAU',
            'luxe': 'LUXE',
            'stock_alert': 'üî• PLUS QUE QUELQUES-UNS',
            
            // Boutons
            'add_to_cart': 'Ajouter au panier',
            'buy_now': 'Acheter maintenant',
            'view_details': 'Voir d√©tails',
            
            // Footer
            'footer_help': 'Aide',
            'footer_terms': 'Conditions de Vente',
            'footer_track': 'Suivi Colis',
            'footer_advent': 'üìÖ Calendrier Avent',
            'footer_shop': 'Boutique',
            'footer_follow': 'Suivez-nous',
            'footer_satisfaction': 'Votre satisfaction, notre priorit√©.',
            'footer_location': 'üìç Abidjan, C√¥te d\'Ivoire',
            'visitors': 'Visiteurs ont explor√© l\'univers Latyfa shop',
            'copyright': '¬© 2026 LATYFA BUSINESS |',
            'legal': 'Juridique',
            
            // Points fid√©lit√©
            'your_points': 'Vos points',
            'next_level': 'Prochain palier: 100 pts = -10%',
            
            // D√©veloppeur
            'dev_title': 'VOUS VOULEZ CR√âER VOTRE SITE INTERNET ?',
            'dev_name': 'TRAORE ABOUBAMANE KADER',
            'dev_role': 'D√©veloppeur Web & Mobile',
            'dev_desc': 'Vous avez aim√© ce site ? Je peux cr√©er le v√¥tre ! Site e-commerce, boutique en ligne, landing page, application mobile... Design moderne, responsive, et adapt√© √† vos besoins.',
            'dev_stats_sites': 'Sites cr√©√©s',
            'dev_stats_support': 'Support',
            'dev_stats_satisfait': 'Satisfait',
            'dev_contact_whatsapp': 'WhatsApp',
            'dev_contact_facebook': 'Facebook',
            'dev_contact_email': 'Email',
            'dev_guarantee_payment': 'Paiement s√©curis√©',
            'dev_guarantee_delivery': 'Livraison du code',
            'dev_guarantee_satisfaction': 'Garantie satisfait',
            'dev_guarantee_support': 'Support 24/7',
            'dev_footer': 'D√©j√† plus de 5 sites cr√©√©s pour des clients satisfaits'
        },
        
        en: {
            'hero_title': 'The Shop of 225',
            'hero_subtitle': 'Jewelry, clothing, perfume...',
            'hero_btn': 'Discover the Collection',
            
            // Header
            'search_placeholder': 'Search for an item...',
            'login': 'Login',
            'cart': 'Cart',
            
            // Banni√®res
            'promo_text': '‚ú® Exclusive Promo -20% from 20.000 F purchase Feb 14-28 2026:',
            'flash_sale': '‚ö° FLASH SALE : -30% ON JEWELRY - ENDS IN',
            'marquee': '‚ú® RAMADAN MUBARAK TO ALL MUSLIMS! ‚Äî üíé NEW JEWELRY COLLECTION AVAILABLE ‚Äî üöö SHIPPING WITHIN 48H ACROSS IVORY COAST ‚Äî',
            
            // Sections
            'popular_products': 'POPULAR PRODUCTS',
            'our_universes': 'Our Universes',
            'all': 'View all',
            'categories': {
                'bijoux': 'Jewelry',
                'vetements': 'Clothing',
                'chaussures': 'Shoes',
                'sac': 'Handbags',
                'parfum': 'Perfumes',
                'hanche': 'Hip beads',
                'autres': 'Others'
            },
            
            // Produits
            'view_product': 'View product',
            'sold_out': 'SOLD OUT',
            'new': 'NEW',
            'luxe': 'LUXURY',
            'stock_alert': 'üî• ONLY FEW LEFT',
            
            // Boutons
            'add_to_cart': 'Add to cart',
            'buy_now': 'Buy now',
            'view_details': 'View details',
            
            // Footer
            'footer_help': 'Help',
            'footer_terms': 'Terms of Sale',
            'footer_track': 'Track Order',
            'footer_advent': 'üìÖ Advent Calendar',
            'footer_shop': 'Shop',
            'footer_follow': 'Follow us',
            'footer_satisfaction': 'Your satisfaction, our priority.',
            'footer_location': 'üìç Abidjan, Ivory Coast',
            'visitors': 'Visitors explored the Latyfa shop universe',
            'copyright': '¬© 2026 LATYFA BUSINESS |',
            'legal': 'Legal',
            
            // Points fid√©lit√©
            'your_points': 'Your points',
            'next_level': 'Next level: 100 pts = -10%',
            
            // D√©veloppeur
            'dev_title': 'DO YOU WANT TO CREATE YOUR WEBSITE?',
            'dev_name': 'TRAORE ABOUBAMANE KADER',
            'dev_role': 'Web & Mobile Developer',
            'dev_desc': 'Did you like this site? I can create yours! E-commerce site, online store, landing page, mobile app... Modern design, responsive, and tailored to your needs.',
            'dev_stats_sites': 'Sites created',
            'dev_stats_support': 'Support',
            'dev_stats_satisfait': 'Satisfied',
            'dev_contact_whatsapp': 'WhatsApp',
            'dev_contact_facebook': 'Facebook',
            'dev_contact_email': 'Email',
            'dev_guarantee_payment': 'Secure payment',
            'dev_guarantee_delivery': 'Code delivery',
            'dev_guarantee_satisfaction': 'Satisfaction guarantee',
            'dev_guarantee_support': '24/7 Support',
            'dev_footer': 'Already more than 5 sites created for satisfied customers'
        },
        
        es: {
            'hero_title': 'La Tienda del 225',
            'hero_subtitle': 'Joyas, ropa, perfume...',
            'hero_btn': 'Descubrir la Colecci√≥n',
            
            // Header
            'search_placeholder': 'Buscar art√≠culo...',
            'login': 'Iniciar sesi√≥n',
            'cart': 'Carrito',
            
            // Banni√®res
            'promo_text': '‚ú® Promo Exclusiva -20% desde 20.000 F de compra del 14 al 28 feb 2026:',
            'flash_sale': '‚ö° VENTA FLASH : -30% EN JOYAS - TERMINA EN',
            'marquee': '‚ú® ¬°FELIZ RAMAD√ÅN A TODOS LOS MUSULMANES! ‚Äî üíé NUEVA COLECCI√ìN DE JOYAS DISPONIBLE ‚Äî üöö ENV√çO EN 48H EN TODA COSTA DE MARFIL ‚Äî',
            
            // Sections
            'popular_products': 'PRODUCTOS POPULARES',
            'our_universes': 'Nuestros Universos',
            'all': 'Ver todo',
            'categories': {
                'bijoux': 'Joyas',
                'vetements': 'Ropa',
                'chaussures': 'Zapatos',
                'sac': 'Bolsos',
                'parfum': 'Perfumes',
                'hanche': 'Abalorios de cadera',
                'autres': 'Otros'
            },
            
            // Produits
            'view_product': 'Ver producto',
            'sold_out': 'AGOTADO',
            'new': 'NUEVO',
            'luxe': 'LUJO',
            'stock_alert': 'üî• SOLO QUEDAN POCOS',
            
            // Boutons
            'add_to_cart': 'A√±adir al carrito',
            'buy_now': 'Comprar ahora',
            'view_details': 'Ver detalles',
            
            // Footer
            'footer_help': 'Ayuda',
            'footer_terms': 'Condiciones de Venta',
            'footer_track': 'Seguimiento de Pedido',
            'footer_advent': 'üìÖ Calendario de Adviento',
            'footer_shop': 'Tienda',
            'footer_follow': 'S√≠guenos',
            'footer_satisfaction': 'Tu satisfacci√≥n, nuestra prioridad.',
            'footer_location': 'üìç Abiy√°n, Costa de Marfil',
            'visitors': 'Visitantes exploraron el universo Latyfa shop',
            'copyright': '¬© 2026 LATYFA BUSINESS |',
            'legal': 'Legal',
            
            // Points fid√©lit√©
            'your_points': 'Tus puntos',
            'next_level': 'Siguiente nivel: 100 pts = -10%',
            
            // D√©veloppeur
            'dev_title': '¬øQUIERES CREAR TU SITIO WEB?',
            'dev_name': 'TRAORE ABOUBAMANE KADER',
            'dev_role': 'Desarrollador Web & M√≥vil',
            'dev_desc': '¬øTe gust√≥ este sitio? ¬°Puedo crear el tuyo! Sitio de e-commerce, tienda online, landing page, aplicaci√≥n m√≥vil... Dise√±o moderno, responsive y adaptado a tus necesidades.',
            'dev_stats_sites': 'Sitios creados',
            'dev_stats_support': 'Soporte',
            'dev_stats_satisfait': 'Satisfecho',
            'dev_contact_whatsapp': 'WhatsApp',
            'dev_contact_facebook': 'Facebook',
            'dev_contact_email': 'Email',
            'dev_guarantee_payment': 'Pago seguro',
            'dev_guarantee_delivery': 'Entrega del c√≥digo',
            'dev_guarantee_satisfaction': 'Garant√≠a de satisfacci√≥n',
            'dev_guarantee_support': 'Soporte 24/7',
            'dev_footer': 'M√°s de 5 sitios creados para clientes satisfechos'
        }
    };
    
    // ==================== VARIABLES PARRAINAGE ====================
    let parrainage = {
        parrains: {},
        filleuls: {},
        paliers: [
            { seuil: 1, gain: 1000, nom: "Bronze" },
            { seuil: 5, gain: 10000, nom: "Argent" },
            { seuil: 10, gain: 25000, nom: "Or" },
            { seuil: 20, gain: "VIP", nom: "Platine" }
        ]
    };
    
    // ==================== VARIABLES SUIVI ====================
    let suiviInterval = null;
    let etapeSuivi = 2;
    let positionsSimulees = [
        { top: 40, left: 30 },
        { top: 45, left: 40 },
        { top: 50, left: 50 },
        { top: 55, left: 60 },
        { top: 60, left: 70 }
    ];
    
    // ==================== VARIABLES CHAT IA ====================
    let iaActif = false;
    const reponseIA = {
        "bonjour": "Bonjour ! üëã Comment puis-je vous aider aujourd'hui ?",
        "prix": "Les prix varient de 5.000 F √† 150.000 F selon les articles. Vous cherchez quelque chose en particulier ?",
        "combien": "Les prix sont affich√©s sur chaque produit. Puis-je vous aider √† trouver un article sp√©cifique ?",
        "livraison": "Nous livrons partout en C√¥te d'Ivoire ! √Ä Abidjan : 24-48h, √† l'int√©rieur : 2-4 jours. Frais de 1.500 F √† 3.000 F.",
        "paiement": "Nous acceptons Wave, Orange Money, MTN Money et le cash √† la livraison. Tous les paiements sont s√©curis√©s !",
        "retour": "Les retours sont possibles sous 7 jours apr√®s r√©ception. Contactez-nous pour plus d'informations.",
        "contact": "Vous pouvez nous joindre au 0709002881 sur WhatsApp, ou utiliser le chat en direct.",
        "catalogue": "Nous avons des bijoux, sacs, parfums, v√™tements et chaussures. Quelle cat√©gorie vous int√©resse ?",
        "merci": "Avec plaisir ! N'h√©sitez pas si vous avez d'autres questions. üòä",
        "au revoir": "Au revoir ! Merci de votre visite et √† bient√¥t sur Latyfa Shop !"
    };
    
    const tarifsLivraison = {
        "abidjan_nord": { nom: "Abidjan Nord", prix: 1500 },
        "abidjan_sud": { nom: "Abidjan Sud", prix: 2000 },
        "interieur": { nom: "Int√©rieur CI", prix: 3000 },
        "bouake": { nom: "Retrait Boutique", prix: 0 }
    };
    
    let categories = [
        { id: 'bijoux', nom: 'Bijoux', icone: 'fa-gem' },
        { id: 'vetements', nom: 'V√™tements', icone: 'fa-shirt' },
        { id: 'chaussures', nom: 'Chaussures', icone: 'fa-shoe-prints' },
        { id: 'sac', nom: 'Sacs √† main', icone: 'fa-bag-shopping' },
        { id: 'parfum', nom: 'Parfums', icone: 'fa-spray-can-sparkles' },
        { id: 'hanche', nom: 'Perles de hanche', icone: 'fa-circle-nodes' },
        { id: 'autres', nom: 'Autres', icone: 'fa-plus' }
    ];
    
    const MAX_TENTATIVES = 1;
    const prizes = ["-5%", "REESSAYER", "-10%", "CADEAU", "-15%", "REESSAYER", "LIVRAISON", "REESSAYER"];
    
    const avisPredefinis = [
        { nom: "Mariam K.", note: 5, commentaire: "Super qualit√©, livraison rapide !", date: "2026-02-10", photo: "https://randomuser.me/api/portraits/women/44.jpg" },
        { nom: "Aminata D.", note: 5, commentaire: "Les bijoux sont magnifiques, je recommande !", date: "2026-02-09", photo: "https://randomuser.me/api/portraits/women/45.jpg" },
        { nom: "Fatou S.", note: 4, commentaire: "Tr√®s belle boutique, service client au top", date: "2026-02-08", photo: "https://randomuser.me/api/portraits/women/46.jpg" },
        { nom: "Kadiatou B.", note: 5, commentaire: "Livraison express, colis bien emball√©", date: "2026-02-07", photo: "https://randomuser.me/api/portraits/women/47.jpg" }
    ];
    
    const notifications = [
        "Une cliente √† Abidjan vient d'acheter des Perles de hanche ‚ú®",
        "Nouveau colis exp√©di√© vers Yamoussoukro üì¶",
        "Une commande de Parfum Prestige vient d'√™tre valid√©e üïØÔ∏è",
        "5 personnes consultent actuellement ce produit üî•",
        "Un ensemble de bijoux a √©t√© ajout√© au panier √† Bouak√© üíé",
        "Livraison express pour un client √† Marcory üöö",
        "Nouvelle cliente fid√®le - Merci Mariam ! üåü"
    ];

    // ==================== MODE MAINTENANCE CORRIG√â ====================
    function checkMaintenance() {
        const maintenance = localStorage.getItem('latyfa_maintenance') === 'true';
        const overlay = document.getElementById('maintenanceOverlay');
        
        // V√©rifier si l'utilisateur est connect√© ET est admin
        const isAdmin = utilisateurConnecte && utilisateurConnecte.isAdmin === true;
        
        console.log("Maintenance:", maintenance, "IsAdmin:", isAdmin); // Pour d√©boguer
        
        if (maintenance && !isAdmin) {
            overlay.style.display = 'flex';
            document.body.style.overflow = 'hidden';
            
            // Cacher le contenu principal
            const mainContent = document.querySelector('body > *:not(#maintenanceOverlay):not(#loader)');
            if (mainContent) {
                mainContent.style.display = 'none';
            }
        } else {
            overlay.style.display = 'none';
            document.body.style.overflow = 'auto';
            
            // R√©afficher le contenu principal
            const mainContent = document.querySelector('body > *:not(#maintenanceOverlay):not(#loader)');
            if (mainContent) {
                mainContent.style.display = 'block';
            }
        }
    }

    function setMaintenance(actif) {
        localStorage.setItem('latyfa_maintenance', actif ? 'true' : 'false');
        
        const btnOn = document.getElementById('maintenanceOn');
        const btnOff = document.getElementById('maintenanceOff');
        
        if (actif) {
            btnOn.classList.add('bg-[#c5a059]', 'text-white');
            btnOn.classList.remove('bg-gray-200', 'text-gray-600');
            btnOff.classList.remove('bg-[#c5a059]', 'text-white');
            btnOff.classList.add('bg-gray-200', 'text-gray-600');
            showToast("üîß Mode maintenance ACTIV√â - Seuls les admins peuvent voir le site");
        } else {
            btnOff.classList.add('bg-[#c5a059]', 'text-white');
            btnOff.classList.remove('bg-gray-200', 'text-gray-600');
            btnOn.classList.remove('bg-[#c5a059]', 'text-white');
            btnOn.classList.add('bg-gray-200', 'text-gray-600');
            showToast("‚úÖ Mode maintenance D√âSACTIV√â - Site accessible √† tous");
        }
        
        checkMaintenance();
    }

    // ==================== FONCTIONS CHAT IA ====================
    function toggleChat() {
        document.getElementById('chatWindow').classList.toggle('active');
        if (document.getElementById('chatWindow').classList.contains('active')) {
            document.getElementById('chatBadge').style.display = 'none';
        }
    }
    
    function toggleIAMode() {
        iaActif = !iaActif;
        document.getElementById('iaMode').innerText = iaActif ? 'ü§ñ IA ON' : 'ü§ñ IA OFF';
        
        const chatDiv = document.getElementById('chatMessages');
        chatDiv.innerHTML += `
            <div class="chat-message support">
                <div class="message-bubble">
                    ${iaActif ? 'ü§ñ Mode IA activ√© ! Je r√©pondrai automatiquement √† vos questions.' : 'üë®‚Äçüíº Mode conseiller humain activ√©. Un vrai conseiller vous r√©pondra.'}
                </div>
                <div class="message-time">√† l'instant</div>
            </div>
        `;
        chatDiv.scrollTop = chatDiv.scrollHeight;
    }
    
    function sendChatMessage() {
        const input = document.getElementById('chatInput');
        const msg = input.value.trim();
        if (!msg) return;
        
        const chatDiv = document.getElementById('chatMessages');
        const now = new Date();
        const timeStr = now.getHours() + ':' + now.getMinutes().toString().padStart(2, '0');
        
        chatDiv.innerHTML += `
            <div class="chat-message user">
                <div class="message-bubble">${msg}</div>
                <div class="message-time">${timeStr}</div>
            </div>
        `;
        
        input.value = '';
        chatDiv.scrollTop = chatDiv.scrollHeight;
        
        if (iaActif) {
            setTimeout(() => {
                const msgLower = msg.toLowerCase();
                let reponse = "Je n'ai pas compris. Pouvez-vous reformuler ? Ou je peux transmettre √† un conseiller humain.";
                
                for (const [motCle, texte] of Object.entries(reponseIA)) {
                    if (msgLower.includes(motCle)) {
                        reponse = texte;
                        break;
                    }
                }
                
                chatDiv.innerHTML += `
                    <div class="chat-message support">
                        <div class="message-bubble">ü§ñ ${reponse}</div>
                        <div class="message-time">${new Date().getHours() + ':' + new Date().getMinutes().toString().padStart(2, '0')}</div>
                    </div>
                `;
                chatDiv.scrollTop = chatDiv.scrollHeight;
            }, 1000);
        } else {
            chatDiv.innerHTML += `
                <div class="chat-message support">
                    <div class="message-bubble">Merci ! Un conseiller vous r√©pondra d√®s que possible.</div>
                    <div class="message-time">${timeStr}</div>
                </div>
            `;
            chatDiv.scrollTop = chatDiv.scrollHeight;
        }
    }
    
    // ==================== FONCTIONS SUIVI LIVRAISON ====================
    function ouvrirSuivi(commandeId) {
        document.getElementById('suiviModal').classList.add('active');
        
        etapeSuivi = 2;
        mettreAJourSuivi();
        
        if (suiviInterval) clearInterval(suiviInterval);
        suiviInterval = setInterval(simulerAvancement, 10000);
    }
    
    function fermerSuivi() {
        document.getElementById('suiviModal').classList.remove('active');
        if (suiviInterval) {
            clearInterval(suiviInterval);
            suiviInterval = null;
        }
    }
    
    function mettreAJourSuivi() {
        for (let i = 1; i <= 5; i++) {
            const step = document.getElementById('step' + i);
            if (step) {
                step.className = 'step-indicator';
                if (i < etapeSuivi) {
                    step.classList.add('completed');
                } else if (i === etapeSuivi) {
                    step.classList.add('current');
                } else {
                    step.classList.add('pending');
                }
            }
        }
        
        const marker = document.getElementById('livreurMarker');
        if (marker && etapeSuivi <= 5) {
            const pos = positionsSimulees[etapeSuivi - 1];
            marker.style.top = pos.top + '%';
            marker.style.left = pos.left + '%';
        }
        
        const etapes = [
            "Pr√©paration de votre colis",
            "Colis pris en charge par le livreur",
            "En route vers votre adresse",
            "Arriv√©e imminente",
            "Livr√© !"
        ];
        
        document.getElementById('positionActuelle').innerText = 'Statut: ' + etapes[etapeSuivi - 1];
        
        if (etapeSuivi === 3) {
            document.getElementById('tempsEstime').innerHTML = 'üöö D√©lai estim√©: 20-30 min';
        } else if (etapeSuivi === 4) {
            document.getElementById('tempsEstime').innerHTML = 'üöö Arriv√©e dans: 5-10 min';
        } else if (etapeSuivi === 5) {
            document.getElementById('tempsEstime').innerHTML = '‚úÖ Livr√© ! Merci pour votre achat';
        }
    }
    
    function simulerAvancement() {
        if (etapeSuivi < 5) {
            etapeSuivi++;
            mettreAJourSuivi();
        } else {
            clearInterval(suiviInterval);
            suiviInterval = null;
        }
    }
    
    function actualiserSuivi() {
        showToast("üîÑ Suivi actualis√©");
        mettreAJourSuivi();
    }
    
    // ==================== FONCTIONS PARRAINAGE ====================
    function initialiserParrainage() {
        const saved = localStorage.getItem('latyfa_parrainage');
        if (saved) {
            try {
                parrainage = JSON.parse(saved);
            } catch(e) {}
        } else {
            localStorage.setItem('latyfa_parrainage', JSON.stringify(parrainage));
        }
    }
    
    function genererCodeParrainage(clientId) {
        const code = 'LATYFA-' + clientId + '-' + Math.random().toString(36).substring(2, 8).toUpperCase();
        
        if (!parrainage.parrains[clientId]) {
            parrainage.parrains[clientId] = {
                code: code,
                filleuls: [],
                gains: 0
            };
        }
        
        localStorage.setItem('latyfa_parrainage', JSON.stringify(parrainage));
        return code;
    }
    
    function traiterParrainage(codeRef, nouveauClientId, nouveauClientNom) {
        let parrainId = null;
        for (const [id, data] of Object.entries(parrainage.parrains)) {
            if (data.code === codeRef) {
                parrainId = parseInt(id);
                break;
            }
        }
        
        if (!parrainId) return false;
        
        parrainage.parrains[parrainId].filleuls.push({
            id: nouveauClientId,
            nom: nouveauClientNom,
            date: new Date().toLocaleDateString()
        });
        
        const nbFilleuls = parrainage.parrains[parrainId].filleuls.length;
        let gain = 0;
        
        if (nbFilleuls >= 20) gain = "VIP";
        else if (nbFilleuls >= 10) gain = 25000;
        else if (nbFilleuls >= 5) gain = 10000;
        else if (nbFilleuls >= 1) gain = 1000;
        
        parrainage.parrains[parrainId].gains = gain;
        
        parrainage.filleuls[nouveauClientId] = {
            parrainId: parrainId,
            date: new Date().toLocaleDateString()
        };
        
        localStorage.setItem('latyfa_parrainage', JSON.stringify(parrainage));
        
        envoyerMessageAdmin([parrainId], "üéâ Nouveau filleul !", 
            `F√©licitations ! ${nouveauClientNom} s'est inscrit avec votre lien.`);
        
        return true;
    }
    
    function voirParrainage() {
        if (!utilisateurConnecte) {
            ouvrirAuthModal();
            return;
        }
        
        if (!parrainage.parrains[utilisateurConnecte.id]) {
            genererCodeParrainage(utilisateurConnecte.id);
        }
        
        const data = parrainage.parrains[utilisateurConnecte.id];
        const nbFilleuls = data.filleuls.length;
        
        document.getElementById('nbFilleuls').innerText = nbFilleuls;
        document.getElementById('gainTotal').innerText = (data.gains === "VIP" ? "VIP" : data.gains + ' F');
        
        let prochainSeuil = 1;
        for (const palier of parrainage.paliers) {
            if (nbFilleuls < palier.seuil) {
                prochainSeuil = palier.seuil - nbFilleuls;
                break;
            }
        }
        document.getElementById('prochainPalier').innerText = prochainSeuil;
        
        document.getElementById('progress1').style.width = Math.min(100, (nbFilleuls / 1) * 100) + '%';
        document.getElementById('progress5').style.width = Math.min(100, (nbFilleuls / 5) * 100) + '%';
        document.getElementById('progress10').style.width = Math.min(100, (nbFilleuls / 10) * 100) + '%';
        document.getElementById('progress20').style.width = Math.min(100, (nbFilleuls / 20) * 100) + '%';
        
        const lien = `https://latyfashop.com?ref=${data.code}`;
        document.getElementById('lienParrainage').value = lien;
        
        const container = document.getElementById('listeFilleuls');
        if (data.filleuls.length === 0) {
            container.innerHTML = '<p class="text-[9px] text-gray-400 text-center py-2">Aucun filleul pour le moment</p>';
        } else {
            container.innerHTML = data.filleuls.map(f => `
                <div class="flex justify-between items-center border-b pb-1 text-[9px]">
                    <span>üë§ ${f.nom}</span>
                    <span class="text-gray-400">üìÖ ${f.date}</span>
                </div>
            `).join('');
        }
        
        document.getElementById('parrainageModal').classList.add('active');
    }
    
    function fermerParrainage() {
        document.getElementById('parrainageModal').classList.remove('active');
    }
    
    function copierLien() {
        const input = document.getElementById('lienParrainage');
        input.select();
        document.execCommand('copy');
        showToast("üìã Lien copi√© !");
    }
    
    function partagerWhatsApp() {
        const lien = document.getElementById('lienParrainage').value;
        const msg = `‚ú® D√©couvrez Latyfa Shop, la boutique de luxe en C√¥te d'Ivoire ! Utilisez mon lien pour profiter de r√©ductions : ${lien}`;
        window.open(`https://wa.me/?text=${encodeURIComponent(msg)}`);
    }
    
    function partagerFacebook() {
        const lien = document.getElementById('lienParrainage').value;
        window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(lien)}`);
    }
    
    function genererQRParrainage() {
        const lien = document.getElementById('lienParrainage').value;
        const qrUrl = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(lien)}`;
        
        document.getElementById('qrImage').src = qrUrl;
        document.getElementById('qrMontant').innerText = 'Code parrainage';
        document.getElementById('qrModal').classList.add('active');
    }
    
    // ==================== FONCTIONS QR CODE ====================
    function genererQRCode(montant, telephone) {
        const cleanTel = telephone.toString().replace(/\s/g, '');
        let fullNumber = cleanTel;
        if (!cleanTel.startsWith('+')) {
            if (cleanTel.startsWith('0')) {
                fullNumber = '+225' + cleanTel.substring(1);
            } else {
                fullNumber = '+225' + cleanTel;
            }
        }
        
        const qrData = `Paiement Latyfa Shop: ${montant.toLocaleString()} FCFA vers ${fullNumber}`;
        const qrUrl = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(qrData)}`;
        
        document.getElementById('qrImage').src = qrUrl;
        document.getElementById('qrMontant').innerText = montant.toLocaleString() + ' F';
        document.getElementById('qrModal').classList.add('active');
        
        const sound = document.getElementById('cart-sound');
        if (sound) sound.play().catch(() => {});
    }
    
    function genererQRDepuisDetail() {
        if (!currentProduct) return;
        genererQRCode(currentProduct.price, "0709002881");
    }
    
    function genererQRDepuisPanier() {
        const total = parseInt(document.getElementById('total-display').innerText.replace(/\s/g, '')) || 0;
        if (total === 0) {
            alert("Votre panier est vide");
            return;
        }
        genererQRCode(total, "0709002881");
    }
    
    function fermerQR() {
        document.getElementById('qrModal').classList.remove('active');
    }
    
    // ==================== FONCTIONS CONNEXION R√âSEAUX SOCIAUX ====================
    function loginWithFacebook() {
        FB.login(function(response) {
            if (response.authResponse) {
                FB.api('/me', {fields: 'name,email'}, function(user) {
                    let client = clients.find(c => c.email === user.email);
                    
                    if (client) {
                        utilisateurConnecte = client;
                    } else {
                        client = {
                            id: Date.now(),
                            nom: user.name,
                            email: user.email,
                            tel: "",
                            password: "facebook_" + Math.random().toString(36),
                            dateInscription: new Date().toLocaleDateString('fr-FR'),
                            source: "facebook"
                        };
                        clients.push(client);
                        localStorage.setItem('latyfa_clients', JSON.stringify(clients));
                        utilisateurConnecte = client;
                    }
                    
                    localStorage.setItem('latyfa_session', JSON.stringify(utilisateurConnecte));
                    updateUserUI();
                    fermerAuthModal();
                    showToast(`üëã Bonjour ${utilisateurConnecte.nom} !`);
                });
            }
        }, {scope: 'email'});
    }
    
    function loginWithGoogle() {
        google.accounts.id.initialize({
            client_id: '123456789012-abc123def456.apps.googleusercontent.com',
            callback: handleGoogleSignIn
        });
        google.accounts.id.prompt();
    }
    
    function handleGoogleSignIn(response) {
        const data = JSON.parse(atob(response.credential.split('.')[1]));
        
        let client = clients.find(c => c.email === data.email);
        
        if (client) {
            utilisateurConnecte = client;
        } else {
            client = {
                id: Date.now(),
                nom: data.name,
                email: data.email,
                tel: "",
                password: "google_" + Math.random().toString(36),
                dateInscription: new Date().toLocaleDateString('fr-FR'),
                source: "google"
            };
            clients.push(client);
            localStorage.setItem('latyfa_clients', JSON.stringify(clients));
            utilisateurConnecte = client;
        }
        
        localStorage.setItem('latyfa_session', JSON.stringify(utilisateurConnecte));
        updateUserUI();
        fermerAuthModal();
        showToast(`üëã Bonjour ${utilisateurConnecte.nom} !`);
    }
    
    // ==================== FONCTIONS ADMIN MENU ====================
    function switchAdminSection(section) {
        document.querySelectorAll('.admin-section').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.admin-menu-item').forEach(i => i.classList.remove('active'));
        
        document.getElementById(section + 'Section').classList.add('active');
        document.getElementById('menu' + section.charAt(0).toUpperCase() + section.slice(1)).classList.add('active');
        
        if (section === 'inscriptions') {
            updateInscriptionsStats();
        } else if (section === 'dashboard') {
            mettreAJourStats();
        }
    }
    
    // ==================== CHARGEMENT DES DONNEES ====================
    function chargerDonnees() {
        const savedProducts = localStorage.getItem('latyfa_db');
        if (savedProducts) {
            try {
                products = JSON.parse(savedProducts);
            } catch(e) {
                products = getDefaultProducts();
            }
        } else {
            products = getDefaultProducts();
            localStorage.setItem('latyfa_db', JSON.stringify(products));
        }
        
        const savedCart = localStorage.getItem('latyfa_cart');
        if (savedCart) {
            try {
                cart = JSON.parse(savedCart);
            } catch(e) {
                cart = [];
            }
        }
        
        const savedCategories = localStorage.getItem('latyfa_categories');
        if (savedCategories) {
            try {
                categories = JSON.parse(savedCategories);
            } catch(e) {}
        }
        
        const savedPoints = localStorage.getItem('latyfa_points');
        if (savedPoints) {
            pointsFidelite = parseInt(savedPoints);
        }
        
        const savedWishlist = localStorage.getItem('latyfa_wishlist');
        if (savedWishlist) {
            wishlist = JSON.parse(savedWishlist);
        }
        
        const savedAvis = localStorage.getItem('latyfa_avis');
        if (savedAvis) {
            avis = JSON.parse(savedAvis);
        } else {
            avis = avisPredefinis;
            localStorage.setItem('latyfa_avis', JSON.stringify(avis));
        }
        
        const savedComparateur = localStorage.getItem('latyfa_comparateur');
        if (savedComparateur) {
            comparateur = JSON.parse(savedComparateur);
        }
        
        const savedClients = localStorage.getItem('latyfa_clients');
        if (savedClients) {
            try {
                clients = JSON.parse(savedClients);
            } catch(e) {
                clients = [];
            }
        } else {
            const maintenant = new Date();
            const dateActuelle = maintenant.toLocaleDateString('fr-FR');
            
            clients = [
                { 
                    id: 1, 
                    nom: "Admin Latyfa", 
                    email: "admin@latyfa.com", 
                    tel: "0709002881", 
                    password: "admin2026", 
                    isAdmin: true, 
                    dateInscription: dateActuelle,
                    dateTimestamp: maintenant.getTime()
                },
                {
                    id: 2,
                    nom: "Marie Kouassi",
                    email: "marie.k@email.com",
                    tel: "0701020304",
                    password: "client123",
                    isAdmin: false,
                    dateInscription: new Date(Date.now() - 2*24*60*60*1000).toLocaleDateString('fr-FR'),
                    dateTimestamp: Date.now() - 2*24*60*60*1000,
                    points: 150
                }
            ];
            localStorage.setItem('latyfa_clients', JSON.stringify(clients));
        }
        
        const savedMessages = localStorage.getItem('latyfa_messages');
        if (savedMessages) {
            try {
                messages = JSON.parse(savedMessages);
            } catch(e) {
                messages = [];
            }
        } else {
            messages = [];
            localStorage.setItem('latyfa_messages', JSON.stringify(messages));
        }
        
        initialiserParrainage();
        
        const session = localStorage.getItem('latyfa_session');
        if (session) {
            try {
                utilisateurConnecte = JSON.parse(session);
                updateUserUI();
                updateMessageBadge();
            } catch(e) {}
        }
    }
    
    function getDefaultProducts() {
        return [
            { id: 1, cat: "sac", name: "Sac Prestige Latyfa", price: 45000, images: ["https://images.unsplash.com/photo-1584917865442-de89df76afd3?w=500"], enStock: true, description: "√âl√©gance Signature Latyfa. Cuir Premium finition luxe.", dateAjout: Date.now() - 2*24*60*60*1000, ventes: 45 },
            { id: 2, cat: "bijoux", name: "Collier Perle Royale", price: 25000, images: ["https://images.unsplash.com/photo-1515562141207-7a18b5ce7142?w=500"], enStock: true, description: "Finition Or 24K. Design exclusif pour vos grandes occasions.", dateAjout: Date.now() - 10*24*60*60*1000, ventes: 38 },
            { id: 3, cat: "hanche", name: "Baya Cristal √âclat", price: 5000, images: ["https://images.unsplash.com/photo-1611085583191-a3b130944362?w=500"], enStock: true, description: "Perles de hanche traditionnelles avec une touche de modernit√©.", dateAjout: Date.now() - 5*24*60*60*1000, ventes: 52 },
            { id: 4, cat: "parfum", name: "Oud Mystique - 100ml", price: 35000, images: ["https://images.unsplash.com/photo-1541643600914-78b084683601?w=500"], enStock: true, description: "Une fragrance envo√ªtante qui tient toute la journ√©e.", dateAjout: Date.now() - 15*24*60*60*1000, ventes: 27 },
            { id: 5, cat: "chaussures", name: "Escarpins Gold Night", price: 28000, images: ["https://images.unsplash.com/photo-1543163521-1bf539c55dd2?w=500"], enStock: true, pointures: ["37", "38", "39", "40"], description: "Confort et prestige pour vos soir√©es.", dateAjout: Date.now() - 3*24*60*60*1000, ventes: 31 }
        ];
    }
    
    // ==================== FONCTIONS MESSAGERIE ====================
    function updateMessageBadge() {
        if (!utilisateurConnecte) return;
        
        const nonLus = messages.filter(m => 
            m.destinataireId === utilisateurConnecte.id && !m.lu
        ).length;
        
        const badge = document.getElementById('messageBadge');
        const dropdownCount = document.getElementById('messageCountDropdown');
        
        if (nonLus > 0) {
            badge.innerText = nonLus;
            badge.style.display = 'flex';
            if (dropdownCount) dropdownCount.innerText = nonLus;
        } else {
            badge.style.display = 'none';
            if (dropdownCount) dropdownCount.innerText = '0';
        }
    }
    
    function ouvrirMessages() {
        if (!utilisateurConnecte) {
            ouvrirAuthModal();
            return;
        }
        
        const modal = document.getElementById('messagesModal');
        const container = document.getElementById('messagesList');
        
        const mesMessages = messages.filter(m => m.destinataireId === utilisateurConnecte.id)
            .sort((a, b) => new Date(b.date) - new Date(a.date));
        
        if (mesMessages.length === 0) {
            container.innerHTML = '<p class="text-center text-gray-400 text-[10px] py-10">Aucun message</p>';
        } else {
            container.innerHTML = mesMessages.map(m => `
                <div class="message-item ${!m.lu ? 'unread' : ''}" onclick="marquerCommeLu(${m.id})">
                    <div class="flex justify-between items-start">
                        <h4 class="text-[10px] font-black uppercase">${m.objet}</h4>
                        <span class="text-[8px] text-gray-400">${m.date}</span>
                    </div>
                    <p class="text-[9px] mt-2 whitespace-pre-line">${m.contenu}</p>
                </div>
            `).join('');
        }
        
        modal.classList.add('active');
    }
    
    function marquerCommeLu(messageId) {
        const message = messages.find(m => m.id === messageId);
        if (message && !message.lu) {
            message.lu = true;
            localStorage.setItem('latyfa_messages', JSON.stringify(messages));
            updateMessageBadge();
        }
    }
    
    function fermerMessages() {
        document.getElementById('messagesModal').classList.remove('active');
    }
    
    function envoyerMessageAdmin(destinataireIds, objet, contenu) {
        const nouveauxMessages = destinataireIds.map(id => ({
            id: Date.now() + Math.random(),
            expediteurId: 'admin',
            destinataireId: id,
            objet: objet,
            contenu: contenu,
            date: new Date().toLocaleString('fr-FR'),
            lu: false
        }));
        
        messages.push(...nouveauxMessages);
        localStorage.setItem('latyfa_messages', JSON.stringify(messages));
        
        const clientsAvecEmail = clients.filter(c => 
            destinataireIds.includes(c.id) && c.email && c.email.includes('@')
        );
        
        clientsAvecEmail.forEach(client => {
            envoyerEmail(client, objet, contenu);
        });
        
        showToast(`‚úÖ Message envoy√© √† ${destinataireIds.length} client(s)`);
    }
    
    // ==================== FONCTIONS AUTHENTIFICATION ====================
    function ouvrirAuthModal() {
        document.getElementById('authModal').classList.add('active');
        switchAuthTab('login');
    }
    
    function fermerAuthModal() {
        document.getElementById('authModal').classList.remove('active');
    }
    
    function switchAuthTab(tab) {
        const loginTab = document.getElementById('loginTab');
        const registerTab = document.getElementById('registerTab');
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');
        
        if (tab === 'login') {
            loginTab.classList.add('active');
            registerTab.classList.remove('active');
            loginForm.style.display = 'block';
            registerForm.style.display = 'none';
        } else {
            registerTab.classList.add('active');
            loginTab.classList.remove('active');
            registerForm.style.display = 'block';
            loginForm.style.display = 'none';
        }
    }
    
    function inscription() {
        const nom = document.getElementById('registerNom').value.trim();
        const email = document.getElementById('registerEmail').value.trim();
        const tel = document.getElementById('registerTel').value.trim();
        const password = document.getElementById('registerPassword').value;
        const confirm = document.getElementById('registerConfirm').value;
        const accept = document.getElementById('registerAccept').checked;
        
        const urlParams = new URLSearchParams(window.location.search);
        const refCode = urlParams.get('ref');
        
        if (!nom || !email || !tel || !password || !confirm) {
            alert("Veuillez remplir tous les champs");
            return;
        }
        
        if (password !== confirm) {
            alert("Les mots de passe ne correspondent pas");
            return;
        }
        
        if (!accept) {
            alert("Vous devez accepter les conditions g√©n√©rales");
            return;
        }
        
        if (clients.find(c => c.email === email)) {
            alert("Cet email est d√©j√† utilis√©");
            return;
        }
        
        const maintenant = new Date();
        const dateInscription = maintenant.toLocaleDateString('fr-FR');
        
        const nouveauClient = {
            id: Date.now(),
            nom: nom,
            email: email,
            tel: tel,
            password: password,
            dateInscription: dateInscription,
            dateTimestamp: maintenant.getTime(),
            commandes: [],
            points: 0,
            source: 'formulaire'
        };
        
        clients.push(nouveauClient);
        localStorage.setItem('latyfa_clients', JSON.stringify(clients));
        
        if (refCode) {
            traiterParrainage(refCode, nouveauClient.id, nouveauClient.nom);
        }
        
        envoyerMessageAdmin([nouveauClient.id], "Bienvenue chez Latyfa Shop", 
            "Bonjour " + nom + ",\n\nMerci de votre inscription ! Nous sommes ravis de vous compter parmi nos clients.\n\n" +
            "D√©couvrez nos derni√®res collections et profitez de vos avantages fid√©lit√©.\n\n" +
            "L'√©quipe Latyfa Shop");
        
        alert("Inscription r√©ussie ! Vous pouvez maintenant vous connecter.");
        switchAuthTab('login');
        
        if (document.getElementById('adminModal').classList.contains('active')) {
            updateInscriptionsStats();
        }
    }
    
    function connexion() {
        const email = document.getElementById('loginEmail').value.trim();
        const password = document.getElementById('loginPassword').value;
        
        const client = clients.find(c => c.email === email && c.password === password);
        
        if (client) {
            utilisateurConnecte = client;
            localStorage.setItem('latyfa_session', JSON.stringify(client));
            updateUserUI();
            updateMessageBadge();
            fermerAuthModal();
            showToast(`üëã Bonjour ${client.nom} !`);
            
            if (client.isAdmin) {
                sessionStorage.setItem('latyfa_admin_session', 'true');
            }
            
            checkMaintenance();
        } else {
            alert("Email ou mot de passe incorrect");
        }
    }
    
    function deconnexion() {
        utilisateurConnecte = null;
        localStorage.removeItem('latyfa_session');
        sessionStorage.removeItem('latyfa_admin_session');
        updateUserUI();
        fermerProfil();
        fermerCommandes();
        showToast("üëã √Ä bient√¥t !");
        checkMaintenance();
    }
    
    function updateUserUI() {
        const userMenu = document.getElementById('userMenu');
        const loginBtn = document.getElementById('loginBtn');
        const messageIcon = document.getElementById('messageIcon');
        
        if (utilisateurConnecte) {
            userMenu.style.display = 'block';
            loginBtn.style.display = 'none';
            messageIcon.style.display = 'block';
            document.getElementById('userAvatar').innerHTML = `<i class="fa-regular fa-user"></i>`;
            
            document.getElementById('nom-client').value = utilisateurConnecte.nom;
            document.getElementById('tel-client').value = utilisateurConnecte.tel;
        } else {
            userMenu.style.display = 'none';
            loginBtn.style.display = 'block';
            messageIcon.style.display = 'none';
        }
    }
    
    // Dans la fonction updateUserUI(), ajoutez cette ligne pour mettre √† jour le badge
    function updateClientCountBadge() {
        const clientsNonAdmin = clients.filter(c => !c.isAdmin);
        const menuMessagerie = document.getElementById('menuMessagerie');
        if (menuMessagerie) {
            const badge = menuMessagerie.querySelector('.client-count-badge') || document.createElement('span');
            if (!badge.classList.contains('client-count-badge')) {
                badge.className = 'client-count-badge ml-1 bg-red-500 text-white px-1.5 rounded-full text-[8px]';
                menuMessagerie.appendChild(badge);
            }
            badge.innerText = clientsNonAdmin.length;
        }
    }
    
    function voirProfil() {
        if (!utilisateurConnecte) {
            ouvrirAuthModal();
            return;
        }
        
        const profilInfo = document.getElementById('profilInfo');
        profilInfo.innerHTML = `
            <div class="bg-gray-50 p-4 rounded-lg">
                <p class="text-[10px] font-bold mb-2">üë§ ${utilisateurConnecte.nom}</p>
                <p class="text-[9px] text-gray-600">üìß ${utilisateurConnecte.email}</p>
                <p class="text-[9px] text-gray-600">üìû ${utilisateurConnecte.tel}</p>
                <p class="text-[9px] text-gray-600">üìÖ Inscrit le ${utilisateurConnecte.dateInscription}</p>
                <p class="text-[9px] text-[#c5a059] mt-2">‚≠ê Points fid√©lit√©: ${pointsFidelite}</p>
            </div>
        `;
        
        document.getElementById('editNom').value = utilisateurConnecte.nom;
        document.getElementById('editEmail').value = utilisateurConnecte.email;
        document.getElementById('editTel').value = utilisateurConnecte.tel;
        
        document.getElementById('profilModal').classList.add('active');
    }
    
    function fermerProfil() {
        document.getElementById('profilModal').classList.remove('active');
    }
    
    function modifierProfil() {
        const nom = document.getElementById('editNom').value.trim();
        const email = document.getElementById('editEmail').value.trim();
        const tel = document.getElementById('editTel').value.trim();
        
        if (!nom || !email || !tel) {
            alert("Veuillez remplir tous les champs");
            return;
        }
        
        utilisateurConnecte.nom = nom;
        utilisateurConnecte.email = email;
        utilisateurConnecte.tel = tel;
        
        const index = clients.findIndex(c => c.id === utilisateurConnecte.id);
        if (index !== -1) {
            clients[index] = utilisateurConnecte;
            localStorage.setItem('latyfa_clients', JSON.stringify(clients));
            localStorage.setItem('latyfa_session', JSON.stringify(utilisateurConnecte));
        }
        
        voirProfil();
        showToast("‚úÖ Profil mis √† jour");
    }
    
    function voirCommandes() {
        if (!utilisateurConnecte) {
            ouvrirAuthModal();
            return;
        }
        
        const historique = JSON.parse(localStorage.getItem('latyfa_historique')) || [];
        const mesCommandes = historique.filter(cmd => cmd.client === utilisateurConnecte.nom.toUpperCase() || cmd.tel === utilisateurConnecte.tel);
        
        const container = document.getElementById('commandesList');
        
        if (mesCommandes.length === 0) {
            container.innerHTML = '<p class="text-center text-gray-400 text-[10px] py-10">Aucune commande pour le moment</p>';
        } else {
            container.innerHTML = mesCommandes.map(cmd => `
                <div class="border rounded-lg p-3 text-[9px]">
                    <div class="flex justify-between mb-1">
                        <span class="font-bold">üìÖ ${cmd.date}</span>
                        <span class="text-[#c5a059] font-black">${cmd.total}</span>
                    </div>
                    <p class="text-gray-600">${cmd.articles.substring(0, 50)}...</p>
                    <p class="text-[8px] text-gray-400 mt-1">üöö ${cmd.lieu}</p>
                </div>
            `).join('');
        }
        
        document.getElementById('commandesModal').classList.add('active');
    }
    
    function fermerCommandes() {
        document.getElementById('commandesModal').classList.remove('active');
    }
    
    function voirFavoris() {
        if (!utilisateurConnecte) {
            ouvrirAuthModal();
            return;
        }
        toggleWishlistModal();
    }
    
    function voirMessages() {
        ouvrirMessages();
    }
    
    // ==================== FONCTIONS D'AFFICHAGE ====================
    function render(filter = 'tous') {
        const grid = document.getElementById('product-grid');
        if (!grid) return;
        
        const SEPT_JOURS = 7 * 24 * 60 * 60 * 1000;
        const maintenant = Date.now();
        
        const filteredProducts = filter === 'tous' ? products : products.filter(p => p.cat === filter);
        
        if (filteredProducts.length === 0) {
            grid.innerHTML = `
                <div class="col-span-full text-center py-20">
                    <i class="fa-solid fa-box-open text-5xl text-gray-200 mb-4"></i>
                    <p class="text-gray-400 text-xs font-bold uppercase">Aucun produit dans cette cat√©gorie</p>
                </div>`;
            return;
        }
        
        grid.innerHTML = filteredProducts.map(p => {
            const estNouveau = p.dateAjout && (maintenant - p.dateAjout < SEPT_JOURS);
            const estLuxe = p.price > 30000;
            const estFavori = wishlist.includes(p.id);
            
            return `
            <div class="product-card p-3 relative ${p.enStock === false ? 'opacity-75' : ''}" onclick="${p.enStock === false ? '' : 'voirDetails('+p.id+')'}">
                <div class="favorite-btn ${estFavori ? 'active' : ''}" onclick="event.stopPropagation(); toggleWishlist(${p.id}, this)">
                    <i class="fa-${estFavori ? 'solid' : 'regular'} fa-heart"></i>
                </div>
                ${estNouveau ? '<span class="badge-nouveau">NOUVEAU</span>' : ''}
                ${estLuxe ? '<span class="badge-luxe">LUXE</span>' : ''}
                ${p.stockBas ? '<span class="stock-alert">üî• PLUS QUE QUELQUES-UNS</span>' : ''}
                ${p.enStock === false ? '<span class="badge-soldout">SOLD OUT</span>' : ''}
                
                <img src="${p.images[0]}" class="h-44 w-full object-cover rounded mb-3 border ${p.enStock === false ? 'grayscale' : ''}">
                <h3 class="text-[11px] font-bold uppercase h-8 line-clamp-2 text-gray-800">${p.name}</h3>
                <div class="${p.enStock === false ? 'text-gray-400' : 'text-[#c5a059]'} font-black text-lg mt-2">${p.price.toLocaleString()} F</div>
                
                <div class="flex items-center gap-1 mt-2">
                    <div class="flex text-[#c5a059] text-[8px]">
                        ${Array(5).fill(0).map((_, i) => `<i class="fa-${i < 4 ? 'solid' : 'regular'} fa-star"></i>`).join('')}
                    </div>
                    <span class="text-[7px] text-gray-400">(24)</span>
                </div>
                <div class="bg-gray-50 text-center py-2 mt-4 rounded text-[9px] font-bold uppercase tracking-widest border border-gray-100 hover:bg-[#c5a059] hover:text-white transition-colors" data-i18n="${p.enStock === false ? 'sold_out' : 'view_product'}">${p.enStock === false ? 'INDISPONIBLE' : 'Voir l\'article'}</div>
            </div>`;
        }).join('');
        
        updateCartCount();
        updateWishlistCount();
        updatePopularProducts();
        
        // Mettre √† jour les cat√©gories horizontales
        renderHorizontalCategories();
    }
    
    function refreshCategories() {
        // Cette fonction n'est plus utilis√©e, mais on la garde pour compatibilit√©
        // Elle est remplac√©e par renderHorizontalCategories()
    }
    
    function updatePopularProducts() {
        const container = document.getElementById('popular-products');
        if (!container) return;
        
        const populaires = [...products].sort((a, b) => (b.ventes || 0) - (a.ventes || 0)).slice(0, 6);
        
        container.innerHTML = populaires.map(p => `
            <div class="flex-shrink-0 w-40 cursor-pointer" onclick="voirDetails(${p.id})">
                <img src="${p.images[0]}" class="h-32 w-full object-cover rounded-lg mb-2">
                <p class="text-[9px] font-bold uppercase truncate">${p.name}</p>
                <p class="text-[#c5a059] font-black text-[10px]">${p.price.toLocaleString()} F</p>
            </div>
        `).join('');
    }
    
    // ==================== FONCTIONS DETAIL PRODUIT ====================
    function voirDetails(id) {
        const p = products.find(x => x.id === id);
        if (!p || p.enStock === false) return;
        
        currentProduct = p;
        
        document.getElementById('detail-name').innerText = p.name;
        document.getElementById('detail-price').innerText = p.price.toLocaleString() + " F";
        document.getElementById('detail-desc').innerText = p.description || "Aucune description disponible";
        document.getElementById('main-detail-img').src = p.images[0];
        
        const vues = Math.floor(Math.random() * 17) + 8;
        document.getElementById('nb-vues-text').innerText = vues + " personnes";
        
        let thumbnailsHtml = p.images.map((img, index) => `
            <img src="${img}" onclick="changerMedia('image', '${img}', this)" 
            class="miniature-item ${index === 0 ? 'thumb-active' : ''}">
        `).join('');
        
        if (p.video) {
            thumbnailsHtml += `
                <div onclick="changerMedia('video', '${p.video}', this)" 
                class="miniature-item bg-black flex flex-col items-center justify-center cursor-pointer text-[#c5a059]">
                    <i class="fa-solid fa-play text-xs"></i>
                    <span class="text-[7px] font-black">VID√âO</span>
                </div>
            `;
        }
        
        document.getElementById('thumbnails').innerHTML = thumbnailsHtml;
        
        gererOptionsProduit(p);
        
        const reviewsContainer = document.getElementById('product-reviews');
        if (reviewsContainer) {
            const troisAvis = avis.slice(0, 3);
            reviewsContainer.innerHTML = troisAvis.map(a => `
                <div class="flex gap-2">
                    <img src="${a.photo}" class="w-8 h-8 rounded-full">
                    <div>
                        <div class="flex text-[#c5a059] text-[8px]">
                            ${Array(5).fill(0).map((_, i) => `<i class="fa-${i < a.note ? 'solid' : 'regular'} fa-star"></i>`).join('')}
                        </div>
                        <p class="text-[9px] font-bold">"${a.commentaire.substring(0, 30)}..."</p>
                    </div>
                </div>
            `).join('');
        }
        
        document.getElementById('productDetailModal').classList.add('active');
    }
    
    function gererOptionsProduit(p) {
        const sizeArea = document.getElementById('size-area');
        const colorArea = document.getElementById('color-area');
        const selectSize = document.getElementById('select-size');
        const selectColor = document.getElementById('select-color');
        const sizeHelper = document.getElementById('size-helper-ui');
        const shoeGuide = document.getElementById('shoe-guide-ui');
        
        if (p.pointures && p.pointures.length > 0) {
            sizeArea.classList.remove('hidden');
            selectSize.innerHTML = p.pointures.map(s => `<option value="${s}">${s}</option>`).join('');
        } else if (p.tailles && p.tailles.length > 0) {
            sizeArea.classList.remove('hidden');
            selectSize.innerHTML = p.tailles.map(t => `<option value="${t}">${t}</option>`).join('');
        } else {
            sizeArea.classList.add('hidden');
        }
        
        if (p.couleurs && p.couleurs.length > 0) {
            colorArea.classList.remove('hidden');
            selectColor.innerHTML = p.couleurs.map(c => `<option value="${c}">${c}</option>`).join('');
        } else {
            colorArea.classList.add('hidden');
        }
        
        if (p.cat === 'chaussures') {
            if (sizeHelper) sizeHelper.classList.add('hidden');
            if (shoeGuide) shoeGuide.classList.remove('hidden');
        } else {
            if (sizeHelper) sizeHelper.classList.remove('hidden');
            if (shoeGuide) shoeGuide.classList.add('hidden');
        }
    }
    
    function changerMedia(type, source, element) {
        const container = document.getElementById('media-container');
        
        document.querySelectorAll('.miniature-item').forEach(el => el.classList.remove('thumb-active'));
        element.classList.add('thumb-active');
        
        if (type === 'video') {
            container.innerHTML = `
                <video id="main-detail-video" src="${source}" controls autoplay loop muted
                class="w-full h-80 object-cover rounded-xl shadow-md border"></video>
            `;
        } else {
            container.innerHTML = `
                <img id="main-detail-img" src="${source}" 
                class="w-full h-80 object-cover rounded-xl shadow-md border">
            `;
        }
    }
    
    function calculerTailleRec() {
        const poids = parseFloat(document.getElementById('user-weight').value);
        const resultZone = document.getElementById('size-result');
        const selectSize = document.getElementById('select-size');
        
        if (!poids || poids < 30 || poids > 150) {
            resultZone.innerText = "Veuillez entrer un poids valide (30-150 kg)";
            resultZone.classList.replace('text-green-600', 'text-red-500');
            return;
        }
        
        let recommendation = "";
        if (poids < 55) recommendation = "S";
        else if (poids < 68) recommendation = "M";
        else if (poids < 80) recommendation = "L";
        else if (poids < 95) recommendation = "XL";
        else if (poids < 110) recommendation = "XXL";
        else recommendation = "3XL";
        
        resultZone.classList.replace('text-red-500', 'text-green-600');
        resultZone.innerHTML = `‚ú® Taille conseill√©e : <strong>${recommendation}</strong>`;
        
        if (selectSize) {
            for (let i = 0; i < selectSize.options.length; i++) {
                if (selectSize.options[i].value === recommendation) {
                    selectSize.selectedIndex = i;
                    break;
                }
            }
        }
    }
    
    function toggleAideTaille() {
        const helper = document.getElementById('size-helper-ui');
        const shoeGuide = document.getElementById('shoe-guide-ui');
        
        if (helper && !helper.classList.contains('hidden')) {
            helper.classList.add('hidden');
        } else if (shoeGuide && !shoeGuide.classList.contains('hidden')) {
            shoeGuide.classList.add('hidden');
        } else if (helper) {
            helper.classList.remove('hidden');
        }
    }
    
    function fermerDetail() {
        document.getElementById('productDetailModal').classList.remove('active');
    }
    
    // ==================== FONCTIONS PANIER ====================
    function ajouterDepuisDetail() {
        if (!currentProduct) return;
        
        const size = document.getElementById('select-size')?.value || "";
        const color = document.getElementById('select-color')?.value || "";
        const label = `${currentProduct.name} ${size ? '('+size+')' : ''} ${color ? '['+color+']' : ''}`.trim();
        
        const sound = document.getElementById('cart-sound');
        if (sound) {
            sound.currentTime = 0;
            sound.play().catch(() => {});
        }
        
        const index = cart.findIndex(x => x.label === label);
        if (index > -1) {
            cart[index].qty++;
        } else {
            cart.push({ 
                id: currentProduct.id, 
                label: label, 
                qty: 1, 
                price: currentProduct.price,
                images: currentProduct.images 
            });
        }
        
        updateCartCount();
        localStorage.setItem('latyfa_cart', JSON.stringify(cart));
        
        ajouterPoints(currentProduct.price);
        
        fermerDetail();
        showToast("‚ú® Produit ajout√© au panier");
    }
    
    function updateCartCount() {
        const totalArticles = cart.reduce((sum, item) => sum + item.qty, 0);
        const badge = document.getElementById('cart-count');
        if (badge) {
            badge.innerText = totalArticles;
            badge.style.display = totalArticles > 0 ? 'flex' : 'none';
            badge.classList.add('cart-count-pop');
            setTimeout(() => badge.classList.remove('cart-count-pop'), 300);
        }
        
        // Mettre √† jour le compteur mobile
        const mobileCount = document.getElementById('wishlist-count-mobile');
        if (mobileCount) {
            mobileCount.innerText = wishlist.length;
        }
    }
    
    function showToast(message) {
        const toast = document.getElementById('toast');
        toast.innerText = message;
        toast.classList.add('show');
        setTimeout(() => toast.classList.remove('show'), 2000);
    }
    
    function ouvrirPanier() {
        document.getElementById('cartModal').classList.add('active');
        const itemsDiv = document.getElementById('cart-items');
        const form = document.getElementById('checkout-form');
        
        if (cart.length === 0) {
            itemsDiv.innerHTML = `
                <div class="text-center py-10">
                    <i class="fa-solid fa-basket-shopping text-4xl text-gray-200 mb-3"></i>
                    <p class="text-[10px] font-bold uppercase text-gray-400">Votre panier est vide</p>
                </div>`;
            form.style.display = "none";
            return;
        }
        
        form.style.display = "block";
        itemsDiv.innerHTML = cart.map(item => `
            <div class="flex items-center gap-3 border-b pb-3">
                <img src="${item.images?.[0] || 'https://via.placeholder.com/50'}" class="w-12 h-12 object-cover rounded-lg">
                <div class="flex-1">
                    <p class="text-[10px] font-bold uppercase">${item.label}</p>
                    <p class="text-[9px] text-[#c5a059] font-black">${item.price.toLocaleString()} F</p>
                </div>
                <div class="flex items-center gap-2">
                    <button onclick="modifierQty('${item.label}', -1)" class="w-6 h-6 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors">-</button>
                    <span class="text-[10px] font-bold w-4 text-center">${item.qty}</span>
                    <button onclick="modifierQty('${item.label}', 1)" class="w-6 h-6 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors">+</button>
                </div>
            </div>
        `).join('');
        
        majResume();
    }
    
    function modifierQty(label, delta) {
        const index = cart.findIndex(x => x.label === label);
        if (index === -1) return;
        
        cart[index].qty += delta;
        
        if (cart[index].qty < 1) {
            cart.splice(index, 1);
        }
        
        updateCartCount();
        localStorage.setItem('latyfa_cart', JSON.stringify(cart));
        ouvrirPanier();
    }
    
    function viderPanier() {
        if (cart.length > 0 && confirm("Vider le panier ?")) {
            cart = [];
            localStorage.setItem('latyfa_cart', JSON.stringify(cart));
            updateCartCount();
            ouvrirPanier();
            showToast("üóëÔ∏è Panier vid√©");
        }
    }
    
    function fermerPanier() {
        document.getElementById('cartModal').classList.remove('active');
    }
    
    // ==================== FONCTIONS COMMANDE ====================
    function selectPayment(method) {
        document.querySelectorAll('.payment-option').forEach(el => el.classList.remove('selected'));
        document.getElementById(`payment-${method}`).classList.add('selected');
        document.getElementById('selected-payment').value = method;
        toggleBouton();
    }
    
    function majResume() {
        const zoneKey = document.getElementById('zone-livraison').value;
        const isCadeau = document.getElementById('check-cadeau').checked;
        const containerResume = document.getElementById('resume-final');
        const alertePromoValentin = document.getElementById('promo-congrats');
        
        let totalArticles = cart.reduce((sum, item) => sum + (item.price * item.qty), 0);
        let fraisLivraison = zoneKey && tarifsLivraison[zoneKey] ? tarifsLivraison[zoneKey].prix : 0;
        let fraisCadeau = isCadeau ? 1000 : 0;
        
        let remiseValentin = 0;
        const maintenant = new Date();
        const debutPromo = new Date(2026, 1, 14);
        const finPromo = new Date(2026, 1, 28);
        
        if (maintenant >= debutPromo && maintenant <= finPromo && totalArticles >= 20000) {
            remiseValentin = totalArticles * 0.20;
            if (alertePromoValentin) alertePromoValentin.classList.remove('hidden');
        } else {
            if (alertePromoValentin) alertePromoValentin.classList.add('hidden');
        }
        
        let remiseRoue = remiseCodePromo > 0 ? (totalArticles * remiseCodePromo / 100) : 0;
        
        let totalFinal = totalArticles + fraisLivraison + fraisCadeau - remiseValentin - remiseRoue;
        if (totalFinal < 0) totalFinal = 0;
        
        if (containerResume) {
            containerResume.innerHTML = `
                <div class="flex justify-between"><span>Articles:</span> <span>${totalArticles.toLocaleString()} F</span></div>
                ${fraisLivraison > 0 ? `<div class="flex justify-between"><span>Livraison:</span> <span>+${fraisLivraison.toLocaleString()} F</span></div>` : ''}
                ${fraisCadeau > 0 ? `<div class="flex justify-between text-pink-500"><span>Emballage cadeau:</span> <span>+1.000 F</span></div>` : ''}
                ${remiseValentin > 0 ? `<div class="flex justify-between text-green-600"><span>Remise Valentin -20%:</span> <span>-${Math.round(remiseValentin).toLocaleString()} F</span></div>` : ''}
                ${remiseRoue > 0 ? `<div class="flex justify-between text-blue-600"><span>Remise code -${remiseCodePromo}%:</span> <span>-${Math.round(remiseRoue).toLocaleString()} F</span></div>` : ''}
            `;
        }
        
        document.getElementById('total-display').innerText = Math.round(totalFinal).toLocaleString() + " F";
        toggleBouton();
    }
    
    function toggleBouton() {
        const chk = document.getElementById('check-verif')?.checked;
        const nom = document.getElementById('nom-client')?.value.trim();
        const tel = document.getElementById('tel-client')?.value.trim();
        const zone = document.getElementById('zone-livraison')?.value;
        const payment = document.getElementById('selected-payment')?.value;
        const btn = document.getElementById('btn-final');
        
        if (!btn) return;
        
        if (chk && nom && tel && zone && payment) {
            btn.classList.remove('bg-gray-300', 'pointer-events-none');
            btn.classList.add('bg-[#c5a059]', 'cursor-pointer', 'hover:bg-[#b38d4a]');
            btn.disabled = false;
        } else {
            btn.classList.add('bg-gray-300', 'pointer-events-none');
            btn.classList.remove('bg-[#c5a059]', 'cursor-pointer', 'hover:bg-[#b38d4a]');
            btn.disabled = true;
        }
    }
    
    function appliquerPromo() {
        const inputCode = document.getElementById('input-promo').value.toUpperCase().trim();
        const msg = document.getElementById('promo-msg');
        const savedPromo = JSON.parse(localStorage.getItem('latyfa_active_promo'));
        const usedPromos = JSON.parse(localStorage.getItem('latyfa_used_promos')) || [];
        
        msg.classList.remove('hidden');
        
        if (usedPromos.includes(inputCode)) {
            msg.innerText = "‚ùå Code d√©j√† utilis√©";
            msg.className = "text-[9px] font-bold text-red-600";
            remiseCodePromo = 0;
        } else if (savedPromo && inputCode === savedPromo.code) {
            if (Date.now() > savedPromo.expires) {
                msg.innerText = "‚è∞ Code expir√©";
                msg.className = "text-[9px] font-bold text-red-600";
                remiseCodePromo = 0;
            } else {
                remiseCodePromo = parseInt(savedPromo.remise);
                msg.innerText = "‚úÖ Code -" + remiseCodePromo + "% appliqu√© !";
                msg.className = "text-[9px] font-bold text-green-600";
                
                usedPromos.push(inputCode);
                localStorage.setItem('latyfa_used_promos', JSON.stringify(usedPromos));
            }
        } else {
            msg.innerText = "‚ùå Code invalide";
            msg.className = "text-[9px] font-bold text-red-600";
            remiseCodePromo = 0;
        }
        majResume();
    }
    
    function validerCommande() {
        const nom = document.getElementById('nom-client').value;
        const tel = document.getElementById('tel-client').value;
        const quartier = document.getElementById('quartier-client').value;
        const zone = document.getElementById('zone-livraison').value;
        const payment = document.getElementById('selected-payment').value;
        const total = document.getElementById('total-display').innerText;
        const isCadeau = document.getElementById('check-cadeau').checked;
        const codeUtilise = document.getElementById('input-promo').value || "Aucun";
        
        if (!nom || !tel || !quartier || !zone || !payment) {
            alert("‚ö†Ô∏è Veuillez remplir tous les champs obligatoires");
            return;
        }
        
        const paymentNames = {
            'wave': 'Wave',
            'orange': 'Orange Money',
            'mtn': 'MTN Money',
            'cash': 'Cash √† la livraison'
        };
        
        let listWA = cart.map(i => `‚Ä¢ ${i.label} (x${i.qty})`).join('\n');
        let msg = `‚ú® *NOUVELLE COMMANDE - LATYFA SHOP*\n\n`;
        msg += `üë§ *CLIENT:* ${nom}\n`;
        msg += `üìû *TEL:* ${tel}\n`;
        msg += `üìç *QUARTIER:* ${quartier}\n`;
        msg += `üåç *ZONE:* ${tarifsLivraison[zone].nom}\n`;
        msg += `üí≥ *PAIEMENT:* ${paymentNames[payment]}\n\n`;
        msg += `üìù *ARTICLES:*\n${listWA}\n`;
        if (isCadeau) msg += `üéÅ *OPTION:* Emballage Cadeau Luxe\n`;
        msg += `\nüí∞ *TOTAL √Ä PAYER: ${total}*`;
        
        const nouvelleCommande = {
            id: Date.now(),
            date: new Date().toLocaleString('fr-FR'),
            client: nom.toUpperCase(),
            tel: tel,
            lieu: `${quartier} (${tarifsLivraison[zone].nom})`,
            paiement: paymentNames[payment],
            articles: cart.map(i => `${i.label} (x${i.qty})`).join(', '),
            total: total,
            promo: codeUtilise,
            cadeau: isCadeau ? "OUI" : "NON"
        };
        
        let historique = JSON.parse(localStorage.getItem('latyfa_historique')) || [];
        historique.unshift(nouvelleCommande);
        localStorage.setItem('latyfa_historique', JSON.stringify(historique));
        
        const montantTotal = parseInt(total.replace(/\s/g, '')) || 0;
        ajouterPoints(montantTotal);
        
        if (utilisateurConnecte) {
            envoyerConfirmationCommande(utilisateurConnecte, nouvelleCommande);
            
            envoyerMessageAdmin([utilisateurConnecte.id], "Confirmation de commande", 
                "Bonjour " + utilisateurConnecte.nom + ",\n\nVotre commande du " + nouvelleCommande.date + " a bien √©t√© enregistr√©e.\n\n" +
                "Total : " + total + "\n" +
                "Paiement : " + paymentNames[payment] + "\n\n" +
                "Nous vous contacterons d√®s que votre colis sera exp√©di√©.\n\n" +
                "Merci pour votre confiance !\nL'√©quipe Latyfa Shop");
        } else {
            const client = clients.find(c => c.tel === tel);
            if (client && client.email) {
                envoyerConfirmationCommande(client, nouvelleCommande);
            }
        }
        
        window.open("https://wa.me/2250709002881?text=" + encodeURIComponent(msg));
        
        cart = [];
        localStorage.setItem('latyfa_cart', JSON.stringify(cart));
        updateCartCount();
        fermerPanier();
        
        showToast("‚úÖ Commande envoy√©e !");
        
        setTimeout(() => {
            if (confirm("Voulez-vous suivre votre commande en direct ?")) {
                ouvrirSuivi();
            }
        }, 2000);
    }
    
    // ==================== POINTS FID√âLIT√â ====================
    function ajouterPoints(montant) {
        const pointsGagnes = Math.floor(montant / 1000);
        pointsFidelite += pointsGagnes;
        localStorage.setItem('latyfa_points', pointsFidelite.toString());
        
        document.getElementById('loyalty-points').innerText = pointsFidelite;
        const progress = Math.min(100, (pointsFidelite / 100) * 100);
        document.getElementById('loyalty-progress').style.width = progress + '%';
        
        if (pointsFidelite >= 100 && !localStorage.getItem('latyfa_reduction_debloquee')) {
            showToast("üéâ F√âLICITATIONS ! Vous avez d√©bloqu√© une r√©duction de 10% !");
            localStorage.setItem('latyfa_reduction_debloquee', 'true');
        }
    }
    
    // ==================== FAVORIS ====================
    function toggleWishlist(productId, btn) {
        const index = wishlist.indexOf(productId);
        if (index > -1) {
            wishlist.splice(index, 1);
            if (btn) {
                btn.classList.remove('active');
                btn.innerHTML = '<i class="fa-regular fa-heart"></i>';
            }
            showToast("‚ù§Ô∏è Retir√© des favoris");
        } else {
            wishlist.push(productId);
            if (btn) {
                btn.classList.add('active');
                btn.innerHTML = '<i class="fa-solid fa-heart"></i>';
            }
            showToast("‚ù§Ô∏è Ajout√© aux favoris");
        }
        localStorage.setItem('latyfa_wishlist', JSON.stringify(wishlist));
        updateWishlistCount();
    }
    
    function updateWishlistCount() {
        const count = document.getElementById('wishlist-count');
        if (count) {
            count.innerText = wishlist.length;
        }
        
        // Mettre √† jour le compteur mobile
        const mobileCount = document.getElementById('wishlist-count-mobile');
        if (mobileCount) {
            mobileCount.innerText = wishlist.length;
        }
    }
    
    function toggleWishlistModal() {
        const modal = document.getElementById('wishlistModal');
        const container = document.getElementById('wishlist-items');
        
        if (wishlist.length === 0) {
            container.innerHTML = '<p class="text-center text-gray-400 text-[10px] py-10">Aucun favori</p>';
        } else {
            const wishlistProducts = products.filter(p => wishlist.includes(p.id));
            container.innerHTML = wishlistProducts.map(p => `
                <div class="flex items-center gap-3 border-b pb-3">
                    <img src="${p.images[0]}" class="w-16 h-16 object-cover rounded-lg cursor-pointer" onclick="voirDetails(${p.id}); fermerWishlist()">
                    <div class="flex-1">
                        <p class="text-[10px] font-bold uppercase cursor-pointer" onclick="voirDetails(${p.id}); fermerWishlist()">${p.name}</p>
                        <p class="text-[#c5a059] font-black text-[10px]">${p.price.toLocaleString()} F</p>
                    </div>
                    <button onclick="toggleWishlist(${p.id}, null); toggleWishlistModal()" class="text-red-500 text-xs">
                        <i class="fa-solid fa-trash-can"></i>
                    </button>
                </div>
            `).join('');
        }
        
        modal.classList.add('active');
    }
    
    function fermerWishlist() {
        document.getElementById('wishlistModal').classList.remove('active');
    }
    
    // ==================== COMPARATEUR ====================
    function ouvrirComparateur() {
        const modal = document.getElementById('comparateurModal');
        const container = document.getElementById('comparateur-items');
        
        if (comparateur.length === 0) {
            container.innerHTML = '<p class="text-center text-gray-400 text-[10px] py-10 col-span-2">Ajoutez des produits √† comparer</p>';
        } else {
            const compareProducts = products.filter(p => comparateur.includes(p.id));
            container.innerHTML = compareProducts.map(p => `
                <div class="border rounded-lg p-3">
                    <img src="${p.images[0]}" class="h-32 w-full object-cover rounded-lg mb-2">
                    <p class="text-[9px] font-bold uppercase">${p.name}</p>
                    <p class="text-[#c5a059] font-black text-[10px]">${p.price.toLocaleString()} F</p>
                    <p class="text-[8px] text-gray-400 mt-1">${p.description?.substring(0, 50)}...</p>
                    <button onclick="retirerComparateur(${p.id})" class="mt-2 text-red-500 text-[8px] font-bold uppercase">Retirer</button>
                </div>
            `).join('');
        }
        
        modal.classList.add('active');
    }
    
    function fermerComparateur() {
        document.getElementById('comparateurModal').classList.remove('active');
    }
    
    function ajouterComparateur(productId) {
        if (comparateur.length >= 4) {
            showToast("‚ö†Ô∏è Maximum 4 produits √† comparer");
            return;
        }
        if (!comparateur.includes(productId)) {
            comparateur.push(productId);
            localStorage.setItem('latyfa_comparateur', JSON.stringify(comparateur));
            document.getElementById('comparateur-count').innerText = comparateur.length;
            showToast("‚úÖ Ajout√© au comparateur");
        }
    }
    
    function retirerComparateur(productId) {
        const index = comparateur.indexOf(productId);
        if (index > -1) {
            comparateur.splice(index, 1);
            localStorage.setItem('latyfa_comparateur', JSON.stringify(comparateur));
            document.getElementById('comparateur-count').innerText = comparateur.length;
            ouvrirComparateur();
        }
    }
    
    // ==================== AVIS ====================
    function ouvrirAvis() {
        const modal = document.getElementById('avisModal');
        const container = document.getElementById('all-reviews');
        
        container.innerHTML = avis.map(a => `
            <div class="review-card">
                <div class="flex gap-3">
                    <img src="${a.photo}" class="w-10 h-10 rounded-full">
                    <div>
                        <div class="flex items-center gap-2">
                            <span class="text-[10px] font-black">${a.nom}</span>
                            <span class="text-[8px] text-gray-400">${a.date}</span>
                        </div>
                        <div class="flex text-[#c5a059] text-[8px] mt-1">
                            ${Array(5).fill(0).map((_, i) => `<i class="fa-${i < a.note ? 'solid' : 'regular'} fa-star"></i>`).join('')}
                        </div>
                        <p class="text-[9px] mt-2">${a.commentaire}</p>
                    </div>
                </div>
            </div>
        `).join('');
        
        modal.classList.add('active');
    }
    
    function fermerAvis() {
        document.getElementById('avisModal').classList.remove('active');
    }
    
    function deposerAvis() {
        document.getElementById('depotAvisModal').classList.add('active');
        currentRating = 0;
        document.querySelectorAll('#rating-stars i').forEach(star => {
            star.className = 'fa-regular fa-star cursor-pointer hover:text-[#c5a059]';
        });
    }
    
    function fermerDepotAvis() {
        document.getElementById('depotAvisModal').classList.remove('active');
    }
    
    function setRating(rating) {
        currentRating = rating;
        const stars = document.querySelectorAll('#rating-stars i');
        stars.forEach((star, index) => {
            if (index < rating) {
                star.className = 'fa-solid fa-star text-[#c5a059]';
            } else {
                star.className = 'fa-regular fa-star text-gray-300';
            }
        });
    }
    
    function soumettreAvis() {
        const nom = document.getElementById('avis-nom').value;
        const commentaire = document.getElementById('avis-comment').value;
        const photoFile = document.getElementById('avis-photo').files[0];
        
        if (!nom || !commentaire || currentRating === 0) {
            alert("Veuillez remplir tous les champs");
            return;
        }
        
        let photoUrl = "https://randomuser.me/api/portraits/lego/1.jpg";
        if (photoFile) {
            photoUrl = URL.createObjectURL(photoFile);
        }
        
        const nouvelAvis = {
            nom: nom,
            note: currentRating,
            commentaire: commentaire,
            date: new Date().toLocaleDateString('fr-FR'),
            photo: photoUrl
        };
        
        avis.unshift(nouvelAvis);
        localStorage.setItem('latyfa_avis', JSON.stringify(avis));
        
        fermerDepotAvis();
        showToast("‚úÖ Merci pour votre avis !");
        
        document.getElementById('avis-nom').value = '';
        document.getElementById('avis-comment').value = '';
        document.getElementById('avis-photo').value = '';
    }
    
    // ==================== ROUE DE LA FORTUNE ====================
    function ouvrirRoue() {
        document.getElementById('wheelModal').classList.add('active');
        drawWheel();
        majAffichageChances();
        startWheelCountdown();
    }
    
    function fermerRoue() {
        document.getElementById('wheelModal').classList.remove('active');
    }
    
    function drawWheel() {
        const canvas = document.getElementById('canvas');
        if (!canvas) return;
        
        const ctx = canvas.getContext('2d');
        const arc = 2 * Math.PI / prizes.length;
        
        ctx.clearRect(0, 0, 300, 300);
        
        for (let i = 0; i < prizes.length; i++) {
            ctx.beginPath();
            ctx.fillStyle = i % 2 === 0 ? "#c5a059" : "#1a1a1a";
            ctx.moveTo(150, 150);
            ctx.arc(150, 150, 145, i * arc, (i + 1) * arc);
            ctx.fill();
            
            ctx.save();
            ctx.fillStyle = "white";
            ctx.translate(150, 150);
            ctx.rotate(i * arc + arc / 2);
            ctx.font = "bold 12px Montserrat";
            ctx.textAlign = "right";
            ctx.fillText(prizes[i], 130, 5);
            ctx.restore();
        }
    }
    
    function startWheelCountdown() {
        const countdownEl = document.getElementById('wheel-countdown');
        const today = new Date().toLocaleDateString();
        let stats = JSON.parse(localStorage.getItem('latyfa_wheel_stats')) || { date: today, count: 0 };
        
        if (stats.date !== today) {
            stats = { date: today, count: 0 };
        }
        
        if (stats.count >= MAX_TENTATIVES) {
            const now = new Date();
            const midnight = new Date(now);
            midnight.setHours(24, 0, 0, 0);
            const timeLeft = midnight - now;
            
            const hours = Math.floor(timeLeft / (60 * 60 * 1000));
            const minutes = Math.floor((timeLeft % (60 * 60 * 1000)) / (60 * 1000));
            const seconds = Math.floor((timeLeft % (60 * 1000)) / 1000);
            
            countdownEl.innerHTML = `‚è≥ Prochain tour dans: ${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            setTimeout(startWheelCountdown, 1000);
        } else {
            countdownEl.innerHTML = '';
        }
    }
    
    function lancerRoue() {
        let stats = majAffichageChances();
        if (stats.count >= MAX_TENTATIVES) {
            alert("Vous avez d√©j√† utilis√© votre chance aujourd'hui !");
            return;
        }
        
        const btn = document.getElementById('spin');
        const canvas = document.getElementById('canvas');
        const sound = document.getElementById('wheel-sound');
        const victorySound = document.getElementById('victory-sound');
        
        btn.disabled = true;
        
        const randomExtra = Math.floor(Math.random() * 360);
        const totalRotation = 3600 + randomExtra;
        
        let soundInterval = setInterval(() => {
            if (sound) {
                sound.currentTime = 0;
                sound.play().catch(() => {});
            }
        }, 150);
        
        setTimeout(() => clearInterval(soundInterval), 3500);
        
        canvas.style.transition = "transform 4s cubic-bezier(0.15, 0, 0.15, 1)";
        canvas.style.transform = `rotate(${totalRotation}deg)`;
        
        setTimeout(() => {
            const actualAngle = randomExtra % 360;
            const segmentSize = 360 / prizes.length;
            const resultIndex = Math.floor(((360 - actualAngle + 270) % 360) / segmentSize);
            const resultat = prizes[resultIndex];
            
            stats.count++;
            localStorage.setItem('latyfa_wheel_stats', JSON.stringify(stats));
            majAffichageChances();
            startWheelCountdown();
            
            if (resultat === "REESSAYER") {
                alert("üò• R√©essayez demain !");
            } else if (resultat === "CADEAU") {
                if (victorySound) victorySound.play();
                if (typeof confetti !== 'undefined') {
                    confetti({
                        particleCount: 150,
                        spread: 70,
                        origin: { y: 0.6 },
                        colors: ['#c5a059', '#000000', '#ffffff']
                    });
                }
                ouvrirCadeauMystere();
            } else {
                if (victorySound) victorySound.play();
                if (typeof confetti !== 'undefined') {
                    confetti({
                        particleCount: 150,
                        spread: 70,
                        origin: { y: 0.6 },
                        colors: ['#c5a059', '#000000', '#ffffff']
                    });
                }
                
                const promoAmount = resultat.replace(/[^0-9]/g, "") || "5";
                const promoCode = "LATYFA" + promoAmount;
                
                localStorage.setItem('latyfa_active_promo', JSON.stringify({
                    code: promoCode,
                    expires: Date.now() + (24 * 60 * 60 * 1000),
                    remise: promoAmount
                }));
                
                setTimeout(() => {
                    alert(`üéâ F√âLICITATIONS !\nVous avez gagn√© : ${resultat}\nCode promo : ${promoCode}`);
                }, 500);
            }
            
            btn.disabled = false;
        }, 4000);
    }
    
    function majAffichageChances() {
        const aujourdhui = new Date().toLocaleDateString();
        let stats = JSON.parse(localStorage.getItem('latyfa_wheel_stats')) || { date: aujourdhui, count: 0 };
        
        if (stats.date !== aujourdhui) {
            stats = { date: aujourdhui, count: 0 };
        }
        
        const reste = MAX_TENTATIVES - stats.count;
        const msgZone = document.getElementById('wheel-msg');
        
        if (msgZone) {
            if (reste <= 0) {
                msgZone.innerHTML = `<span class="text-red-600">üö´ LIMITE ATTEINTE</span>`;
                document.getElementById('spin').disabled = true;
            } else {
                msgZone.innerHTML = `<span class="text-blue-600">CHANCES RESTANTES : ${reste}/${MAX_TENTATIVES}</span>`;
            }
        }
        
        return stats;
    }
    
    // ==================== CADEAU MYST√àRE ====================
    function ouvrirCadeauMystere() {
        const cadeaux = [
            { nom: "Bracelet Perle", prix: 5000 },
            { nom: "√âchantillon Parfum Oud", prix: 2500 },
            { nom: "Porte-cl√©s Latyfa", prix: 1500 },
            { nom: "-15% sur prochaine commande", prix: 0, code: "CADEAU15" },
            { nom: "Livraison gratuite", prix: 0, code: "LIVRAISON" }
        ];
        
        cadeauMystere = cadeaux[Math.floor(Math.random() * cadeaux.length)];
        
        document.getElementById('cadeau-message').innerHTML = `
            Vous avez gagn√© : <strong>${cadeauMystere.nom}</strong> ${cadeauMystere.prix > 0 ? 'd\'une valeur de ' + cadeauMystere.prix.toLocaleString() + ' F' : ''}
        `;
        
        document.getElementById('cadeauModal').classList.add('active');
    }
    
    function ajouterCadeauAuPanier() {
        if (cadeauMystere) {
            if (cadeauMystere.code) {
                localStorage.setItem('latyfa_active_promo', JSON.stringify({
                    code: cadeauMystere.code,
                    expires: Date.now() + (30 * 24 * 60 * 60 * 1000),
                    remise: cadeauMystere.code === "CADEAU15" ? 15 : 0
                }));
                showToast(`üéüÔ∏è Code ${cadeauMystere.code} activ√© !`);
            } else {
                cart.push({
                    id: 'cadeau-' + Date.now(),
                    label: `üéÅ CADEAU : ${cadeauMystere.nom}`,
                    qty: 1,
                    price: 0,
                    images: ['https://via.placeholder.com/100']
                });
                localStorage.setItem('latyfa_cart', JSON.stringify(cart));
                updateCartCount();
                showToast("üéÅ Cadeau ajout√© au panier !");
            }
        }
        fermerCadeau();
    }
    
    function fermerCadeau() {
        document.getElementById('cadeauModal').classList.remove('active');
        cadeauMystere = null;
    }
    
    // ==================== CALENDRIER AVENT ====================
    function ouvrirAdvent() {
        const modal = document.getElementById('adventModal');
        const calendar = document.getElementById('advent-calendar');
        const today = new Date().getDate();
        const openedDays = JSON.parse(localStorage.getItem('latyfa_advent')) || [];
        
        let html = '';
        for (let i = 1; i <= 24; i++) {
            const isOpened = openedDays.includes(i);
            html += `
                <div class="advent-day ${isOpened ? 'opened' : ''}" onclick="${!isOpened && i <= today ? 'ouvrirCaseAvent('+i+')' : ''}">
                    <span class="text-xs">${i}</span>
                    ${isOpened ? '<i class="fa-solid fa-check text-[8px]"></i>' : ''}
                </div>
            `;
        }
        calendar.innerHTML = html;
        modal.classList.add('active');
    }
    
    function fermerAdvent() {
        document.getElementById('adventModal').classList.remove('active');
    }
    
    function ouvrirCaseAvent(jour) {
        const cadeauxAvent = [
            "Bracelet", "Parfum 5ml", "-10%", "Porte-cl√©s", "Bonbons", "Cr√®me hydratante",
            "Bougie", "Sac cadeau", "-15%", "Bague", "Collier", "Chocolats",
            "√âchantillon", "Mug Latyfa", "-20%", "Boucles d'oreilles", "Brume parfum√©e", "Carnet",
            "Stylo", "Bonnet", "√âcharpe", "-25%", "Montre", "üíé GROS LOT MYST√àRE"
        ];
        
        const cadeau = cadeauxAvent[jour - 1];
        
        if (confirm(`üéÅ Jour ${jour} : ${cadeau} ! Ouvrir ?`)) {
            const openedDays = JSON.parse(localStorage.getItem('latyfa_advent')) || [];
            openedDays.push(jour);
            localStorage.setItem('latyfa_advent', JSON.stringify(openedDays));
            
            if (cadeau.includes('%')) {
                const reduction = parseInt(cadeau) || 10;
                localStorage.setItem('latyfa_active_promo', JSON.stringify({
                    code: `AVENT${jour}`,
                    expires: Date.now() + (7 * 24 * 60 * 60 * 1000),
                    remise: reduction
                }));
                showToast(`üéüÔ∏è Code AVENT${jour} : -${reduction}% !`);
            } else {
                cart.push({
                    id: 'avent-' + Date.now(),
                    label: `üéÑ Cadeau Avent : ${cadeau}`,
                    qty: 1,
                    price: 0,
                    images: ['https://via.placeholder.com/100']
                });
                localStorage.setItem('latyfa_cart', JSON.stringify(cart));
                updateCartCount();
                showToast(`üéÑ Cadeau "${cadeau}" ajout√© !`);
            }
            
            ouvrirAdvent();
        }
    }
    
    // ==================== R√âALIT√â AUGMENT√âE ====================
    function lancerAR(btn) {
        showToast("üì± Ouvrez l'appareil photo pour essayer en AR");
        if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
            navigator.mediaDevices.getUserMedia({ video: true })
                .then(function(stream) {
                    const video = document.createElement('video');
                    video.srcObject = stream;
                    video.play();
                    
                    const modal = document.createElement('div');
                    modal.className = 'fixed inset-0 bg-black z-[2000] flex items-center justify-center';
                    modal.innerHTML = `
                        <div class="absolute top-4 right-4">
                            <button onclick="this.parentElement.parentElement.remove()" class="text-white text-2xl">&times;</button>
                        </div>
                        <div class="text-white text-center">
                            <p class="mb-4">üì∏ Placez le produit devant vous</p>
                            <img src="${currentProduct.images[0]}" class="h-64 mx-auto opacity-50">
                        </div>
                    `;
                    modal.prepend(video);
                    video.style.position = 'absolute';
                    video.style.width = '100%';
                    video.style.height = '100%';
                    video.style.objectFit = 'cover';
                    video.style.zIndex = '-1';
                    
                    document.body.appendChild(modal);
                })
                .catch(function(err) {
                    alert("Impossible d'acc√©der √† la cam√©ra");
                });
        }
    }
    
    // ==================== PREUVE SOCIALE ====================
    function showSocialProof() {
        const box = document.getElementById('social-proof');
        const text = document.getElementById('proof-text');
        if (!box || !text) return;
        
        text.innerText = notifications[Math.floor(Math.random() * notifications.length)];
        box.classList.add('show');
        
        setTimeout(() => box.classList.remove('show'), 5000);
    }
    
    // ==================== FONCTIONS ADMIN ====================
    function ouvrirAdmin() {
        const codeAttendu = localStorage.getItem('latyfa_admin_code') || "2026";
        const codeSaisi = prompt("Code d'acc√®s admin :");
        
        if (codeSaisi === codeAttendu) {
            sessionStorage.setItem('latyfa_admin_session', 'true');
            document.getElementById('adminModal').classList.add('active');
            
            refreshAdminList();
            mettreAJourStats();
            initChart();
            updateClientsList();
            updateClientSelector();
            updateInscriptionsStats();
            
            const maintenanceActif = localStorage.getItem('latyfa_maintenance') === 'true';
            setMaintenance(maintenanceActif);
        } else if (codeSaisi !== null) {
            alert("‚ùå Code incorrect");
        }
    }
    
    // ==================== FONCTIONS MESSAGERIE CORRIG√âES ====================
    function updateClientSelector() {
        const selector = document.getElementById('clientsSelector');
        if (!selector) return;
        
        // Filtrer pour exclure les admins
        const clientsNonAdmin = clients.filter(c => !c.isAdmin);
        
        if (clientsNonAdmin.length === 0) {
            selector.innerHTML = '<p class="text-center text-gray-400 text-[10px] py-4">Aucun client inscrit pour le moment</p>';
            return;
        }
        
        selector.innerHTML = clientsNonAdmin.map(c => `
            <div class="flex items-center gap-2 p-2 border-b border-gray-100 hover:bg-gray-50">
                <input type="checkbox" id="client_${c.id}" value="${c.id}" class="client-check w-4 h-4 accent-[#c5a059]">
                <label for="client_${c.id}" class="flex-1 text-[9px] cursor-pointer">
                    <span class="font-bold block">${c.nom}</span>
                    <span class="text-gray-500">${c.email} | üìû ${c.tel || 'Non renseign√©'}</span>
                    <span class="text-[8px] text-[#c5a059] block">Inscrit le: ${c.dateInscription || 'N/A'}</span>
                </label>
            </div>
        `).join('');
        
        console.log(`‚úÖ ${clientsNonAdmin.length} client(s) charg√©(s) dans le s√©lecteur`);
    }

    function selectAllClients() {
        document.querySelectorAll('#clientsSelector .client-check').forEach(cb => {
            cb.checked = true;
        });
        showToast(`‚úÖ Tous les clients s√©lectionn√©s (${document.querySelectorAll('#clientsSelector .client-check:checked').length})`);
    }

    function selectClientsAvecCommandes() {
        const historique = JSON.parse(localStorage.getItem('latyfa_historique')) || [];
        const clientsActifs = [...new Set(historique.map(cmd => cmd.tel))];
        
        document.querySelectorAll('#clientsSelector .client-check').forEach(cb => {
            const clientId = parseInt(cb.value);
            const client = clients.find(c => c.id === clientId);
            cb.checked = clientsActifs.includes(client?.tel);
        });
        
        const count = document.querySelectorAll('#clientsSelector .client-check:checked').length;
        showToast(`‚úÖ ${count} client(s) actif(s) s√©lectionn√©(s)`);
    }

    function clearClientSelection() {
        document.querySelectorAll('#clientsSelector .client-check').forEach(cb => {
            cb.checked = false;
        });
        showToast("üîÑ S√©lection effac√©e");
    }

    // Ajouter cette fonction pour rafra√Æchir manuellement la liste
    function refreshClientSelector() {
        updateClientSelector();
        showToast("üìã Liste des clients actualis√©e");
    }
    
    function envoyerMessageAdminSelection() {
        const selectedIds = [];
        document.querySelectorAll('#clientsSelector .client-check:checked').forEach(cb => {
            selectedIds.push(parseInt(cb.value));
        });
        
        const objet = document.getElementById('messageObjet').value.trim();
        const contenu = document.getElementById('messageContenu').value.trim();
        
        if (selectedIds.length === 0) {
            alert("S√©lectionnez au moins un destinataire");
            return;
        }
        
        if (!objet || !contenu) {
            alert("Remplissez l'objet et le message");
            return;
        }
        
        envoyerMessageAdmin(selectedIds, objet, contenu);
        
        document.getElementById('messageObjet').value = '';
        document.getElementById('messageContenu').value = '';
        clearClientSelection();
    }
    
    function updateClientsList() {
        const list = document.getElementById('clients-list');
        if (!list) return;
        
        list.innerHTML = clients.filter(c => !c.isAdmin).map(c => `
            <div class="flex justify-between items-center text-[9px] border-b pb-1">
                <span><strong>${c.nom}</strong> (${c.email})</span>
                <span class="text-gray-400">üìû ${c.tel}</span>
            </div>
        `).join('');
    }
    
    function refreshClientsList() {
        updateClientsList();
        showToast("‚úÖ Liste des clients actualis√©e");
    }
    
    function exporterClients() {
        const clientsData = clients.filter(c => !c.isAdmin).map(c => ({
            Nom: c.nom,
            Email: c.email,
            Telephone: c.tel,
            DateInscription: c.dateInscription
        }));
        
        const csv = "Nom;Email;Telephone;DateInscription\n" + 
            clientsData.map(c => `${c.Nom};${c.Email};${c.Telephone};${c.DateInscription}`).join('\n');
        
        const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
        const url = URL.createObjectURL(blob);
        const link = document.createElement("a");
        
        link.setAttribute("href", url);
        link.setAttribute("download", `clients_latyfa_${new Date().toLocaleDateString()}.csv`);
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        URL.revokeObjectURL(url);
    }
    
    function fermerAdmin() {
        document.getElementById('adminModal').classList.remove('active');
    }
    
    function initChart() {
        const ctx = document.getElementById('salesChart')?.getContext('2d');
        if (!ctx) return;
        
        if (window.salesChart) {
            window.salesChart.destroy();
        }
        
        window.salesChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam', 'Dim'],
                datasets: [{
                    label: 'Ventes (FCFA)',
                    data: [12000, 19000, 8000, 15000, 22000, 18000, 25000],
                    borderColor: '#c5a059',
                    backgroundColor: 'rgba(197, 160, 89, 0.1)',
                    tension: 0.4,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            callback: function(value) {
                                return value.toLocaleString() + ' F';
                            }
                        }
                    }
                }
            }
        });
    }
    
    function refreshAdminList() {
        const list = document.getElementById('admin-list');
        if (!list) return;
        
        list.innerHTML = products.map(p => `
            <div class="flex justify-between items-center bg-white p-3 rounded-xl border border-gray-100 mb-2 shadow-sm hover:shadow-md transition-shadow">
                <div class="flex items-center gap-3">
                    <img src="${p.images[0]}" class="w-12 h-12 object-cover rounded-lg ${p.enStock === false ? 'grayscale' : ''}">
                    <div>
                        <span class="font-black text-[10px] uppercase ${p.enStock === false ? 'text-red-300 line-through' : 'text-gray-800'}">${p.name}</span>
                        <span class="text-[10px] font-bold text-[#c5a059] block">${p.price.toLocaleString()} F</span>
                        <span class="text-[8px] text-gray-400">Ventes: ${p.ventes || 0}</span>
                    </div>
                </div>
                <div class="flex gap-1">
                    <button onclick="modifPrixRapide(${p.id})" class="bg-orange-50 text-orange-500 p-2 rounded-lg hover:bg-orange-500 hover:text-white transition-all" title="Modifier prix">
                        <i class="fa-solid fa-tags text-[10px]"></i>
                    </button>
                    <button onclick="preparerModification(${p.id})" class="bg-blue-50 text-blue-500 p-2 rounded-lg hover:bg-blue-500 hover:text-white transition-all" title="Modifier">
                        <i class="fa-solid fa-pen-to-square text-[10px]"></i>
                    </button>
                    <button onclick="toggleStock(${p.id})" class="text-[9px] font-black px-2 py-1 rounded-lg ${p.enStock ? 'bg-green-100 text-green-600' : 'bg-red-100 text-red-600'}">
                        ${p.enStock ? 'ON' : 'OFF'}
                    </button>
                    <button onclick="supprimerProduit(${p.id})" class="text-gray-300 hover:text-red-500 p-2" title="Supprimer">
                        <i class="fa-solid fa-trash-can text-[10px]"></i>
                    </button>
                </div>
            </div>
        `).join('');
    }
    
    function ajouterProduitAdmin() {
        const name = document.getElementById('adm-name').value;
        const price = document.getElementById('adm-price').value;
        const cat = document.getElementById('adm-cat').value;
        const imgInput = document.getElementById('adm-img').value;
        const desc = document.getElementById('adm-desc').value;
        const stockCount = document.getElementById('adm-stock-count').value;
        const stockBas = document.getElementById('adm-stock-bas').checked;
        
        if (!name || !price || !imgInput) {
            alert("Veuillez remplir les champs obligatoires !");
            return;
        }
        
        const imagesArray = imgInput.split(',').map(link => link.trim());
        
        const produit = {
            id: idEnCoursDeModification || Date.now(),
            name: name,
            price: parseInt(price),
            cat: cat,
            images: imagesArray,
            description: desc || "Produit exclusif Latyfa Business",
            enStock: true,
            quantiteRestante: stockCount ? parseInt(stockCount) : null,
            stockBas: stockBas,
            ventes: 0,
            dateAjout: idEnCoursDeModification ? undefined : Date.now()
        };
        
        if (idEnCoursDeModification) {
            const index = products.findIndex(p => p.id === idEnCoursDeModification);
            products[index] = { ...products[index], ...produit };
            idEnCoursDeModification = null;
            alert("Produit modifi√© avec succ√®s !");
        } else {
            products.unshift(produit);
            alert("Nouveau produit ajout√© !");
        }
        
        localStorage.setItem('latyfa_db', JSON.stringify(products));
        render();
        refreshAdminList();
        
        document.getElementById('adm-name').value = '';
        document.getElementById('adm-price').value = '';
        document.getElementById('adm-img').value = '';
        document.getElementById('adm-desc').value = '';
        document.getElementById('adm-stock-count').value = '';
        document.getElementById('adm-stock-bas').checked = false;
    }
    
    function preparerModification(id) {
        const p = products.find(x => x.id === id);
        if (!p) return;
        
        idEnCoursDeModification = id;
        document.getElementById('adm-name').value = p.name;
        document.getElementById('adm-price').value = p.price;
        document.getElementById('adm-cat').value = p.cat;
        document.getElementById('adm-img').value = p.images.join(', ');
        document.getElementById('adm-desc').value = p.description || "";
        document.getElementById('adm-stock-count').value = p.quantiteRestante || "";
        document.getElementById('adm-stock-bas').checked = p.stockBas || false;
        
        const btn = document.querySelector("button[onclick='ajouterProduitAdmin()']");
        if (btn) {
            btn.innerText = "MODIFIER LE PRODUIT";
            btn.classList.add('bg-blue-600');
        }
    }
    
    function modifPrixRapide(id) {
        const p = products.find(x => x.id === id);
        if (!p) return;
        
        const nouveauPrix = prompt(`Nouveau prix pour "${p.name}" (actuel: ${p.price} F) :`, p.price);
        if (nouveauPrix && !isNaN(nouveauPrix)) {
            p.price = parseInt(nouveauPrix);
            localStorage.setItem('latyfa_db', JSON.stringify(products));
            render();
            refreshAdminList();
            alert("üí∞ Prix mis √† jour !");
        }
    }
    
    function supprimerProduit(id) {
        if (confirm("Supprimer d√©finitivement cet article ?")) {
            products = products.filter(p => p.id !== id);
            localStorage.setItem('latyfa_db', JSON.stringify(products));
            render();
            refreshAdminList();
        }
    }
    
    function toggleStock(id) {
        const p = products.find(x => x.id === id);
        if (p) {
            p.enStock = !p.enStock;
            localStorage.setItem('latyfa_db', JSON.stringify(products));
            render();
            refreshAdminList();
        }
    }
    
    function ajouterNouvelleCategorie() {
        const nom = prompt("Nom de la nouvelle cat√©gorie :");
        if (!nom || nom.trim() === "") return;
        
        const id = nom.toLowerCase().trim().replace(/\s+/g, '_');
        
        if (categories.find(c => c.id === id)) {
            alert("Cette cat√©gorie existe d√©j√† !");
            return;
        }
        
        const icone = prompt("Ic√¥ne FontAwesome (ex: fa-heart, fa-star) :", "fa-tag");
        categories.push({ id, nom, icone });
        localStorage.setItem('latyfa_categories', JSON.stringify(categories));
        refreshCategories();
        alert("Cat√©gorie cr√©√©e !");
    }
    
    function supprimerCategorie() {
        const listeNoms = categories.map((c, i) => `${i+1}. ${c.nom}`).join('\n');
        const choix = prompt("Num√©ro de la cat√©gorie √† supprimer :\n" + listeNoms);
        
        if (choix) {
            const index = parseInt(choix) - 1;
            if (categories[index]) {
                const catId = categories[index].id;
                const produitsLies = products.filter(p => p.cat === catId);
                
                if (produitsLies.length > 0) {
                    alert(`Impossible : ${produitsLies.length} produit(s) dans cette cat√©gorie`);
                } else if (confirm(`Supprimer "${categories[index].nom}" ?`)) {
                    categories.splice(index, 1);
                    localStorage.setItem('latyfa_categories', JSON.stringify(categories));
                    renderHorizontalCategories();
                }
            }
        }
    }
    
    // ==================== HISTORIQUE ET STATS ====================
    function mettreAJourStats() {
        const historique = JSON.parse(localStorage.getItem('latyfa_historique')) || [];
        const zoneCA = document.getElementById('stat-ca');
        const zoneNB = document.getElementById('stat-nb');
        const zonePanierMoyen = document.getElementById('stat-panier-moyen');
        
        let totalCA = 0;
        historique.forEach(cmd => {
            const montant = parseInt(cmd.total.toString().replace(/\s/g, '')) || 0;
            totalCA += montant;
        });
        
        const panierMoyen = historique.length > 0 ? Math.round(totalCA / historique.length) : 0;
        
        if (zoneCA) zoneCA.innerText = totalCA.toLocaleString('fr-FR') + " F";
        if (zoneNB) zoneNB.innerText = historique.length;
        if (zonePanierMoyen) zonePanierMoyen.innerText = panierMoyen.toLocaleString('fr-FR') + " F";
        
        const popularList = document.getElementById('popular-products-list');
        if (popularList) {
            const populaires = [...products].sort((a, b) => (b.ventes || 0) - (a.ventes || 0)).slice(0, 5);
            popularList.innerHTML = populaires.map(p => `
                <div class="flex justify-between items-center">
                    <span class="text-[9px] font-bold">${p.name}</span>
                    <span class="text-[#c5a059] text-[9px] font-black">${p.ventes || 0} ventes</span>
                </div>
            `).join('');
        }
    }
    
    function toggleHistorique() {
        const zone = document.getElementById('historique-zone');
        if (zone.classList.contains('hidden')) {
            zone.classList.remove('hidden');
            chargerHistorique();
        } else {
            zone.classList.add('hidden');
        }
    }
    
    function chargerHistorique() {
        const zone = document.getElementById('historique-zone');
        const historique = JSON.parse(localStorage.getItem('latyfa_historique')) || [];
        
        if (historique.length === 0) {
            zone.innerHTML = `
                <div class="text-center py-10 opacity-50">
                    <i class="fa-solid fa-box-archive text-3xl mb-2"></i>
                    <p class="text-[10px] uppercase font-bold">Aucune vente enregistr√©e</p>
                </div>`;
            return;
        }
        
        zone.innerHTML = historique.map(cmd => `
            <div class="bg-white p-4 rounded-xl border-l-4 border-[#c5a059] shadow-sm text-[10px] mb-3 hover:shadow-md transition-shadow">
                <div class="flex justify-between items-start mb-2">
                    <span class="font-black text-gray-400">üìÖ ${cmd.date}</span>
                    <span class="bg-green-100 text-green-700 px-2 py-1 rounded font-bold">${cmd.total}</span>
                </div>
                <p class="mb-1"><strong>üë§ CLIENT :</strong> ${cmd.client} (${cmd.tel})</p>
                <p class="mb-1"><strong>üìç DESTINATION :</strong> ${cmd.lieu}</p>
                <p class="mb-1"><strong>üí≥ PAIEMENT :</strong> ${cmd.paiement || 'Non sp√©cifi√©'}</p>
                <p class="mb-1"><strong>üõçÔ∏è PANIER :</strong> ${cmd.articles}</p>
                <div class="flex gap-2 mt-2 pt-2 border-t border-gray-50 text-[8px] font-bold uppercase">
                    <span class="${cmd.promo !== 'Aucun' ? 'text-blue-500' : 'text-gray-300'}">üéüÔ∏è Code: ${cmd.promo}</span>
                    <span class="${cmd.cadeau === 'OUI' ? 'text-pink-500' : 'text-gray-300'}">üéÅ Cadeau: ${cmd.cadeau}</span>
                </div>
            </div>
        `).join('');
    }
    
    function sauvegarderHistorique() {
        const historique = JSON.parse(localStorage.getItem('latyfa_historique')) || [];
        
        if (historique.length === 0) {
            alert("Aucune donn√©e √† sauvegarder");
            return;
        }
        
        let csvContent = "Date;Client;Telephone;Lieu;Paiement;Articles;Total;Promo;Cadeau\n";
        historique.forEach(cmd => {
            csvContent += `${cmd.date};${cmd.client};${cmd.tel};${cmd.lieu};${cmd.paiement};${cmd.articles};${cmd.total};${cmd.promo};${cmd.cadeau}\n`;
        });
        
        const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
        const url = URL.createObjectURL(blob);
        const link = document.createElement("a");
        
        link.setAttribute("href", url);
        link.setAttribute("download", `Ventes_Latyfa_${new Date().toLocaleDateString()}.csv`);
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        URL.revokeObjectURL(url);
    }
    
    function effacerHistorique() {
        if (confirm("ATTENTION : Supprimer TOUT l'historique ?")) {
            if (confirm("Derni√®re confirmation : cette action est irr√©versible")) {
                localStorage.removeItem('latyfa_historique');
                chargerHistorique();
                mettreAJourStats();
                alert("Historique effac√©");
            }
        }
    }
    
    function sauvegarderToutesDonnees() {
        const backup = {
            date: new Date().toLocaleString('fr-FR'),
            produits: products,
            clients: clients,
            commandes: JSON.parse(localStorage.getItem('latyfa_historique')) || [],
            messages: messages,
            categories: categories,
            avis: avis,
            parrainage: parrainage
        };
        
        const blob = new Blob([JSON.stringify(backup, null, 2)], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const link = document.createElement("a");
        
        link.setAttribute("href", url);
        link.setAttribute("download", `sauvegarde_latyfa_${new Date().toISOString().slice(0,10)}.json`);
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        URL.revokeObjectURL(url);
        
        showToast("‚úÖ Sauvegarde t√©l√©charg√©e");
    }
    
    function restaurerDonnees() {
        const fileInput = document.getElementById('restoreFile');
        fileInput.click();
        
        fileInput.onchange = function(e) {
            const file = e.target.files[0];
            const reader = new FileReader();
            
            reader.onload = function(e) {
                try {
                    const backup = JSON.parse(e.target.result);
                    
                    if (confirm("‚ö†Ô∏è Restaurer cette sauvegarde √©crasera toutes les donn√©es actuelles. Continuer ?")) {
                        if (backup.produits) {
                            products = backup.produits;
                            localStorage.setItem('latyfa_db', JSON.stringify(products));
                        }
                        if (backup.clients) {
                            clients = backup.clients;
                            localStorage.setItem('latyfa_clients', JSON.stringify(clients));
                        }
                        if (backup.commandes) {
                            localStorage.setItem('latyfa_historique', JSON.stringify(backup.commandes));
                        }
                        if (backup.messages) {
                            messages = backup.messages;
                            localStorage.setItem('latyfa_messages', JSON.stringify(messages));
                        }
                        if (backup.categories) {
                            categories = backup.categories;
                            localStorage.setItem('latyfa_categories', JSON.stringify(categories));
                        }
                        if (backup.avis) {
                            avis = backup.avis;
                            localStorage.setItem('latyfa_avis', JSON.stringify(avis));
                        }
                        if (backup.parrainage) {
                            parrainage = backup.parrainage;
                            localStorage.setItem('latyfa_parrainage', JSON.stringify(parrainage));
                        }
                        
                        showToast("‚úÖ Donn√©es restaur√©es avec succ√®s");
                        setTimeout(() => location.reload(), 2000);
                    }
                } catch(err) {
                    alert("Fichier de sauvegarde invalide");
                }
            };
            
            reader.readAsText(file);
        };
    }
    
    function effacerToutesDonnees() {
        if (confirm("üö® ATTENTION : Cette action supprimera TOUTES les donn√©es. √ätes-vous absolument s√ªr ?")) {
            if (confirm("Derni√®re chance : voulez-vous vraiment tout effacer ?")) {
                localStorage.clear();
                showToast("üí• Toutes les donn√©es ont √©t√© effac√©es");
                setTimeout(() => location.reload(), 2000);
            }
        }
    }
    
    function changerMotDePasse() {
        const nouveauCode = prompt("Nouveau code d'acc√®s admin :");
        if (nouveauCode && nouveauCode.trim() !== "") {
            localStorage.setItem('latyfa_admin_code', nouveauCode);
            alert("‚úÖ Code modifi√© !");
        }
    }

    // ==================== FONCTIONS GESTION INSCRIPTIONS ====================
    function updateInscriptionsStats() {
        const total = clients.filter(c => !c.isAdmin).length;
        document.getElementById('stat-total-inscrits').innerText = total;
        
        const today = new Date();
        const oneWeekAgo = new Date(today.getTime() - 7 * 24 * 60 * 60 * 1000);
        
        const inscritsSemaine = clients.filter(c => {
            if (c.isAdmin) return false;
            const dateInscription = new Date(c.dateInscription?.split('/').reverse().join('-'));
            return dateInscription >= oneWeekAgo;
        }).length;
        
        document.getElementById('stat-inscrits-semaine').innerText = inscritsSemaine;
        
        const tbody = document.getElementById('inscrits-liste');
        if (tbody) {
            const inscritsRecents = clients
                .filter(c => !c.isAdmin)
                .sort((a, b) => {
                    const dateA = new Date(a.dateInscription?.split('/').reverse().join('-') || 0);
                    const dateB = new Date(b.dateInscription?.split('/').reverse().join('-') || 0);
                    return dateB - dateA;
                });
            
            tbody.innerHTML = inscritsRecents.map(c => `
                <tr class="border-b hover:bg-gray-50">
                    <td class="p-2">${c.dateInscription || 'N/A'}</td>
                    <td class="p-2 font-bold">${c.nom}</td>
                    <td class="p-2">${c.email}</td>
                    <td class="p-2">${c.tel || 'N/A'}</td>
                    <td class="p-2">
                        <span class="px-2 py-1 rounded-full ${c.source === 'facebook' ? 'bg-blue-100 text-blue-600' : c.source === 'google' ? 'bg-red-100 text-red-600' : 'bg-gray-100 text-gray-600'}">
                            ${c.source || 'Direct'}
                        </span>
                    </td>
                    <td class="p-2">
                        <button onclick="voirClientDetail(${c.id})" class="text-blue-500 hover:text-blue-700">
                            <i class="fa-solid fa-eye"></i>
                        </button>
                        <button onclick="envoyerMessageClient(${c.id})" class="text-green-500 hover:text-green-700 ml-2">
                            <i class="fa-regular fa-envelope"></i>
                        </button>
                    </td>
                </tr>
            `).join('');
        }
        
        initInscriptionsChart();
    }
    
    function initInscriptionsChart() {
        const ctx = document.getElementById('inscriptionsChart')?.getContext('2d');
        if (!ctx) return;
        
        const last7Days = [];
        const counts = [];
        
        for (let i = 6; i >= 0; i--) {
            const date = new Date();
            date.setDate(date.getDate() - i);
            const dateStr = date.toLocaleDateString('fr-FR', { weekday: 'short' });
            last7Days.push(dateStr);
            
            const count = clients.filter(c => {
                if (c.isAdmin) return false;
                const inscDate = new Date(c.dateInscription?.split('/').reverse().join('-') || 0);
                return inscDate.toDateString() === date.toDateString();
            }).length;
            
            counts.push(count);
        }
        
        if (window.inscriptionsChart) {
            window.inscriptionsChart.destroy();
        }
        
        window.inscriptionsChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: last7Days,
                datasets: [{
                    label: 'Nouvelles inscriptions',
                    data: counts,
                    backgroundColor: '#c5a059',
                    borderRadius: 6
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            stepSize: 1
                        }
                    }
                }
            }
        });
    }
    
    function exporterInscrits() {
        const inscrits = clients.filter(c => !c.isAdmin).map(c => ({
            Date: c.dateInscription || 'N/A',
            Nom: c.nom,
            Email: c.email,
            Telephone: c.tel || 'N/A',
            Source: c.source || 'Direct',
            'Points Fid√©lit√©': c.points || 0
        }));
        
        const csv = "Date;Nom;Email;T√©l√©phone;Source;Points\n" + 
            inscrits.map(i => `${i.Date};${i.Nom};${i.Email};${i.Telephone};${i.Source};${i['Points Fid√©lit√©']}`).join('\n');
        
        const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
        const url = URL.createObjectURL(blob);
        const link = document.createElement("a");
        
        link.setAttribute("href", url);
        link.setAttribute("download", `inscrits_latyfa_${new Date().toLocaleDateString()}.csv`);
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        URL.revokeObjectURL(url);
        
        showToast("‚úÖ Export termin√©");
    }
    
    function refreshInscrits() {
        updateInscriptionsStats();
        showToast("üìã Liste actualis√©e");
    }
    
    function voirClientDetail(clientId) {
        const client = clients.find(c => c.id === clientId);
        if (!client) return;
        
        const historique = JSON.parse(localStorage.getItem('latyfa_historique')) || [];
        const commandesClient = historique.filter(cmd => cmd.tel === client.tel);
        
        alert(`
üìã FICHE CLIENT
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üë§ Nom: ${client.nom}
üìß Email: ${client.email}
üìû T√©l√©phone: ${client.tel || 'N/A'}
üìÖ Inscrit le: ${client.dateInscription || 'N/A'}
üîó Source: ${client.source || 'Direct'}
‚≠ê Points: ${client.points || 0}
üì¶ Commandes: ${commandesClient.length}
üí∞ Total achats: ${commandesClient.reduce((sum, cmd) => sum + (parseInt(cmd.total?.toString().replace(/\s/g, '')) || 0), 0).toLocaleString()} F
        `);
    }
    
    function envoyerMessageClient(clientId) {
        const client = clients.find(c => c.id === clientId);
        if (!client) return;
        
        const msg = prompt(`Message pour ${client.nom} :`, "Bonjour, nous avons une offre sp√©ciale pour vous...");
        if (msg) {
            envoyerMessageAdmin([clientId], "Message de Latyfa Shop", msg);
        }
    }

    // ==================== FONCTIONS EMAIL CORRIG√âES ====================
    function envoyerEmail(destinataire, objet, contenu) {
        // Simuler l'envoi d'email (version de d√©monstration)
        console.log("üìß Email envoy√© √†:", destinataire.email);
        console.log("Objet:", objet);
        console.log("Contenu:", contenu);
        
        // Sauvegarder dans l'historique local
        sauvegarderEmailLocal(destinataire, objet, contenu, 'envoye');
        
        // Afficher une notification
        showToast(`üìß Email simul√© envoy√© √† ${destinataire.nom}`);
        
        return true;
    }

    function envoyerEmailMassif() {
        const selectedIds = [];
        document.querySelectorAll('#clientsSelector .client-check:checked').forEach(cb => {
            selectedIds.push(parseInt(cb.value));
        });
        
        const objet = document.getElementById('messageObjet').value.trim();
        const contenu = document.getElementById('messageContenu').value.trim();
        
        if (selectedIds.length === 0) {
            alert("‚ùå S√©lectionnez au moins un destinataire");
            return;
        }
        
        if (!objet || !contenu) {
            alert("‚ùå Remplissez l'objet et le message");
            return;
        }
        
        const clientsSelectionnes = clients.filter(c => selectedIds.includes(c.id));
        
        if (clientsSelectionnes.length === 0) {
            alert("‚ùå Aucun client valide s√©lectionn√©");
            return;
        }
        
        if (!confirm(`üìß Envoyer un email √† ${clientsSelectionnes.length} client(s) ?`)) {
            return;
        }
        
        // Compter les succ√®s
        let successCount = 0;
        
        clientsSelectionnes.forEach(client => {
            if (client.email && client.email.includes('@')) {
                envoyerEmail(client, objet, contenu);
                successCount++;
            } else {
                console.log("Client sans email valide:", client.nom);
            }
        });
        
        // Envoyer aussi en message interne
        envoyerMessageAdmin(selectedIds, objet, contenu);
        
        // Message de succ√®s
        alert(`‚úÖ ${successCount} email(s) envoy√©(s) avec succ√®s !`);
        
        // R√©initialiser
        document.getElementById('messageObjet').value = '';
        document.getElementById('messageContenu').value = '';
        clearClientSelection();
    }

    function sauvegarderEmailLocal(destinataire, objet, contenu, statut = 'local') {
        const emailsEnvoyes = JSON.parse(localStorage.getItem('latyfa_emails')) || [];
        
        emailsEnvoyes.push({
            id: Date.now() + Math.random(),
            destinataire: {
                id: destinataire.id,
                nom: destinataire.nom,
                email: destinataire.email
            },
            objet: objet,
            contenu: contenu,
            date: new Date().toLocaleString('fr-FR'),
            statut: statut
        });
        
        localStorage.setItem('latyfa_emails', JSON.stringify(emailsEnvoyes));
    }

    function envoyerConfirmationCommande(client, commande) {
        const objet = `Confirmation de commande Latyfa Shop #${commande.id}`;
        const contenu = `
Bonjour ${client.nom},

Nous confirmons la r√©ception de votre commande du ${commande.date}.

R√©capitulatif de votre commande :
${commande.articles}

Total : ${commande.total}
Mode de paiement : ${commande.paiement}
Adresse de livraison : ${commande.lieu}

Nous vous tiendrons inform√© d√®s l'exp√©dition de votre colis.

Merci de votre confiance !
L'√©quipe Latyfa Shop
        `;
        
        envoyerEmail(client, objet, contenu);
    }
    
    // ==================== FONCTIONS UTILITAIRES ====================
    function rechercherProduit() {
        const terme = document.getElementById('search-input').value.toLowerCase();
        const grid = document.getElementById('product-grid');
        
        if (!terme) {
            render();
            return;
        }
        
        const filtered = products.filter(p => 
            p.name.toLowerCase().includes(terme) || 
            p.description?.toLowerCase().includes(terme) ||
            p.cat.toLowerCase().includes(terme)
        );
        
        if (filtered.length === 0) {
            grid.innerHTML = `
                <div class="col-span-full text-center py-20">
                    <i class="fa-solid fa-search text-4xl text-gray-200 mb-4"></i>
                    <p class="text-gray-400 text-xs font-bold uppercase">Aucun r√©sultat pour "${terme}"</p>
                </div>`;
        } else {
            grid.innerHTML = filtered.map(p => `
                <div class="product-card p-3" onclick="voirDetails(${p.id})">
                    <img src="${p.images[0]}" class="h-44 w-full object-cover rounded mb-3">
                    <h3 class="text-[11px] font-bold uppercase">${p.name}</h3>
                    <div class="text-[#c5a059] font-black text-lg mt-2">${p.price.toLocaleString()} F</div>
                </div>
            `).join('');
        }
    }
    
    function suivreColis() {
        if (!utilisateurConnecte) {
            ouvrirAuthModal();
            return;
        }
        
        const historique = JSON.parse(localStorage.getItem('latyfa_historique')) || [];
        const mesCommandes = historique.filter(cmd => cmd.client === utilisateurConnecte.nom.toUpperCase() || cmd.tel === utilisateurConnecte.tel);
        
        if (mesCommandes.length === 0) {
            alert("Vous n'avez pas encore de commande √† suivre.");
            return;
        }
        
        ouvrirSuivi();
    }
    
    function ouvrirCGV() {
        document.getElementById('cgvModal').classList.add('active');
    }
    
    function fermerCGV() {
        document.getElementById('cgvModal').classList.remove('active');
    }
    
    function ouvrirGuide() {
        document.getElementById('guideModal').classList.add('active');
    }
    
    function fermerGuide() {
        document.getElementById('guideModal').classList.remove('active');
    }
    
    function toggleDarkMode() {
        document.body.classList.toggle('dark-theme');
        const btn = document.getElementById('dark-mode-btn');
        const icon = btn.querySelector('i');
        
        icon.classList.toggle('fa-moon');
        icon.classList.toggle('fa-sun');
        
        if (document.body.classList.contains('dark-theme')) {
            btn.style.backgroundColor = "#fbbf24";
            btn.style.color = "#000";
            localStorage.setItem('latyfa_theme', 'dark');
        } else {
            btn.style.backgroundColor = "#f3f4f6";
            btn.style.color = "#4b5563";
            localStorage.setItem('latyfa_theme', 'light');
        }
    }
    
    function updateVisitorCount() {
        let count = localStorage.getItem('latyfa_visitors') || 1250;
        count = parseInt(count) + 1;
        localStorage.setItem('latyfa_visitors', count);
        const element = document.getElementById('visitor-count');
        if (element) element.innerText = count.toLocaleString('fr-FR');
    }
    
    function scrollToTop() {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    }
    
    function handleScroll() {
        const backToTop = document.getElementById('backToTop');
        if (window.scrollY > 300) {
            backToTop.classList.add('show');
        } else {
            backToTop.classList.remove('show');
        }
    }
    
    // ==================== FLASH SALE ====================
    function updateFlashSale() {
        const flashElement = document.getElementById('flashCountdown');
        if (!flashElement) return;
        
        const endTime = localStorage.getItem('latyfa_flash_end');
        if (!endTime) {
            const newEnd = Date.now() + (2 * 60 * 60 * 1000);
            localStorage.setItem('latyfa_flash_end', newEnd);
        }
        
        const remaining = parseInt(localStorage.getItem('latyfa_flash_end')) - Date.now();
        
        if (remaining <= 0) {
            flashElement.innerText = "TERMIN√â";
            document.getElementById('flashSale').style.display = 'none';
            return;
        }
        
        const hours = Math.floor(remaining / (60 * 60 * 1000));
        const minutes = Math.floor((remaining % (60 * 60 * 1000)) / (60 * 1000));
        const seconds = Math.floor((remaining % (60 * 1000)) / 1000);
        
        flashElement.innerText = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    }
    
    // ==================== COUNTDOWN ====================
    setInterval(() => {
        const target = new Date("Feb 14, 2026 00:00:00").getTime();
        const now = new Date().getTime();
        const diff = target - now;
        
        if (diff <= 0) {
            document.getElementById('countdown').innerText = "PROMO ACTIV√âE !";
            return;
        }
        
        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((diff % (1000 * 60)) / 1000);
        
        document.getElementById('countdown').innerText = `${days}j ${hours}h ${minutes}m ${seconds}s`;
    }, 1000);
    
    setInterval(updateFlashSale, 1000);
    
    // ==================== FONCTION DE TEST ====================
    function testMaintenance() {
        console.log("=== TEST MODE MAINTENANCE ===");
        console.log("√âtat maintenance:", localStorage.getItem('latyfa_maintenance'));
        console.log("Utilisateur connect√©:", utilisateurConnecte);
        console.log("Est admin:", utilisateurConnecte ? utilisateurConnecte.isAdmin : false);
        
        const isAdmin = utilisateurConnecte && utilisateurConnecte.isAdmin === true;
        alert(`Mode maintenance: ${localStorage.getItem('latyfa_maintenance') === 'true' ? 'ACTIV√â' : 'D√âSACTIV√â'}\nVous √™tes ${isAdmin ? 'ADMIN' : 'VISITEUR'}`);
    }
    
    // ==================== INITIALISATION ====================
    window.addEventListener('load', () => {
        // Initialiser la langue
        initLanguage();
        chargerDonnees();
        
        render();
        drawWheel();
        updateVisitorCount();
        renderHorizontalCategories();
        updateWishlistCount();
        document.getElementById('comparateur-count').innerText = comparateur.length;
        document.getElementById('loyalty-points').innerText = pointsFidelite;
        document.getElementById('loyalty-progress').style.width = Math.min(100, (pointsFidelite / 100) * 100) + '%';
        
        checkMaintenance();
        
        setTimeout(() => {
            const loader = document.getElementById('loader');
            if (loader) loader.classList.add('loader-hidden');
        }, 1500);
        
        setTimeout(() => {
            showSocialProof();
            setInterval(showSocialProof, 15000);
        }, 3000);
        
        document.getElementById('nom-client')?.addEventListener('input', toggleBouton);
        document.getElementById('tel-client')?.addEventListener('input', toggleBouton);
        
        document.getElementById('spin')?.addEventListener('click', lancerRoue);
        
        window.addEventListener('scroll', handleScroll);
        
        const savedTheme = localStorage.getItem('latyfa_theme');
        if (savedTheme === 'dark') {
            document.body.classList.add('dark-theme');
            const btn = document.getElementById('dark-mode-btn');
            if (btn) {
                btn.innerHTML = '<i class="fa-solid fa-sun"></i>';
                btn.style.backgroundColor = "#fbbf24";
                btn.style.color = "#000";
            }
        }
        
        if ('Notification' in window && Notification.permission !== 'granted' && Notification.permission !== 'denied') {
            setTimeout(() => {
                if (confirm("üîî Activez les notifications pour √™tre inform√© des promotions ?")) {
                    Notification.requestPermission();
                }
            }, 10000);
        }
        
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js').catch(() => {});
        }
    });
</script>

<!-- Inclusion de confetti -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1"></script>

</body>
</html>n
